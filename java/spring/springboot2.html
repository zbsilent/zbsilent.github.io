<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SPRINGBOOT基础2 | 从入门到入坟</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/public/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.37773ce3.css" as="style"><link rel="preload" href="/assets/js/app.14c46b19.js" as="script"><link rel="preload" href="/assets/js/2.f296f515.js" as="script"><link rel="preload" href="/assets/js/38.14fb8c93.js" as="script"><link rel="prefetch" href="/assets/js/10.cc75f0bf.js"><link rel="prefetch" href="/assets/js/11.2a088a5c.js"><link rel="prefetch" href="/assets/js/12.a48b0b7b.js"><link rel="prefetch" href="/assets/js/13.5708978f.js"><link rel="prefetch" href="/assets/js/14.a475c484.js"><link rel="prefetch" href="/assets/js/15.5115b89a.js"><link rel="prefetch" href="/assets/js/16.0bd315a4.js"><link rel="prefetch" href="/assets/js/17.c241e369.js"><link rel="prefetch" href="/assets/js/18.5f5238fd.js"><link rel="prefetch" href="/assets/js/19.c2d3eeda.js"><link rel="prefetch" href="/assets/js/20.5b07d8db.js"><link rel="prefetch" href="/assets/js/21.86569316.js"><link rel="prefetch" href="/assets/js/22.ddbefecb.js"><link rel="prefetch" href="/assets/js/23.4e617220.js"><link rel="prefetch" href="/assets/js/24.dcf05b83.js"><link rel="prefetch" href="/assets/js/25.b3775bb5.js"><link rel="prefetch" href="/assets/js/26.028064e7.js"><link rel="prefetch" href="/assets/js/27.5043a5cd.js"><link rel="prefetch" href="/assets/js/28.9dbb554d.js"><link rel="prefetch" href="/assets/js/29.6e152fc9.js"><link rel="prefetch" href="/assets/js/3.a632ef91.js"><link rel="prefetch" href="/assets/js/30.20a07ebc.js"><link rel="prefetch" href="/assets/js/31.65335206.js"><link rel="prefetch" href="/assets/js/32.fb4b9389.js"><link rel="prefetch" href="/assets/js/33.2c16c607.js"><link rel="prefetch" href="/assets/js/34.b08b8611.js"><link rel="prefetch" href="/assets/js/35.70d23e12.js"><link rel="prefetch" href="/assets/js/36.54128fb3.js"><link rel="prefetch" href="/assets/js/37.f2edfbeb.js"><link rel="prefetch" href="/assets/js/39.9b246b4c.js"><link rel="prefetch" href="/assets/js/4.f2d1dae5.js"><link rel="prefetch" href="/assets/js/40.ee582a53.js"><link rel="prefetch" href="/assets/js/41.17bd414c.js"><link rel="prefetch" href="/assets/js/42.0c7a4797.js"><link rel="prefetch" href="/assets/js/43.baf76a56.js"><link rel="prefetch" href="/assets/js/44.e72b7323.js"><link rel="prefetch" href="/assets/js/45.9097f945.js"><link rel="prefetch" href="/assets/js/46.986ff78e.js"><link rel="prefetch" href="/assets/js/47.7fa20fc7.js"><link rel="prefetch" href="/assets/js/48.649687fb.js"><link rel="prefetch" href="/assets/js/49.4a1ddedd.js"><link rel="prefetch" href="/assets/js/5.5f3d3f13.js"><link rel="prefetch" href="/assets/js/50.a4c8a8a0.js"><link rel="prefetch" href="/assets/js/51.e8c01a18.js"><link rel="prefetch" href="/assets/js/52.e1113f18.js"><link rel="prefetch" href="/assets/js/53.363f7bb1.js"><link rel="prefetch" href="/assets/js/54.f954094d.js"><link rel="prefetch" href="/assets/js/55.201ad066.js"><link rel="prefetch" href="/assets/js/6.94dc47cd.js"><link rel="prefetch" href="/assets/js/7.46cd93e6.js"><link rel="prefetch" href="/assets/js/8.662ea532.js"><link rel="prefetch" href="/assets/js/9.874fb35f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.37773ce3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">从入门到入坟</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/goto/" class="nav-link">
  导航
</a></div><div class="nav-item"><a href="https://github.com/zbsilent" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API" class="dropdown-title"><span class="title">前端基础🍃</span> <span class="arrow down"></span></button> <button type="button" aria-label="API" class="mobile-dropdown-title"><span class="title">前端基础🍃</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-development/react/reactypescript.html" class="nav-link">
  前端TS与REACT
</a></li><li class="dropdown-item"><!----> <a href="/front-end-development/nodejs/nodejsheima.html" class="nav-link">
  NODEJS笔记
</a></li><li class="dropdown-item"><h4>
          其他记录
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  跳转百度
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记本1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记本2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/zbsilent/studio" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/goto/" class="nav-link">
  导航
</a></div><div class="nav-item"><a href="https://github.com/zbsilent" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API" class="dropdown-title"><span class="title">前端基础🍃</span> <span class="arrow down"></span></button> <button type="button" aria-label="API" class="mobile-dropdown-title"><span class="title">前端基础🍃</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-development/react/reactypescript.html" class="nav-link">
  前端TS与REACT
</a></li><li class="dropdown-item"><!----> <a href="/front-end-development/nodejs/nodejsheima.html" class="nav-link">
  NODEJS笔记
</a></li><li class="dropdown-item"><h4>
          其他记录
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  跳转百度
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记本1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记本2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/zbsilent/studio" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端应用整理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端框架整理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发工具整理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他工具整理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>后端应用整理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>基础篇章</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>框架篇章</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/spring/spring-qa.html" class="sidebar-link">SPRING项目整合记忆</a></li><li><a href="/java/spring/springboot.html" class="sidebar-link">SPRINBOOT基础</a></li><li><a href="/java/spring/springboot2.html" aria-current="page" class="active sidebar-link">SPRINGBOOT基础2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/spring/springboot2.html#doc" class="sidebar-link">DOC</a></li><li class="sidebar-sub-header"><a href="/java/spring/springboot2.html#code" class="sidebar-link">CODE</a></li><li class="sidebar-sub-header"><a href="/java/spring/springboot2.html#image" class="sidebar-link">IMAGE</a></li><li class="sidebar-sub-header"><a href="/java/spring/springboot2.html#reference" class="sidebar-link">Reference</a></li></ul></li><li><a href="/java/spring/springcloud.html" class="sidebar-link">SPRINGCLOUD基础2</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="springboot基础2">SPRINGBOOT基础2</h1> <h2 id="doc">DOC</h2> <h3 id="spring-boot-base"><em>Spring Boot Base</em></h3> <h4 id="_0、crate-empty-maven-project"><em>0</em>、<a href="https://baidu.com" target="_blank" rel="noopener noreferrer"><em>crate empty maven project</em><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <h4 id="_1、create-helloworld-program"><em>1</em>、<a href="https://docs.spring.io/spring-boot/docs/2.4.6/reference/html/getting-started.html#getting-started" target="_blank" rel="noopener noreferrer"><em>Create HelloWorld program</em><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <h4 id="_2、pom"><em>2</em>、<a href="#POM">POM</a></h4> <ul><li><p>Parent</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.4.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activemq.version</span><span class="token punctuation">&gt;</span></span>5.16.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activemq.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>antlr2.version</span><span class="token punctuation">&gt;</span></span>2.7.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>antlr2.version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appengine-sdk.version</span><span class="token punctuation">&gt;</span></span>1.9.88<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appengine-sdk.version</span><span class="token punctuation">&gt;</span></span>
	....
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><blockquote><p>Spring Boot 版本仲裁</p> <p>没有在<dependencies>中管理的依赖需要自行管理</dependencies></p></blockquote></li> <li><p><a id="F0001">Other Starters</a>[^1]</p> <blockquote><p>场景启动器导入 spring-boot-starter</p></blockquote></li></ul> <h4 id="_3、main-class">3、MAIN CLASS</h4> <ul><li>@<a id="F0002">SpringBootApplication</a>[^2]
<ul><li>@<strong>SpringBootConfiguration</strong>:标注为SpringBoot的配置类
<ul><li>@**Configuration：**Spring定义的配置类</li></ul></li> <li><a id="F2091">@<strong>EnableAutoConfiguration：</strong></a>开启自动配置功能
<ul><li>**@AutoConfigurationPackage：**自动配置包[^3]
<ul><li>*@Import({<a href="#F0003">Registrar.class</a>})*给容器中引入组件</li></ul></li> <li>**@Import({<a id="F0004"><a href="#F9982">AutoConfigurationImportSelector.class</a>})</a>[^4]：**将需要导入的组件以完全限定类名的方式导入
<ul><li><a id="F0005">META-INF/spring.factories[^划重点]</a>:基本都在org.springframework.boot.autoconfigure包下</li></ul></li></ul></li></ul></li></ul> <h4 id="_4、spring-initalizr">4、<a href="https://spring.io/quickstart" target="_blank" rel="noopener noreferrer"><em>Spring Initalizr</em><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <ul><li><p>resources file catalog</p> <ul><li>static：static resources</li> <li>templates ：user freemarker,thymeleaf</li> <li>Application.properties: springboot application config files</li></ul></li> <li><p>@RestController</p> <ul><li>@Controller</li> <li>@ResponseBody</li></ul></li></ul> <h4 id="_5、springboot-configuration-files"><em>5</em>、SpringBoot configuration files</h4> <blockquote><p>Modifying configuration files</p></blockquote> <ul><li><p>application.properties</p></li> <li><p>application.yml</p> <ul><li><code>YML A Markup Language:是一个标记语言</code></li> <li><code>YML isn not Markup Language:不是一个标记语言</code></li> <li>以数据为中心</li></ul></li> <li><p>&lt;a id =“F0006&quot;&gt;Getting value from configuration files</p> <ul><li><a id="F0007">add dependency</a></li> <li><strong>@ConfigurationProperties(prefix =“person&quot;)</strong>: 默认从全局配置文件中获取值</li> <li><strong>@PropertySouce(vlue=&quot;classpath:person.properites&quot;)</strong>:配合@Value(&quot;${name}”) 加载指定配置文件属性</li> <li><strong>@ImportResouce</strong>:导入srping的配置文件，让配置文件里的内容生效
<ul><li>自己写的spring.xml 文件无法自动进来</li> <li><em>@ImportResource(locations = {&quot;classpath:beans.xml”})</em></li></ul></li></ul></li> <li><p><a id="#F0008">JSR303 Validate</a></p> <ul><li><a id="F0008">add dependency</a></li> <li>@Validated</li></ul></li> <li><p><a id="F0009">Add SpringConfig</a></p> <ul><li><a id="F0011">Create MyAppConfig</a></li></ul></li> <li><p>Profiles Config</p> <ul><li>after start ,spring scan appliaction.properties or application.yml from project ,  used to Config</li> <li><code>file:./config/</code>&gt; <code>File:./</code>&gt;<code>Classpath:/config/</code>&gt;<code>Classpath:/</code></li> <li>spring.config.location设置</li> <li>Server.servlet.context-path = /boot02 访问路径</li> <li><strong>spring.config.location = /user/prop.properties</strong>[^运维阶段使用]</li></ul></li></ul> <h4 id="_6、auto-configuration">6、Auto Configuration</h4> <ul><li><a href="#F2091">Flow</a> <ul><li>启动即加载大量自动配置类</li> <li>有没有springboot默认写好的spring自动配置类</li> <li>我们在来看这个自动配置类到底配置了哪些组件（只要我们用的组件有，就不需要配置了）</li> <li>给容器中自动配置类添加组件时候，会从properties类中获取某些属性，我们可以在配置文件中指定这些属性的值
<ul><li>xxxAutonConfiguration 自动配置类</li> <li>给容器中添加组件 利用@Bean</li> <li>有对应的xxxProperties类</li></ul></li></ul></li> <li><a href="#F8872A">Conditional &amp; 自动配置报告</a> <ul><li>指定条件成立，才给容器中添加Bean</li> <li>几乎自动配置类都是在一定条件下生效，即加载并非生效</li> <li><code>application.yml</code> 中配置 <code>debug=true</code> 即可启动 <code>自动配置报</code></li></ul></li></ul> <h4 id="_7、springboot-log-file">7、SpringBoot Log File</h4> <ul><li><p><s>JCL (Jakarta Commons Logging)</s></p></li> <li><p>SLF4J(Simple Logging Facade for Java)</p></li> <li><p><s>Jboss-logging</s></p> <ul><li>Log4j</li> <li>JUL</li> <li>Log4j2(阿帕奇框架 跟Log4j关系不大)</li> <li>Logback</li></ul> <blockquote><p>日志门面：SLF4J</p> <p>日志实现：<s>Log4j</s> Logback</p></blockquote></li> <li><p>Spring框架默认使用JCL</p></li> <li><p><a href="#F2891">SpringBoot选用SLF4J和LOGBACK</a></p> <ul><li>不用调用实现类 ，调用抽象层方法即可</li> <li><a href="http://www.slf4j.org/manual.html" target="_blank" rel="noopener noreferrer">官方手册<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="#img001">看图</a></li></ul></li> <li><p><a href="#T00001">统一日志记录</a></p> <ul><li>统一使用slf4j和logback实现</li> <li>将系统中其他日志框架先排除出去</li> <li>用中间包替换原有的日志框架</li> <li>我们导入slf4j其他的实现</li> <li><a href="#REMOVE01">一定要移除掉框架默认日志依赖</a></li></ul></li> <li><p><a href="#log011">SpringBoot里日志</a></p></li></ul> <h4 id="_8、spring-docker-docker">8、<a>Spring&amp;Docker</a><a href="%E5%BC%80%E8%BF%90%E7%9A%84%E5%BA%94%E7%94%A8%E5%AE%B9%E5%99%A8%E5%BC%95%E6%93%8E%EF%BC%8C%E5%90%AF%E5%8A%A8%E9%9D%9E%E5%B8%B8%E5%BF%AB%EF%BC%8C%E5%9F%BA%E4%BA%8EGO%E8%AF%AD%E8%A8%80%EF%BC%8CApache2.0%E5%BC%80%E6%BA%90%E5%8D%8F%E8%AE%AE">^Docker</a></h4> <hr> <p>Docker host : docker服务</p> <p>Docker client : 链接docker主机进行操作</p> <p>Docker Registy : 用于保存打包好的软件镜像</p> <p>Docker Images : 用于创建docker容器的模版</p> <p>Docker Container : 独立的一个或者一组应用</p> <hr> <ol><li><p>安装docker</p> <blockquote><p>Add config <a>&quot;registry-mirrors&quot;: [&quot;https://hsucowrp.mirror.aliyuncs.com&quot;,&quot;https://docker.mirrors.ustc.edu.cn”  ]</a></p></blockquote></li> <li><p>找到镜像</p> <ol><li><a href="https://hub.docker.com" target="_blank" rel="noopener noreferrer">docker search mysql <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>docker pull mysql</li> <li>docker images 查看安装了哪些镜像</li> <li>docker rmi <IMAGE ID=""></IMAGE></li> <li>docker ps -a
docker start 14fd7ef73b99</li> <li>#执行进入容器命令
docker exec -it 30a29a905ebb /bin/bash</li> <li>#查看容器日志
docker logs --since 30m 14fd7ef73b99</li></ol></li> <li><p>运行镜像，生成容器</p> <ol><li><p>docker run —name container-name -d image-name</p> <p>Eg:docker run —name myredis —d redis</p> <p>eg:<a>sudo docker run -p 3306:3306 --name mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql:5.7</a></p> <ul><li>–name：容器名，此处命名为<code>mysql</code></li> <li>-e：配置信息，此处配置mysql的root用户的登陆密码</li> <li>-p：端口映射，此处映射 主机3306端口 到 容器的3306端口</li> <li>-d：后台运行容器，保证在退出终端后容器继续运行</li></ul></li> <li><p>docker ps (查看运行中的容器)</p></li> <li><p>docker container ls 查看容器运行状态</p> <p>eg: <a>sudo docker exec -it mysql bash</a></p> <p>​		<a>mysql -uroot -p123456</a></p></li> <li><p>docker stop container-name/container-id</p></li> <li><p>docker start container-name/container-id</p></li> <li><p>docker rm container-id</p></li> <li><p>-p 6379:6379</p> <p>eg:docker run -d -p  6379:6379 —name myredis docker.io/reids</p></li> <li><p>docker logs container-name/container-id</p></li></ol></li> <li><p>软件的启停</p></li></ol> <h4 id="_9、jdbc">9、JDBC</h4> <hr> <ul><li><a href="#Y0001">yml配置</a></li> <li>自动生成创建脚本
<ul><li>默认规则: schema.sql,schema-all.sql</li> <li><a href="#Y0001">可用规则</a></li></ul></li> <li>操作数据库
<ul><li><a>JdbcTemplate jdbcTemplate</a> 操作数据库</li></ul></li></ul> <hr> <h5 id="_9-1-整合druid数据源">9.1 <a href="https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter" target="_blank" rel="noopener noreferrer">整合druid数据源<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h5> <blockquote><p><strong>强烈注意</strong>：Spring Boot 2.X 版本不再支持配置继承，多数据源的话每个数据源的所有配置都需要单独配置，否则配置不会生效</p></blockquote> <blockquote><p>2.x 默认不需要创建 直接配置文件即可</p></blockquote> <ul><li>创建数据源需要采用<a href="#C0009"><strong>1</strong></a></li> <li>Druid监控配置</li></ul> <h4 id="_10、-整合mybatis">10、 整合mybatis</h4> <h5 id="_10-1-base-annotation">10.1 Base Annotation</h5> <ul><li><strong>@MapperSacn(value=“package”)</strong></li> <li>@Mapper</li></ul> <h5 id="_10-2-mybatis-config-xml">10.2 mybatis-config.xml</h5> <ul><li><a href="#M0004">mapper设置YML</a></li></ul> <h5 id="_10-2-mybatis设置">10.2 mybatis设置</h5> <ul><li><a href="#P0004">自增主键</a></li></ul> <blockquote><p>@Options(useGeneratedKeys = true,keyProperty = &quot;id&quot;)</p></blockquote> <h5 id="_10-4-log4j2日志整合注意事项">10.4 log4j2日志整合注意事项</h5> <ul><li><a href="#YR0001">import spring-boot-start-log4j2</a></li> <li><a href="#TC0001">remove logback、slf4j.jar</a></li> <li><a href="#CO0001">application.yml configuration</a></li></ul> <h4 id="_11、-jpa整合">11、 JPA整合</h4> <h5 id="_11-1-jap配置">11.1 JAP配置</h5> <ul><li><a href="#JPA0001">JPA Configuration</a></li></ul> <h5 id="_11-2-jap配置">11.2 JAP配置</h5> <ul><li><a href="#JC0001">继承JpaRepository来完成对数据库对操作</a></li> <li><a href="https://docs.spring.io/spring-data/jpa/docs/2.4.9/reference/html/#jpa.entity-persistence" target="_blank" rel="noopener noreferrer"><strong>@Query</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://docs.spring.io/spring-data/jpa/docs/2.4.9/reference/html/#jpa.entity-persistence" target="_blank" rel="noopener noreferrer">@NameQuery<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h4 id="_12、spring-boot启动原理">12、Spring Boot启动原理</h4> <h5 id="_12-1-create-springapplication-class">12.1 create SpringApplication.class</h5> <ul><li>判断是否是web应用</li> <li><a href="#IMG0009">add initializers</a></li> <li><a href="#IMG00101">add Listeners</a></li> <li><a href="">search main method</a>[^search main]</li></ul> <h5 id="_12-2-operation-run-method">12.2 <a href="#RUN01">operation run method</a></h5> <ul><li>准备环境
<ul><li>执行<a href="#APP0001">ApplicationContextInitializer.initialize()</a></li> <li>监听器<a>SrpingApplicationRunListener</a>回调<a>contextPrepared</a></li> <li>加载主配置类定义信息</li> <li>监听器<a>SpringApplicationRunListener</a>回调<a>contextLoaded</a></li></ul></li> <li>刷新启动IOC容器
<ul><li>扫描加载所有的组件</li> <li>包括从<a>META-INF/spring-factories</a>中获取所有<a>EnableAutoCOnfiguration</a>组件</li></ul></li> <li>回调容器中所有的<a>AppliactionRunner</a>、<a>CommandLineRunner的run</a>方法</li> <li>监听器<a>SpringAppliactionRunListener</a>回调<a>finished</a></li></ul> <h4 id="_13、custom-starter">13、Custom Starter</h4> <h5 id="_13-1-场景依赖什么">13.1 场景依赖什么</h5> <h5 id="_13-2-如何编写自动配置">13.2 如何编写自动配置</h5> <ul><li><strong>@Configuration</strong><a>set class is Config file</a></li> <li><strong>@ConditionalOnXxxx</strong></li> <li><strong>@AutoConfigureOrder</strong></li> <li><strong>@Bean</strong> <a>add module to IOC</a></li> <li><strong>@EnableConfigurationProperties</strong> add IOC
<ul><li><em>ConfigurationProperties</em> user<a> WebMvcProperties.class</a>bind Configuration class</li></ul></li></ul> <h5 id="_13-3-将需要启动就加载的自动配置类-放入meta-inf-spring-factories-中">13.3 将需要启动就加载的自动配置类 放入<a>META-INF/spring.factories</a> 中</h5> <ul><li>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
<ul><li>org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\</li> <li>org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\</li> <li>org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,</li></ul></li></ul> <h5 id="_13-4-custom-moudle">13.4 Custom Moudle</h5> <ul><li>启动器只用来依赖导入empty.jar xxx-starter  <font color="red">— spring-boot-starter</font></li> <li>专门写一个自动配置模块 xxx-starter-autoconfiguration <font color="red">— spring-boot-starter-moduleNme</font></li> <li>启动器依赖自动配置模块</li> <li>命名规则
<ul><li>后缀 <font color="red">-spring-boot-starter</font></li> <li>模式：<font color="red">moudle - spring-boot-starter</font></li> <li>举例：<font color="red">mybatis-spring-boot-starter</font></li></ul></li></ul> <h3 id="springboot-高级">SpringBoot 高级</h3> <h4 id="_0、-springboot-cache"><em>0、</em> Springboot&amp;Cache</h4> <h5 id="_0-1-jsr-107"><em>0.1</em> JSR-107</h5> <ul><li><a>CachingProvider</a>[^缓存提供者] 定义创建，配置，获取，管理和控制多个CacheManager</li> <li><a>CacheManager</a>[^缓存管理器] 定义创建，配置，获取，管理和控制多个唯一命名的Cache</li> <li><a>Cache</a>[^缓存组件] 一个类似Map的存储结构</li> <li><a>Entry</a>是一个存储中Cache的key-value对</li> <li><a>Expirt</a> 有效期 通过ExpirtPolicy设置</li></ul> <h5 id="_0-2-spring缓存抽象">0.2 <a href="https://docs.spring.io/spring-boot/docs/2.4.6/reference/html/spring-boot-features.html#boot-features-caching-provider" target="_blank" rel="noopener noreferrer">Spring缓存抽象<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h5> <ul><li><p>org.springframework.cache.Cahe</p></li> <li><p>org.springframework.cache.CacheManager</p></li> <li><p>支持JCache(JSR-107)注解</p></li></ul> <hr> <ul><li><a>@EnableCaching</a>启用缓存</li> <li><strong>@Cacheable</strong>(cacheNames={&quot;user&quot;},condition = &quot;#id&gt;0&quot; ,key = &quot;#id”)<code>add cache</code></li> <li><strong>@CachePut</strong>(cacheNames={&quot;user&quot;},key = &quot;#result.userId”)<code>alter cache</code></li> <li><strong>@CacheEvict</strong>(cacheNames={&quot;user&quot;},/<em>key = &quot;#userId&quot;</em>/allEntries = true,beforeInvocation = true)<code>del cache</code></li></ul> <h5 id="_0-3、整合redis缓存中间件"><em>0.3</em>、<a href="https://docs.spring.io/spring-data/redis/docs/2.5.1/reference/html/#redis:connectors" target="_blank" rel="noopener noreferrer">整合Redis缓存中间件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h5> <blockquote><p>install redis : <a>docker run -d -p 6379:6379 --name myredis redis</a></p></blockquote> <ul><li><strong>import starter</strong></li> <li>**use RedisAutoConfiguration **
<ul><li><em>StringRedisTemplate</em></li> <li><em>RedisTemplate</em></li> <li><a href="#CUST01">custom RedisTemplate</a></li></ul></li> <li><strong>RedisCacheManager</strong> <code>efficient</code> <ul><li><a href="#CUST01">Config  RedisCacheManager</a></li> <li>Autowired RedisCacheManager 可以直接注入使用</li> <li>user.put(&quot;id&quot;,userId)</li></ul></li> <li>Create RedisCache
<ul><li>@CacheConfig(cacheManager = &quot;userCacheManager&quot;)</li> <li>@Cacheable(cacheNames={&quot;user&quot;},condition = &quot;#id&gt;0&quot; ,key = &quot;#id&quot;,unless=&quot;#result == null&quot;,cacheManager = &quot;userCacheManager&quot;)</li> <li>@Primary 多个时候必须默认缓存处理器</li></ul></li></ul> <h4 id="_1、jms-amqp"><em>1</em>、JMS&amp;AMQP</h4> <h5 id="_1-1-提升异步通信-扩展解耦能力-流量削峰">_1.1_提升异步通信，扩展解耦能力，流量削峰</h5> <div class="language-sequence line-numbers-mode"><pre class="language-text"><code>participant 用户请求
participant ExchangeN
participant 消息队列
participant 信道N
participant TCP
participant 秒杀业务系统
participant Consumer消费者
用户请求-&gt;ExchangeN:给交换器
ExchangeN-&gt;消息队列:绑定
note left of 消息队列:exchange用于绑定消息队列
秒杀业务系统-&gt;&gt; TCP: 创建一条TCP
TCP -&gt;&gt; 信道N:多路复用
信道N-&gt;&gt; 消息队列: 取回数据
消息队列--&gt; Consumer消费者:信息返回
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="_1-2-概念">_1.2_概念</h5> <blockquote><p><a>消息发送者将消息发送后，将由消息代理接管，消息代理保证消息传递到指定目的地</a></p></blockquote> <ul><li><p>消息代理(message broker)</p></li> <li><p>目的地(distination)</p></li></ul> <h5 id="_1-4-消息队列主要形式"><em>1.4</em> 消息队列主要形式</h5> <ul><li><strong><em>Queue</em></strong>:<em>point-to-point</em></li> <li><strong><em>topic</em></strong>:<em>publish==/==subscribe</em></li> <li><strong>JMS</strong>(<em>Java Message Service</em>):java消息服务
<ul><li>两种基础模型
<ul><li>Peer-2-Peer</li> <li>Pub/Sub</li></ul></li> <li>多种消息类型
<ul><li>TextMessage</li> <li>MapMessage</li> <li>BytesMessage</li> <li>StreamMessage</li> <li>ObjectMessage</li> <li>Message(只有消息头和属性)</li></ul></li></ul></li> <li><strong>AMQP</strong>(<em>Advanced Message Queuing Protocol</em>) : 高级消息队列协议，兼容JMS网络线级协议
<ul><li>两种基础模型
<ul><li>direct exchange</li> <li>fanout exchange</li> <li>topic exchange</li> <li>headers exchange</li> <li>system exchange</li> <li>RabbitMQ</li></ul></li> <li>单一消息类型
<ul><li>byte[] 当实际应用时，有复杂的消息，可以将消息序列化后发送</li></ul></li></ul></li></ul> <h5 id="_1-5-spring支持"><em>1.5</em> spring支持</h5> <ul><li>Spring-jms for jms</li> <li>spring-rabbit for amqp</li> <li>需要ConnectionFactory的实现来连接消息代理</li> <li>提供JmsTemplate,RabbitTemplate来发送消息</li> <li>@JmsListener(JMS)、@RabbitListener(AMQP)注解方法 监听消息代理发布消息</li> <li>@EnableJMS，@EnableRabbit开启支持</li></ul> <h5 id="_1-6-spring-boot-atuoconfiguration"><em>1.6</em> spring boot atuoconfiguration</h5> <ul><li><strong>JmsAutoConfiguration</strong></li> <li><strong>RabbitAutoConfiguration</strong></li></ul> <h3 id="_2、rabbitmq-for-spring">2、RabbitMQ for Spring</h3> <h5 id="_2-3-1-direct-default-for-p-2-p">2.3.1 direct(default) for==p-2-p==</h5> <ul><li>routeing key 和 binding key一致</li></ul> <h5 id="_2-3-2-fanout-pub-sub">2.3.2 fanout ==pub/sub==</h5> <ul><li>不管消息routing key是什么 每个发一份</li></ul> <h5 id="_2-3-3-topic-pub-sub">2.3.3 topic ==pub/sub==</h5> <ul><li>USA.# 允许0活着多个，*匹配一个</li> <li>USA.*weather</li></ul> <h5 id="_2-3-4-headers-pub-sub">2.3.4 headers ==pub/sub==</h5> <h5 id="_2-3-5-发布模型">2.3.5 发布模型</h5> <ul><li><p>Publish</p></li> <li><p>Message</p></li> <li><p>Broker[^消息队列服务器实体]</p> <ul><li>Virtual Host<a href="%E8%A1%A8%E7%A4%BA%E4%B8%80%E6%89%B9%E4%BA%A4%E6%8D%A2%E5%99%A8%E3%80%81%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E5%92%8C%E7%9B%B8%E5%85%B3%E5%AF%B9%E8%B1%A1">^虚拟主机</a> <ul><li>Exchange</li> <li>Binding[^bind eq]</li> <li>Queue[^消息队列]</li></ul></li> <li>Connection[^TCP链接]</li> <li>Channel[^信道]</li></ul></li> <li><p>Consumer[^消息消费者]</p></li></ul> <h4 id="_2-2-docker-for-rabbitmq">2.2 Docker for RabbitMq</h4> <blockquote><p>docker run -d -p 5672:5672 -p 15672:15672 --name myrabbitmq de56f4cfbb98</p></blockquote> <ul><li><p><a href="http://127.0.0.1:15672/" target="_blank" rel="noopener noreferrer">访问管理页面<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>@See <a href="">RabbitAutoConfiguration</a></p> <ul><li>自动配置链接工厂 <strong>CachingConnectionFactory</strong></li> <li><strong>RabbitProperties</strong>：配置文件</li> <li><strong>RabbitTemplate</strong>:给Rabbit发送和接收消息
<ul><li>默认序列化后发送<strong>rabbitTemplate.convertAndSend(&quot;exchange.direct&quot;,&quot;reno&quot;,&quot;hello world 你好&quot;)</strong></li></ul></li> <li><strong>amqpAdmin</strong>:系统管理功能组件</li></ul></li></ul> <h3 id="_3、elasticsearch">3、<a href="http://xn--15q730czkcm04a.com" target="_blank" rel="noopener noreferrer">elasticSearch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <blockquote><p>docker run -e &quot;ES_JAVA_OPTS=-Xms512m -Xmx=512m&quot; -d -p 9200:9200 -p 9300:9300 -e &quot;discovery.type=single-node&quot; --name myelasticsearch 6adeafaff184</p></blockquote> <h3 id="_4、security">4、Security</h3> <h3 id="_5、zookeeper-dubbo-spring-boot-cloud"><em>5、zookeeper+dubbo &amp; Spring Boot+Cloud</em></h3> <blockquote><p>docker run --name zookeeper -p 2181:2181 --restart always -d 2bd79ece4af2</p></blockquote> <ul><li>将服务提供者注册到服务中心</li> <li></li></ul> <hr> <h2 id="code">CODE</h2> <h4 id="_1、springbootapplication-annotation"><em>1</em>、<a href="#F0002">SpringBootApplication Annotation</a></h4> <div class="language-Java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootConfiguration</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootApplication</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2、registrar-class"><em>2</em>、<a id="F0003">Registrar.class</a></h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Registrar</span> <span class="token keyword">implements</span> <span class="token class-name">ImportBeanDefinitionRegistrar</span><span class="token punctuation">,</span> <span class="token class-name">DeterminableImports</span> <span class="token punctuation">{</span>
        <span class="token class-name">Registrar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">,</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">AutoConfigurationPackages</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>registry<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AutoConfigurationPackages<span class="token punctuation">.</span>PackageImports</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPackageNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">determineImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AutoConfigurationPackages<span class="token punctuation">.</span>PackageImports</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_3、-autoconfigurationimportselector-class"><em>3</em>、 <a id="F9982">AutoConfigurationImportSelector.class</a></h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">protected</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">,</span> <span class="token class-name">AnnotationAttributes</span> attributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token class-name">SpringFactoriesLoader</span><span class="token punctuation">.</span><span class="token function">loadFactoryNames</span><span class="token punctuation">(</span><span class="token function">getSpringFactoriesLoaderFactoryClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				<span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notEmpty</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> <span class="token string">&quot;No auto configuration classes found in META-INF/spring.factories. If you &quot;</span>
				<span class="token operator">+</span> <span class="token string">&quot;are using a custom packaging, make sure that file is correct.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> configurations<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token comment">/* spring 扫描 META-INF/spring.factories 里的配置文件
   将扫描到的jar包的类路径包装成Properties对象
   从properties中获取到EnableAtuonConfiguration.class（classsName）类的值，添加到容器中
   每一个自动配置类进行自动配置功能*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>HTTP编码自动配置</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token comment">//启动ServerProperties类</span>
<span class="token comment">//将配置文件中的值和ServerProperties对应起来了</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ServerProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token comment">//如果满足什么条件才生效 当前应用是否是web应用 是 当前配置类生效</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>SERVLET<span class="token punctuation">)</span>
<span class="token comment">//如果满足什么条件才生效 判断当前项目有没有这个类 乱码解决过滤器</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">CharacterEncodingFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//配置文件是否存在以下属性 即使配置文件中不配置 server.servlet.encoding.enabled=true,也是默认生效</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>
    prefix <span class="token operator">=</span> <span class="token string">&quot;server.servlet.encoding&quot;</span><span class="token punctuation">,</span>
    value <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;enabled&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpEncodingAutoConfiguration</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Encoding</span> properties<span class="token punctuation">;</span>

  <span class="token comment">//只有一个有惨构造器的情况下 只去从容器中拿</span>
  <span class="token keyword">public</span> <span class="token class-name">HttpEncodingAutoConfiguration</span><span class="token punctuation">(</span><span class="token class-name">ServerProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>properties <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

 	<span class="token comment">//给容器中添加组件</span>
  <span class="token annotation punctuation">@Bean</span>
  <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
  <span class="token keyword">public</span> <span class="token class-name">CharacterEncodingFilter</span> <span class="token function">characterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">CharacterEncodingFilter</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderedCharacterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   	<span class="token comment">//server.servlet.encoding.charset=utf-8</span>
		filter<span class="token punctuation">.</span><span class="token function">setEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">getCharset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//我们能配置的属性都是来源于这个功能的properti类</span>
	 	filter<span class="token punctuation">.</span><span class="token function">setForceRequestEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span>shouldForce（<span class="token class-name">Type</span><span class="token punctuation">.</span>REQUEST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    filter<span class="token punctuation">.</span><span class="token function">setForceResponseEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">shouldForce</span><span class="token punctuation">(</span><span class="token class-name">Type</span><span class="token punctuation">.</span>RESPONSE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> filter<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><blockquote><p>所有配置文件中能配置的属性都是在XXXXProperties文件中封装着</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>
    prefix <span class="token operator">=</span> <span class="token string">&quot;server&quot;</span><span class="token punctuation">,</span>
    ignoreUnknownFields <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ServerProperties</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> port<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">InetAddress</span> address<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@NestedConfigurationProperty</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ErrorProperties</span> error <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ErrorProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ServerProperties<span class="token punctuation">.</span>ForwardHeadersStrategy</span> forwardHeadersStrategy<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverHeader<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">DataSize</span> maxHttpHeaderSize <span class="token operator">=</span> <span class="token class-name">DataSize</span><span class="token punctuation">.</span><span class="token function">ofKilobytes</span><span class="token punctuation">(</span><span class="token number">8L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Shutdown</span> shutdown<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@NestedConfigurationProperty</span>
    <span class="token keyword">private</span> <span class="token class-name">Ssl</span> ssl<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@NestedConfigurationProperty</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Compression</span> compression<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@NestedConfigurationProperty</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Http2</span> http2<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ServerProperties<span class="token punctuation">.</span>Servlet</span> servlet<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ServerProperties<span class="token punctuation">.</span>Tomcat</span> tomcat<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ServerProperties<span class="token punctuation">.</span>Jetty</span> jetty<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ServerProperties<span class="token punctuation">.</span>Netty</span> netty<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">ServerProperties<span class="token punctuation">.</span>Undertow</span> undertow<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h4 id="_4、-get-value-from-configuration-files"><em>4</em>、 <a href="#F0007">Get Value from Configuration Files</a></h4> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>5、<a href="#F0008">JSR303 Validate</a></p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>jakarta.validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jakarta.validation-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>6、<a href="#F0011">Add SpringConfig</a></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>srpingsut<span class="token punctuation">.</span>quick</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>


<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyAppConfig</span> <span class="token punctuation">{</span>
    <span class="token comment">/** 将方法返回值添加到容器中 id就是方法名*/</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">HelloService</span> <span class="token function">helloService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HelloService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="_7、日志">7、<a id="log011"><em>日志</em></a></h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;跟踪信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;调试信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;基础信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;警告信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;错误信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment">#扫描com.springstudy包下</span>
<span class="token attr-name">logging.level.com.springstudy</span><span class="token punctuation">=</span><span class="token attr-value">trace</span>
<span class="token attr-name">logging.file.name</span><span class="token punctuation">=</span><span class="token attr-value">spring.log</span>
<span class="token attr-name">logging.file.path</span><span class="token punctuation">=</span><span class="token attr-value">/user/logger</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>9、<a id="Y0001">JDBC相关代码配置</a></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8084</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/mysql
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
    <span class="token comment"># 自动建表配置</span>
    <span class="token key atrule">initialization-mode</span><span class="token punctuation">:</span> always
    <span class="token comment"># schema: schema-all.sql</span>
    <span class="token key atrule">schema</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>schema<span class="token punctuation">-</span>all.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_10、crate">10、<a id="C0009">crate</a></h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">&quot;spring.datasource.druid.two&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">DataSource</span> <span class="token function">dataSourceTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">DruidDataSourceBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>开启监控的内容</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code># WebStatFilter配置，说明请参考Druid Wiki，配置_配置WebStatFilter
spring.datasource.druid.web-stat-filter.enabled= #是否启用StatFilter默认值false
spring.datasource.druid.web-stat-filter.url-pattern=
spring.datasource.druid.web-stat-filter.exclusions=
spring.datasource.druid.web-stat-filter.session-stat-enable=
spring.datasource.druid.web-stat-filter.session-stat-max-count=
spring.datasource.druid.web-stat-filter.principal-session-name=
spring.datasource.druid.web-stat-filter.principal-cookie-name=
spring.datasource.druid.web-stat-filter.profile-enable=

# StatViewServlet配置，说明请参考Druid Wiki，配置_StatViewServlet配置
spring.datasource.druid.stat-view-servlet.enabled= #是否启用StatViewServlet（监控页面）默认值为false（考虑到安全问题默认并未启动，如需启用建议设置密码或白名单以保障安全）
spring.datasource.druid.stat-view-servlet.url-pattern=
spring.datasource.druid.stat-view-servlet.reset-enable=
spring.datasource.druid.stat-view-servlet.login-username=
spring.datasource.druid.stat-view-servlet.login-password=
spring.datasource.druid.stat-view-servlet.allow=
spring.datasource.druid.stat-view-servlet.deny=

# Spring监控配置，说明请参考Druid Github Wiki，配置_Druid和Spring关联监控配置
spring.datasource.druid.aop-patterns= # Spring监控AOP切入点，如x.y.z.service.*,配置多个英文逗号分隔

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="add-primarykey"><a id="P0004">add primarykey</a></h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Options</span><span class="token punctuation">(</span>useGeneratedKeys <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>keyProperty <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="mapper-xml-for-yml"><a id="M0004">mapper.xml for yml</a></h4> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">type-aliases-package</span><span class="token punctuation">:</span> com.springstudy.db.pojo
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token key atrule">map-underscore-to-camel-case</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token comment">#  配置文件</span>
<span class="token comment">#  config-location: classpath:mybatis/mybatis-config.xml</span>
<span class="token comment">#  mapper-locations: classpath:mybatis/mapper/*.xml</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="import-spring-boot-start-log4j2"><a id="YR0001">import spring-boot-start-log4j2</a></h4> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code>&lt;dependency<span class="token punctuation">&gt;</span>
   &lt;groupId<span class="token punctuation">&gt;</span>org.springframework.boot&lt;/groupId<span class="token punctuation">&gt;</span>
   &lt;artifactId<span class="token punctuation">&gt;</span>spring<span class="token punctuation">-</span>boot<span class="token punctuation">-</span>starter<span class="token punctuation">-</span>log4j2&lt;/artifactId<span class="token punctuation">&gt;</span>
&lt;/dependency<span class="token punctuation">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="a-id-tc0001-remove-logback、slf4j-jar">&lt;a id =“TC0001&quot;&gt;remove logback、slf4j.jar</h4> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code> &lt;dependency<span class="token punctuation">&gt;</span>
   &lt;groupId<span class="token punctuation">&gt;</span>org.springframework.boot&lt;/groupId<span class="token punctuation">&gt;</span>
   &lt;artifactId<span class="token punctuation">&gt;</span>spring<span class="token punctuation">-</span>boot<span class="token punctuation">-</span>starter<span class="token punctuation">-</span>web&lt;/artifactId<span class="token punctuation">&gt;</span>
   &lt;<span class="token tag">!--***Spring</span> Boot 默认使用的日志框架是logback，去掉logback日志框架<span class="token important">***--&gt;</span><span class="token scalar string">
   &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;</span>
&lt;/dependency<span class="token punctuation">&gt;</span>
&lt;dependency<span class="token punctuation">&gt;</span>
   &lt;groupId<span class="token punctuation">&gt;</span>org.springframework.boot&lt;/groupId<span class="token punctuation">&gt;</span>
   &lt;artifactId<span class="token punctuation">&gt;</span>spring<span class="token punctuation">-</span>boot<span class="token punctuation">-</span>starter<span class="token punctuation">-</span>log4j2&lt;/artifactId<span class="token punctuation">&gt;</span>
   &lt;exclusions<span class="token punctuation">&gt;</span>
       &lt;exclusion<span class="token punctuation">&gt;</span>
           &lt;groupId<span class="token punctuation">&gt;</span>org.apache.logging.log4j&lt;/groupId<span class="token punctuation">&gt;</span>
           &lt;artifactId<span class="token punctuation">&gt;</span>log4j<span class="token punctuation">-</span>slf4j<span class="token punctuation">-</span>impl&lt;/artifactId<span class="token punctuation">&gt;</span>
       &lt;/exclusion<span class="token punctuation">&gt;</span>
   &lt;/exclusions<span class="token punctuation">&gt;</span>
&lt;/dependency<span class="token punctuation">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="application-yml-configuration"><a id="CO0001">application.yml configuration</a></h4> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">type-aliases-package</span><span class="token punctuation">:</span> com.springstudy.db.pojo
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token key atrule">log-impl</span><span class="token punctuation">:</span> org.apache.ibatis.logging.log4j2.Log4j2Impl
<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">file</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> sping<span class="token punctuation">-</span>xx.log
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /Users/Reno/Developer/logger/newlog
  <span class="token key atrule">pattern</span><span class="token punctuation">:</span>
    <span class="token key atrule">console</span><span class="token punctuation">:</span> <span class="token string">&quot;%d{HH:mm:ss.SSS} -&gt; %contextName [%thread] %-5level %logger{36} - %msg%n&quot;</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">com</span><span class="token punctuation">:</span>
      <span class="token key atrule">springstudy</span><span class="token punctuation">:</span>
        <span class="token key atrule">db</span><span class="token punctuation">:</span>
          <span class="token key atrule">mapper</span><span class="token punctuation">:</span> DEBUG
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h4 id="继承jparepository来完成对数据库对操作"><a id="JC0001">继承JpaRepository来完成对数据库对操作</a></h4> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserRepository</span> <span class="token keyword">extends</span> <span class="token class-name">JpaRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * 查询高段位查询
     * @param userId 用户ID
     * @return User
     */</span>
    <span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;select u from User u where u.userId =:userId&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">User</span> <span class="token function">findByUserId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 按用户编码查询
     * @param userCode 用户编码
     * @return User
     */</span>
    <span class="token class-name">User</span> <span class="token function">findByUserCode</span><span class="token punctuation">(</span><span class="token class-name">String</span> userCode<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><a id="JPA0001">JPA</a></p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> data<span class="token punctuation">-</span>jpa
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/jpa
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
  <span class="token key atrule">jpa</span><span class="token punctuation">:</span>
    <span class="token key atrule">hibernate</span><span class="token punctuation">:</span>
      <span class="token key atrule">ddl-auto</span><span class="token punctuation">:</span> update
    <span class="token key atrule">show-sql</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">open-in-view</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8085</span>
<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">file</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>.log
  <span class="token key atrule">pattern</span><span class="token punctuation">:</span>
    <span class="token key atrule">console</span><span class="token punctuation">:</span> <span class="token string">&quot;%d{HH:mm:ss} -&gt; [%thread] %-5level %logger{36} - %msg%n&quot;</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token key atrule">com</span><span class="token punctuation">:</span>
      <span class="token key atrule">springstudy</span><span class="token punctuation">:</span>
        <span class="token key atrule">jpa</span><span class="token punctuation">:</span>
          <span class="token key atrule">repository</span><span class="token punctuation">:</span> DEBUG

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><a id="APP0001">ApplicationContextInitializer.initialize()</a></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">(</span><span class="token class-name">ResourceLoader</span> resourceLoader<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> primarySources<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>resourceLoader <span class="token operator">=</span> resourceLoader<span class="token punctuation">;</span>
  <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notNull</span><span class="token punctuation">(</span>primarySources<span class="token punctuation">,</span> <span class="token string">&quot;PrimarySources must not be null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>primarySources <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedHashSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>primarySources<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>webApplicationType <span class="token operator">=</span> <span class="token class-name">WebApplicationType</span><span class="token punctuation">.</span><span class="token function">deduceFromClasspath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//META-INF/spring.factories</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>bootstrapRegistryInitializers <span class="token operator">=</span> <span class="token function">getBootstrapRegistryInitializersFromSpringFactories</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setInitializers</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token punctuation">)</span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContextInitializer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setListeners</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token punctuation">)</span> <span class="token function">getSpringFactoriesInstances</span><span class="token punctuation">(</span><span class="token class-name">ApplicationListener</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass <span class="token operator">=</span> <span class="token function">deduceMainApplicationClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><a id="RUN01">run()</a></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">ConfigurableApplicationContext</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">StopWatch</span> stopWatch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StopWatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  stopWatch<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">DefaultBootstrapContext</span> bootstrapContext <span class="token operator">=</span> <span class="token function">createBootstrapContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token class-name">ConfigurableApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token function">configureHeadlessProperty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//获取Listeners 从META-INF/spring.factries</span>
  <span class="token class-name">SpringApplicationRunListeners</span> listeners <span class="token operator">=</span> <span class="token function">getRunListeners</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  listeners<span class="token punctuation">.</span><span class="token function">starting</span><span class="token punctuation">(</span>bootstrapContext<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
     <span class="token class-name">ApplicationArguments</span> applicationArguments <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultApplicationArguments</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建环境 </span>
    <span class="token class-name">ConfigurableEnvironment</span> environment <span class="token operator">=</span> <span class="token function">prepareEnvironment</span><span class="token punctuation">(</span>listeners<span class="token punctuation">,</span> bootstrapContext<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//配置环境</span>
    <span class="token function">configureIgnoreBeanInfo</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//启动头文件 可以自定义</span>
    <span class="token class-name">Banner</span> printedBanner <span class="token operator">=</span> <span class="token function">printBanner</span><span class="token punctuation">(</span>environment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建应用上下文 即创建IOC容器 AnnotationConfigServletWebServerApplicationContext</span>
    context <span class="token operator">=</span> <span class="token function">createApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//设置启动器 </span>
    context<span class="token punctuation">.</span><span class="token function">setApplicationStartup</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>applicationStartup<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//准备上下文环境 </span>
    <span class="token comment">//applyInitializers(context); 回调之前保存好的Initialize方法</span>
		<span class="token comment">//listeners.contextPrepared(context); 回调之前SpringApplicationRunListener的contextPrepared方法</span>
    <span class="token comment">//listeners.contextLoaded(context) 运行完成后回调所有的springApplicationRunListener他的contextLoaded方法</span>
    <span class="token function">prepareContext</span><span class="token punctuation">(</span>bootstrapContext<span class="token punctuation">,</span> context<span class="token punctuation">,</span> environment<span class="token punctuation">,</span> listeners<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">,</span> printedBanner<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//刷新容器 ioc容器初始化过程 </span>
    <span class="token function">refreshContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token function">afterRefresh</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    stopWatch<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>logStartupInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">new</span> <span class="token class-name">StartupInfoLogger</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mainApplicationClass<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logStarted</span><span class="token punctuation">(</span><span class="token function">getApplicationLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> stopWatch<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     listeners<span class="token punctuation">.</span><span class="token function">started</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//从ioc容器中 所有 ApplicationRunner，CommandLineRunner</span>
     <span class="token function">callRunners</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> applicationArguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">handleRunFailure</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ex<span class="token punctuation">,</span> listeners<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
     listeners<span class="token punctuation">.</span><span class="token function">running</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">handleRunFailure</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> ex<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> context<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><p><a id="CUST01">MyRedisConfiguration</a></p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>study<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>study<span class="token punctuation">.</span>cache<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span><span class="token class-name">UserEntity</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnMissingBean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnSingleCandidate</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Primary</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>cache<span class="token punctuation">.</span></span><span class="token class-name">RedisCacheConfiguration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>cache<span class="token punctuation">.</span></span><span class="token class-name">RedisCacheManager</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>connection<span class="token punctuation">.</span></span><span class="token class-name">RedisConnectionFactory</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">RedisTemplate</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">GenericJackson2JsonRedisSerializer</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">RedisSerializationContext</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span><span class="token class-name">RedisSerializer</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>time<span class="token punctuation">.</span></span><span class="token class-name">Duration</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author zbsilent
 * @date 2021年06月05日 11:04 上午
 */</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRedisConfig</span> <span class="token punctuation">{</span>

<span class="token comment">//    @Bean</span>
<span class="token comment">//    public RedisTemplate&lt;Object, UserEntity&gt; userRedisTemplate(RedisConnectionFactory redisConnectionFactory) {</span>
<span class="token comment">//        RedisTemplate&lt;Object, UserEntity&gt; template = new RedisTemplate&lt;Object, UserEntity&gt;();</span>
<span class="token comment">//        template.setDefaultSerializer(new Jackson2JsonRedisSerializer&lt;UserEntity&gt;(UserEntity.class));</span>
<span class="token comment">//        template.setConnectionFactory(redisConnectionFactory);</span>
<span class="token comment">//        return template;</span>
<span class="token comment">//    }</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@Primary</span>
    <span class="token keyword">public</span> <span class="token class-name">RedisCacheManager</span> <span class="token function">userCacheManager</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> connectionFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RedisCacheConfiguration</span> redisCacheConfiguration <span class="token operator">=</span> <span class="token class-name">RedisCacheConfiguration</span><span class="token punctuation">.</span><span class="token function">defaultCacheConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>
                <span class="token function">entryTtl</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofDays</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disableCachingNullValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">serializeValuesWith</span><span class="token punctuation">(</span><span class="token class-name">RedisSerializationContext
                        <span class="token punctuation">.</span>SerializationPair</span><span class="token punctuation">.</span><span class="token function">fromSerializer</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GenericJackson2JsonRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">RedisCacheManager</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span>connectionFactory<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">cacheDefaults</span><span class="token punctuation">(</span>redisCacheConfiguration<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h4 id="end">END</h4> <hr> <h2 id="image">IMAGE</h2> <p><a id="img001">日志实现</a></p> <p><img src="http://www.slf4j.org/images/concrete-bindings.png" alt="click to enlarge"></p> <p><a id="T00001">同一日志</a></p> <p><img src="http://www.slf4j.org/images/legacy.png" alt="click to enlarge"></p> <p><a id="IMG0009">add initializers</a></p> <p><img src="https://raw.githubusercontent.com/zbsilent/imag/main/%E5%8A%A0%E8%BD%BDinitiali" alt="image-20210604225441965"></p> <p><a id="IMG00101">add Listeners</a></p> <p><img src="https://raw.githubusercontent.com/zbsilent/imag/main/image-20210604225543600.png" alt="image-20210604225543600"></p> <h1 id=""></h1> <h2 id="reference"><em>Reference</em></h2> <p>[^1]:<code>spring-boot-starter</code>为开头且包下的其他组件  例如： <code>spring-boot-starter</code> <code>spring-boot-starter-activemq</code>,<code>spring-boot-starter-amqp</code>,<code>spring-boot-starter-aop</code>
[^2]:该注解标注的类，SpringBoot则运行该类的main()启动springboot应用
[^3]:将主配置类标注类所在包及以下所有包扫描到spring容器中
[^4]:<code>org.springframework.boot.autoconfigure</code>.??.<code>??AutoConfiguration</code>包下的自动配置类
[^划重点]:重要的配置文件路径，spring boot 在启动的时候从类路径下的META-INF/spring.factories中获取EnableAutoConfiguration指定的值，并将这些值作为自动配置类导入到容器中，自动配置类生效，帮我们进行自动配置工作
[^运维阶段使用]: 项目打包后可以使用命令行参数的形式，在启动项目的时候指定配置文件的新位置 ，<em><code>java -jar xxxx.jar --spring.config.loaction=/user/prop.properties</code> 运行文件</em></p> <hr> <p>​																																														<em>study by zbsilent@gmail.com</em></p> <p>[^信道]:</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zbsilent/studio/edit/master/docs/java/spring/springboot2.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/24/2022, 12:47:58 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/java/spring/springboot.html" class="prev">
        SPRINBOOT基础
      </a></span> <span class="next"><a href="/java/spring/springcloud.html">
        SPRINGCLOUD基础2
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.14c46b19.js" defer></script><script src="/assets/js/2.f296f515.js" defer></script><script src="/assets/js/38.14fb8c93.js" defer></script>
  </body>
</html>
