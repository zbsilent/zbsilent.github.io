<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SringIOC容器和核心概念 | 从入门到入坟</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/public/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.37773ce3.css" as="style"><link rel="preload" href="/assets/js/app.40ca3802.js" as="script"><link rel="preload" href="/assets/js/2.8ec047bb.js" as="script"><link rel="preload" href="/assets/js/38.d574ba89.js" as="script"><link rel="prefetch" href="/assets/js/10.cdafc463.js"><link rel="prefetch" href="/assets/js/11.b8e002f6.js"><link rel="prefetch" href="/assets/js/12.ec5f93e9.js"><link rel="prefetch" href="/assets/js/13.9f5f2474.js"><link rel="prefetch" href="/assets/js/14.f0fa1cb8.js"><link rel="prefetch" href="/assets/js/15.1ecf0819.js"><link rel="prefetch" href="/assets/js/16.76377140.js"><link rel="prefetch" href="/assets/js/17.0f816fdf.js"><link rel="prefetch" href="/assets/js/18.8072341f.js"><link rel="prefetch" href="/assets/js/19.0b0989f7.js"><link rel="prefetch" href="/assets/js/20.d0014e08.js"><link rel="prefetch" href="/assets/js/21.1de0bbe2.js"><link rel="prefetch" href="/assets/js/22.f1f65306.js"><link rel="prefetch" href="/assets/js/23.c8f4c86d.js"><link rel="prefetch" href="/assets/js/24.5caecce4.js"><link rel="prefetch" href="/assets/js/25.2265f7f6.js"><link rel="prefetch" href="/assets/js/26.27e26ce1.js"><link rel="prefetch" href="/assets/js/27.ccf1da29.js"><link rel="prefetch" href="/assets/js/28.c6e8e00e.js"><link rel="prefetch" href="/assets/js/29.bfe99153.js"><link rel="prefetch" href="/assets/js/3.a632ef91.js"><link rel="prefetch" href="/assets/js/30.58db1964.js"><link rel="prefetch" href="/assets/js/31.18739a54.js"><link rel="prefetch" href="/assets/js/32.e0b8d852.js"><link rel="prefetch" href="/assets/js/33.70421566.js"><link rel="prefetch" href="/assets/js/34.f616dc59.js"><link rel="prefetch" href="/assets/js/35.f1b8312f.js"><link rel="prefetch" href="/assets/js/36.04a6728b.js"><link rel="prefetch" href="/assets/js/37.7d5004c6.js"><link rel="prefetch" href="/assets/js/39.eba64677.js"><link rel="prefetch" href="/assets/js/4.f2d1dae5.js"><link rel="prefetch" href="/assets/js/40.d3bbd2a4.js"><link rel="prefetch" href="/assets/js/41.9356f130.js"><link rel="prefetch" href="/assets/js/42.f5c71844.js"><link rel="prefetch" href="/assets/js/43.6cdf80ce.js"><link rel="prefetch" href="/assets/js/44.113fe764.js"><link rel="prefetch" href="/assets/js/45.1dd469ca.js"><link rel="prefetch" href="/assets/js/46.0bde63aa.js"><link rel="prefetch" href="/assets/js/47.73abf52f.js"><link rel="prefetch" href="/assets/js/48.ce799e4f.js"><link rel="prefetch" href="/assets/js/49.1bf4dfe0.js"><link rel="prefetch" href="/assets/js/5.5f3d3f13.js"><link rel="prefetch" href="/assets/js/50.1af85f50.js"><link rel="prefetch" href="/assets/js/51.0ee4fb71.js"><link rel="prefetch" href="/assets/js/52.cd81371b.js"><link rel="prefetch" href="/assets/js/53.5226ebe4.js"><link rel="prefetch" href="/assets/js/54.4168278d.js"><link rel="prefetch" href="/assets/js/55.d758face.js"><link rel="prefetch" href="/assets/js/6.94dc47cd.js"><link rel="prefetch" href="/assets/js/7.26c2dc2d.js"><link rel="prefetch" href="/assets/js/8.9dfb12a4.js"><link rel="prefetch" href="/assets/js/9.29f6f8ff.js">
    <link rel="stylesheet" href="/assets/css/0.styles.37773ce3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">从入门到入坟</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/goto/" class="nav-link">
  导航
</a></div><div class="nav-item"><a href="https://github.com/zbsilent" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API" class="dropdown-title"><span class="title">前端基础🍃</span> <span class="arrow down"></span></button> <button type="button" aria-label="API" class="mobile-dropdown-title"><span class="title">前端基础🍃</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-development/react/reactypescript.html" class="nav-link">
  前端TS与REACT
</a></li><li class="dropdown-item"><!----> <a href="/front-end-development/nodejs/nodejsheima.html" class="nav-link">
  NODEJS笔记
</a></li><li class="dropdown-item"><h4>
          其他记录
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  跳转百度
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记本1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记本2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/zbsilent/studio" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/goto/" class="nav-link">
  导航
</a></div><div class="nav-item"><a href="https://github.com/zbsilent" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API" class="dropdown-title"><span class="title">前端基础🍃</span> <span class="arrow down"></span></button> <button type="button" aria-label="API" class="mobile-dropdown-title"><span class="title">前端基础🍃</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-development/react/reactypescript.html" class="nav-link">
  前端TS与REACT
</a></li><li class="dropdown-item"><!----> <a href="/front-end-development/nodejs/nodejsheima.html" class="nav-link">
  NODEJS笔记
</a></li><li class="dropdown-item"><h4>
          其他记录
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  跳转百度
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记本1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  笔记本2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/zbsilent/studio" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端应用整理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端框架整理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开发工具整理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他工具整理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>后端应用整理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>基础篇章</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>框架篇章</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/spring/spring-qa.html" class="sidebar-link">SPRING项目整合记忆</a></li><li><a href="/java/spring/springboot.html" class="sidebar-link">SPRINBOOT基础</a></li><li><a href="/java/spring/springboot2.html" class="sidebar-link">/java/spring/springboot2.html</a></li><li><a href="/java/spring/springcloud.html" class="sidebar-link">SPRINGCLOUD基础2</a></li><li><a href="/java/spring/spring2023.html" aria-current="page" class="active sidebar-link">SringIOC容器和核心概念</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sringioc容器和核心概念">SringIOC容器和核心概念</h1> <h3 id="ioc">IOC</h3> <ol><li><p>组建是可以复用的对象，可以交给Spring管理，可享受Spring框架的其他功能（AOP，声明事务管理）等，低耦合，复用性强，可维护，易管理配置。</p> <h3 id="普通、复杂容器">普通、复杂容器</h3> <blockquote><p>单纯装个水什么的就是普通容器</p> <p>举例复杂容器：政府、Servlet容器</p></blockquote> <blockquote><p>@SpringJUnitConfig(locations = &quot;classpath:application-context.xml&quot;)</p></blockquote></li> <li><p>springioc容器介绍</p> <blockquote><p>负责实例化、配置和组装Bean。写配置文件，创建核心容器加载对象</p></blockquote></li> <li><p>容器具体接口和实现类</p> <p><code>beanFactory</code>接口提供了一种高级配置机制，能够管理任何类型的对象，他是SpringIOC容器标准化超接口。</p> <p><code>ApplicationContext</code>是<code>BeanFactory</code>的子接口。它扩展了以下功能：</p> <ul><li>更容易与Spring的AOP功能集成</li> <li>消息资源处理（国际化）</li> <li>特定于应用程序给于此接口实现，例如web应用的<code>WebApplicationContext</code></li></ul> <p>ClassPathXmlApplicationContext</p> <p>FileSystemXMLApplicationContext</p> <p>WebAppliactionContext</p> <p>AnnotationAppliactionContext</p> <blockquote><p>控制反转，不在由自己创建是转交给了Spring的核心容器</p></blockquote> <blockquote><p>DI依赖注入</p></blockquote></li> <li><p>容器管理配置方式</p></li> <li><p><code>BeanFactory</code>和``FactoryBean`</p> <blockquote><p><code>FactoryBean</code> 是Spring中一种特殊的 bean,可以在getObject 工厂方法自定义的逻辑创建Bean!是一种能够生产其他Bean 的 Bean。FactoryBean 在容器启动时被创建,而在实际使用时则是通过调用getobject0 方法来得到其所生产的Bean。因此，FactoryBean 可以自定义任何所需的初始化逻辑，生产出一些定制化的 bean。
般情况下，整合第三方框架，都是通过定义 FactoryBean 实现!!!
<code>BeanFactory</code> 是Spring 框架的基础,其作为一个顶级接口定义了容器的基本行为,例如管理 bean 的生命周期、配置文件的加载和解析、bean 的装配和依赖注入等。BeanFactory 接口提供了访问 bean 的方式，例如 getBean)方法获取指定的bean 实例。它可以从不同的来源(例如 Mysql 数据库、XML 文件、Java 配置类等)获取 bean 定义，并将其转换为 bean实例。同时，BeanFactory 还包含很多子类(例如，ApplicationContext 接口) 提供了额外的强大功能。
总的来说,FactoryBean 和 BeanFactory 的区别主要在于前者是用于创建 bean 的接口,它提供了更加灵活的初始化定制功能，而后者是用于管理 bean 的框架基础接口,提供了基本的容器功能和 bean 生命周期管理。</p></blockquote></li> <li><p>==@Resouce==注等于@Autowrie 和 @Qualifier 指定实现类</p> <blockquote><p>JDK17后需要导入jakart.annoation-ap里</p></blockquote></li> <li><p>代码里加载配置文件</p> <blockquote><p>&lt;context:componet-sacn base-package=&quot;&quot;&gt; 扫描注解配置的类</p> <p>&lt;context:property-placeholder location=&quot;classpath:db.properties&quot;/&gt; 引入配置</p> <p>然后利@Value(&quot;&amp;{}&quot;)取值</p> <p>第三方的还是jar包是只读模式</p></blockquote></li> <li><p><code>@Configuration</code>是配置类的方式注入bean，需要利用<code>@ComponentScan</code>扫描注解类，然后利<code>@Import({Xxx.class})</code>的方式引用</p></li> <li><p>TIP 要<b>运行</b>代码，请按 <shortcut actionId="Run"></shortcut> 或</p></li> <li></li></ol> <h3 id="aop">AOP</h3> <ol><li><p>代理模式</p> <blockquote><p>减少对目标的调用和打扰 原来直接调用目标方法，现在调用代理方法（非核心代码）</p></blockquote></li> <li><p>静态代理和动态代理</p> <blockquote><p>静态代理需要每个都创建，动态不需要</p></blockquote> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//房东要租房</span>
    <span class="token class-name">Calculator</span> calculator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CalculatorImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//中介帮房东租房子，但是呢？代理角色一般会有一些附属操作！</span>
    <span class="token class-name">Calculator</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CalculateStaticProxy</span><span class="token punctuation">(</span>calculator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//你不用面对房东，直接找中介租房即可！</span>
    <span class="token keyword">int</span> result <span class="token operator">=</span> proxy<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Calculator</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalculatorImpl</span> <span class="token keyword">implements</span> <span class="token class-name">Calculator</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a<span class="token operator">-</span>b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a<span class="token operator">*</span>b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p><code>jdk动态代理，需要被代理的目标必须实现接口，他会根据目标类的接口动态生成一个代理类</code></p> <p><img src="https://raw.githubusercontent.com/zbsilent/imag/main/img/2022/image-20231215120352044.png" alt="image-20231215120352044"></p> <p>测试代码</p> <p><img src="https://raw.githubusercontent.com/zbsilent/imag/main/img/2022/image-20231215120544612.png" alt="image-20231215120544612"></p></li> <li><p><code>cglib 通过继承被代理的目标类实现代理，所以不需要目标实现接口</code></p></li> <li><p>OOP面向对象编程（Object-Oriented Programming，简称 OOP 允许开发者纵向定义</p></li> <li><p>AOP面向切面编程（Aspect-Oriented Programming，简称 AOP）</p> <blockquote><p>是一种编程范式，它提供了一种方式来增强或修改核心业务逻辑的行为，而不需要修改核心代码本身。AOP 主要用于处理跨越多个对象和方法的关注点，例如日志记录、事务管理、安全检查等。</p> <p>AOP 的主要概念包括：</p> <ol><li><p><strong>切面（Aspect）</strong>：切面是一个模块，它包含一组 APIs，这些 APIs 提供了某种特定的跨切点功能，例如日志记录、事务管理等。</p></li> <li><p><strong>连接点（Join Point）</strong>：连接点是程序执行过程中的某个特定位置，如方法调用、异常处理等。</p></li> <li><p><strong>通知（Advice）</strong>：通知是切面在特定连接点执行的代码。主要有前置通知、后置通知、环绕通知、异常通知和最终通知。</p></li> <li><p><strong>切点（Pointcut）</strong>：切点是一组连接点的集合，它定义了通知应该在哪些连接点执行。</p></li> <li><p><strong>引入（Introduction）</strong>：引入允许我们向现有的类添加新方法或属性。</p></li></ol> <p>面向切面编程（AOP）常用于处理跨越多个对象和方法的关注点，这些关注点通常是那些与业务逻辑无关，但又无法避免的代码。以下是一些常见的使用 AOP 的场景：</p> <ol><li><p><strong>日志记录</strong>：通过 AOP，我们可以在方法调用前后添加日志记录的代码，而不需要在每个方法中都添加日志代码。</p></li> <li><p><strong>事务管理</strong>：在数据库操作中，我们可以使用 AOP 来管理事务，确保数据的一致性和完整性。</p></li> <li><p><strong>错误处理</strong>：我们可以使用 AOP 来统一处理方法抛出的异常，这样可以避免在每个方法中都写错误处理的代码。</p></li> <li><p><strong>安全检查</strong>：我们可以使用 AOP 来进行权限验证或者其他的安全检查。</p></li> <li><p><strong>性能监控</strong>：我们可以使用 AOP 来监控方法的执行时间，以便于发现和优化性能瓶颈。</p></li> <li><p><strong>缓存处理</strong>：我们可以使用 AOP 来实现缓存逻辑，提高系统的性能。</p></li></ol> <p>以上就是一些常见的使用 AOP 的场景，但并不限于这些。实际上，任何需要在多个方法或对象中共享的代码，都可以考虑使用 AOP 来实现。</p> <p>面向切面编程（AOP）中的通知（Advice）定义了切面（Aspect）在何时何地应用的逻辑。以下是五种主要的通知类型：</p> <ol><li><p><strong>前置通知（Before advice）</strong>：在目标方法执行前运行的通知。</p></li> <li><p><strong>后置通知（After returning advice）</strong>：在目标方法成功执行后运行的通知。</p></li> <li><p><strong>环绕通知（Around advice）</strong>：在目标方法执行前后都运行的通知，可以决定何时进入目标方法，何时退出，以及如何返回结果。</p></li> <li><p><strong>异常通知（After throwing advice）</strong>：在目标方法抛出异常后运行的通知。</p></li> <li><p><strong>最终通知（After (finally) advice）</strong>：无论目标方法是否成功执行，都会在其后运行的通知。</p></li></ol></blockquote> <p>==例==</p> <div class="language-JAVA line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalculatorLogAspect</span> <span class="token punctuation">{</span>
    <span class="token comment">//切入点表达式</span>
    <span class="token comment">//execution(访问权限符 返回值类型 方法全类名(参数))</span>
    <span class="token comment">//</span>
    <span class="token comment">//execution(public int com.aurora.framework.aopcore.CalculatorImpl.*(..))</span>
    <span class="token comment">//execution(public int com.aurora.framework.aopcore.*.*(..))</span>
    <span class="token comment">//execution(public int com.aurora.framework.aopcore..*.*(..))</span>
    <span class="token comment">//execution(public int com.aurora.framework.aopcore..*.*(int,int))</span>
    <span class="token comment">// 创建一个横切关注点</span>
    <span class="token comment">//@Pointcut(&quot;execution(* com.aurora.framework.aopcore.impl.CalculatorImpl.*.*(..))&quot;)</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">&quot;@annotation(com.aurora.framework.aopcore.aspects.annotation.LogAnn)&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pointCut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;pointCut()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logStart</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取方法名字</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; - 1.1.[获取]到的方法名字是&quot;</span> <span class="token operator">+</span>joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取方法参数</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; - 1.2.[获取]方法参数是&quot;</span> <span class="token operator">+</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取方法所在的类名</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; - 1.3.[获取]方法所在的类名是&quot;</span> <span class="token operator">+</span>joinPoint<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 获取方法所在的类</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot; - 1.4.[获取]方法所在的类是&quot;</span> <span class="token operator">+</span>joinPoint<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;2.[执行前]参数列表是：{&quot;</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">&quot;pointCut()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logEnd</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;4.[执行后]参数列表是：{&quot;</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;pointCut()&quot;</span> <span class="token punctuation">,</span>throwing <span class="token operator">=</span> <span class="token string">&quot;exception&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logException</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span><span class="token class-name">Exception</span> exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;3.[执行异常]异常信息是：{&quot;</span> <span class="token operator">+</span> exception<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;pointCut()&quot;</span><span class="token punctuation">,</span>returning <span class="token operator">=</span> <span class="token string">&quot;result&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logReturn</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span><span class="token class-name">Object</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;3.[返回信息]运行结果是：&quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;pointCut()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">logAround</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;1.[环绕前]参数列表是：{&quot;</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> proceed <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>err<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;5.[环绕后]参数列表是：{&quot;</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> proceed<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><p>==正常结果==</p> <p><img src="https://raw.githubusercontent.com/zbsilent/imag/main/img/2022/image-20231215134435530.png" alt="image-20231215134435530"></p> <p>==异常结果==  <img src="https://raw.githubusercontent.com/zbsilent/imag/main/img/2022/image-20231215134553446.png" alt="image-20231215134553446"></p></li> <li><p>编程式事务</p> <p><img src="https://raw.githubusercontent.com/zbsilent/imag/main/img/2022/image-20231215135735263.png" alt="image-20231215135735263"></p></li> <li><p>声明式事务</p> <blockquote><p>开启事务（前置增强)</p> <p>提交事务 (返回增强)</p> <p>事务回滚 (异常增强)</p></blockquote> <blockquote><p>声明式事务是指使用注解或XMML 配置的方式来控制事务的提交和回滚。
开发者只需要添加配置即可，具体事务的实现由第三方框架实现，避免我们直接进行事务操作!
使用声明式事务可以将事务的控制和业务逻辑分离开来，提高代码的可读性和可维护性。</p> <p>区别:</p> <ul><li>编程式事务需要手动编写代码来管理事务</li> <li>而声明式事务可以通过配置文件或注解来控制事务</li></ul> <p>1.Spring声明式事务对应依赖
spring-tx:包含声明式事务实现的基本规范(事务管理器规范接口和事务增强等等)
spring-jdbc:包含DataSource方式事务管理器实现类DataSourceTransactionManager
spring-orm: 包含其他持久层框架的事务管理器实现类例如:Hibernate/Jpa等</p> <p>我们现在要使用的事务管理器是org.springframeworkjdbc.datasoirce.DataSourceTransactionManager，</p> <p>将来整合JDBC方式、JdbcTemplate 方式、Mybatis 方式的事务实现!</p> <p>DataSourceTransactionManager类中的主要方法
doBegin():开启事务
doSuspend():挂起事务
doResume():恢复挂起的事务
doCommit():提交事务
doRollback():回滚事务</p></blockquote> <blockquote><p><code>@Transactional</code>是Spring框架的一个关键注解，用于声明事务边界。它可以应用于类或方法。当在类级别应用时，它会影响该类中的所有公共方法。当在方法级别应用时，它只影响该特定方法。</p> <p><code>@Transactional</code>注解有许多参数，以下是一些主要的参数：</p> <ul><li><p><code>propagation</code>：这定义了事务的传播行为。默认值是<code>REQUIRED</code>，意味着如果当前存在事务，那么就在该事务中运行，否则就启动一个新的事务。</p></li> <li><p><code>isolation</code>：这定义了事务的隔离级别。默认值是<code>ISOLATION_DEFAULT</code>，这取决于底层数据源。</p></li> <li><p><code>timeout</code>：这定义了事务必须在指定时间内完成。默认值是<code>-1</code>，表示没有超时。</p></li> <li><p><code>readOnly</code>：这是一个布尔值，定义了事务是否为只读。默认值是<code>false</code>，表示事务不是只读。</p></li> <li><p><code>rollbackFor</code>：这定义了哪些异常应该触发事务回滚。默认值是<code>RuntimeException</code>和<code>Error</code>。</p></li> <li><p><code>noRollbackFor</code>：这定义了哪些异常不应该触发事务回滚。</p></li></ul> <p>在你的代码中，<code>@Transactional(rollbackFor = Exception.class)</code>表示如果方法抛出<code>Exception</code>类或其任何子类的异常，那么事务将被回滚。</p></blockquote> <blockquote><p><code>@Transactional</code>注解的参数都有其特定的用途和优点：</p> <ul><li><p><code>propagation</code>：定义事务的传播行为可以帮助我们更好地控制事务的范围和生命周期。例如，如果我们希望在当前事务中运行代码，或者如果当前没有事务，我们希望启动一个新的事务，我们可以使用<code>Propagation.REQUIRED</code>。</p></li> <li><p><code>isolation</code>：定义事务的隔离级别可以帮助我们防止数据不一致。例如，我们可以防止脏读（读取到其他事务未提交的数据）、不可重复读（在同一事务内，多次读取同一数据返回的结果有所不同）、幻读（在同一事务内，多次读取同一数据时，由于其他提交的事务执行了INSERT或DELETE操作，导致每次返回的数据不同）等问题。</p></li> <li><p><code>timeout</code>：定义事务必须在指定时间内完成可以帮助我们防止长时间运行的事务占用系统资源，影响系统性能。</p></li> <li><p><code>readOnly</code>：定义事务是否为只读可以帮助我们提高系统性能。对于只读事务，数据库可以避免执行可能不必要的锁和版本控制机制，从而提高查询性能。</p></li> <li><p><code>rollbackFor</code>和<code>noRollbackFor</code>：定义哪些异常应该触发事务回滚或不应该触发事务回滚可以帮助我们更好地控制事务的行为。例如，我们可能希望在遇到某些特定的异常时回滚事务，而在遇到其他异常时不回滚事务。</p></li></ul></blockquote> <p>事务隔离级别是数据库事务处理的重要概念，用于解决多个并发事务可能带来的问题，如脏读、不可重复读、幻读等。在Spring的<code>@Transactional</code>注解中，可以通过<code>isolation</code>参数来设置事务的隔离级别。以下是四种隔离级别：级别越高性能越低 推荐设置为第二个 ，默认第三个</p> <blockquote><ol><li><p><code>ISOLATION_READ_UNCOMMITTED</code>：这是最低的隔离级别，它允许读取尚未提交的事务更改。可能会导致脏读、不可重复读或幻读。</p></li> <li><p><code>ISOLATION_READ_COMMITTED</code>：这个级别只允许读取已经提交的事务更改。可以防止脏读，但是可能会导致不可重复读或幻读。</p></li> <li><p><code>ISOLATION_REPEATABLE_READ</code>：这个级别在整个事务期间保证了一致的读取视图。可以防止脏读和不可重复读，但可能会导致幻读。</p></li> <li><p><code>ISOLATION_SERIALIZABLE</code>：这是最高的隔离级别，它完全阻止了脏读、不可重复读和幻读。</p></li></ol></blockquote> <p>事务的传播行为定义了在一个事务上下文中，另一个事务如何被传播或启动。在Spring中，可以通过<code>@Transactional</code>注解的<code>propagation</code>参数来设置事务的传播行为。以下是Spring支持的所有事务传播行为：</p> <blockquote><ol><li><p><code>Propagation.REQUIRED</code>：如果当前存在事务，那么就在该事务中运行，否则就启动一个新的事务。这是默认的传播行为。</p></li> <li><p><code>Propagation.SUPPORTS</code>：如果当前存在事务，那么就在该事务中运行，否则就以非事务方式运行。</p></li> <li><p><code>Propagation.MANDATORY</code>：如果当前存在事务，那么就在该事务中运行，否则就抛出异常。</p></li> <li><p><code>Propagation.REQUIRES_NEW</code>：总是启动一个新的事务。如果当前存在事务，那么就将当前事务挂起。</p></li> <li><p><code>Propagation.NOT_SUPPORTED</code>：总是以非事务方式运行，如果当前存在事务，就将当前事务挂起。</p></li> <li><p><code>Propagation.NEVER</code>：总是以非事务方式运行，如果当前存在事务，就抛出异常。</p></li> <li><p><code>Propagation.NESTED</code>：如果当前存在事务，那么就启动一个嵌套事务，这是一个子事务，依赖于当前事务。如果当前事务回滚，那么子事务也会回滚。否则，子事务可以单独回滚，不影响当前事务。如果当前不存在事务，那么就和<code>REQUIRED</code>一样。</p></li></ol> <p>在Java代码中，可以这样设置事务的传播行为：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Propagation</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Transactional</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>propagation <span class="token operator">=</span> <span class="token class-name">Propagation</span><span class="token punctuation">.</span>REQUIRES_NEW<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">someServiceMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// business logic here</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在上述代码中，<code>someServiceMethod</code>方法的事务传播行为被设置为<code>REQUIRES_NEW</code>，这意味着无论是否存在当前事务，该方法都将在新的事务中运行。</p></blockquote></li></ol> <h3 id="springboot">SPRINGBOOT</h3> <ol><li><p><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties" target="_blank" rel="noopener noreferrer">srpingboot properties参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><a href="_Reference:_%5B_https://spring.io_%5D(https://spring.io)">^2</a></p> <p>1.1. 统一配置文件servier</p></li> <li></li> <li></li> <li></li> <li></li> <li></li> <li></li> <li></li> <li></li> <li></li> <li></li></ol> <hr></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zbsilent/studio/edit/master/docs/java/spring/spring2023.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/java/spring/springcloud.html" class="prev">
        SPRINGCLOUD基础2
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.40ca3802.js" defer></script><script src="/assets/js/2.8ec047bb.js" defer></script><script src="/assets/js/38.d574ba89.js" defer></script>
  </body>
</html>
