<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä»å…¥é—¨åˆ°å…¥åŸ</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/public/logo.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.f45bca05.css" as="style"><link rel="preload" href="/assets/js/app.f2d19692.js" as="script"><link rel="preload" href="/assets/js/2.f296f515.js" as="script"><link rel="preload" href="/assets/js/50.b96fa85e.js" as="script"><link rel="prefetch" href="/assets/js/10.0ad9da12.js"><link rel="prefetch" href="/assets/js/11.b8e002f6.js"><link rel="prefetch" href="/assets/js/12.ec5f93e9.js"><link rel="prefetch" href="/assets/js/13.9f5f2474.js"><link rel="prefetch" href="/assets/js/14.c3ba9099.js"><link rel="prefetch" href="/assets/js/15.82239f06.js"><link rel="prefetch" href="/assets/js/16.a0eef84c.js"><link rel="prefetch" href="/assets/js/17.0f816fdf.js"><link rel="prefetch" href="/assets/js/18.173e4fd8.js"><link rel="prefetch" href="/assets/js/19.3186b2ca.js"><link rel="prefetch" href="/assets/js/20.150007db.js"><link rel="prefetch" href="/assets/js/21.1de0bbe2.js"><link rel="prefetch" href="/assets/js/22.ddbefecb.js"><link rel="prefetch" href="/assets/js/23.a874eee1.js"><link rel="prefetch" href="/assets/js/24.4586db0b.js"><link rel="prefetch" href="/assets/js/25.38f8a27b.js"><link rel="prefetch" href="/assets/js/26.27e26ce1.js"><link rel="prefetch" href="/assets/js/27.5043a5cd.js"><link rel="prefetch" href="/assets/js/28.9dbb554d.js"><link rel="prefetch" href="/assets/js/29.4b20da24.js"><link rel="prefetch" href="/assets/js/3.a632ef91.js"><link rel="prefetch" href="/assets/js/30.20a07ebc.js"><link rel="prefetch" href="/assets/js/31.c4cf7246.js"><link rel="prefetch" href="/assets/js/32.63443765.js"><link rel="prefetch" href="/assets/js/33.2c16c607.js"><link rel="prefetch" href="/assets/js/34.b08b8611.js"><link rel="prefetch" href="/assets/js/35.8e45f873.js"><link rel="prefetch" href="/assets/js/36.f685349c.js"><link rel="prefetch" href="/assets/js/37.5dc85be3.js"><link rel="prefetch" href="/assets/js/38.e65589c0.js"><link rel="prefetch" href="/assets/js/39.1986a905.js"><link rel="prefetch" href="/assets/js/4.411c2127.js"><link rel="prefetch" href="/assets/js/40.2617880f.js"><link rel="prefetch" href="/assets/js/41.adabebd6.js"><link rel="prefetch" href="/assets/js/42.c7c2bcce.js"><link rel="prefetch" href="/assets/js/43.baf76a56.js"><link rel="prefetch" href="/assets/js/44.1999012f.js"><link rel="prefetch" href="/assets/js/45.9097f945.js"><link rel="prefetch" href="/assets/js/46.c8d19090.js"><link rel="prefetch" href="/assets/js/47.968b3a2b.js"><link rel="prefetch" href="/assets/js/48.59762df4.js"><link rel="prefetch" href="/assets/js/49.15d418d4.js"><link rel="prefetch" href="/assets/js/5.5ca43862.js"><link rel="prefetch" href="/assets/js/51.b42184e3.js"><link rel="prefetch" href="/assets/js/52.be9622f1.js"><link rel="prefetch" href="/assets/js/53.682ad3c6.js"><link rel="prefetch" href="/assets/js/54.6b61d83a.js"><link rel="prefetch" href="/assets/js/55.3e721791.js"><link rel="prefetch" href="/assets/js/6.94dc47cd.js"><link rel="prefetch" href="/assets/js/7.26c2dc2d.js"><link rel="prefetch" href="/assets/js/8.e313d84e.js"><link rel="prefetch" href="/assets/js/9.840f96f5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f45bca05.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ä»å…¥é—¨åˆ°å…¥åŸ</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/goto/" class="nav-link">
  å¯¼èˆª
</a></div><div class="nav-item"><a href="https://github.com/zbsilent" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API" class="dropdown-title"><span class="title">å‰ç«¯åŸºç¡€ğŸƒ</span> <span class="arrow down"></span></button> <button type="button" aria-label="API" class="mobile-dropdown-title"><span class="title">å‰ç«¯åŸºç¡€ğŸƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-development/react/reactypescript.html" class="nav-link">
  å‰ç«¯TSä¸REACT
</a></li><li class="dropdown-item"><!----> <a href="/front-end-development/nodejs/nodejsheima.html" class="nav-link">
  NODEJSç¬”è®°
</a></li><li class="dropdown-item"><h4>
          å…¶ä»–è®°å½•
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  è·³è½¬ç™¾åº¦
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç¬”è®°æœ¬1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç¬”è®°æœ¬2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/zbsilent/studio" target="_blank" rel="noopener noreferrer" class="repo-link">
    æŸ¥çœ‹æºç 
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/goto/" class="nav-link">
  å¯¼èˆª
</a></div><div class="nav-item"><a href="https://github.com/zbsilent" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="API" class="dropdown-title"><span class="title">å‰ç«¯åŸºç¡€ğŸƒ</span> <span class="arrow down"></span></button> <button type="button" aria-label="API" class="mobile-dropdown-title"><span class="title">å‰ç«¯åŸºç¡€ğŸƒ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end-development/react/reactypescript.html" class="nav-link">
  å‰ç«¯TSä¸REACT
</a></li><li class="dropdown-item"><!----> <a href="/front-end-development/nodejs/nodejsheima.html" class="nav-link">
  NODEJSç¬”è®°
</a></li><li class="dropdown-item"><h4>
          å…¶ä»–è®°å½•
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  è·³è½¬ç™¾åº¦
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç¬”è®°æœ¬1
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://zbsilent.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ç¬”è®°æœ¬2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <a href="https://github.com/zbsilent/studio" target="_blank" rel="noopener noreferrer" class="repo-link">
    æŸ¥çœ‹æºç 
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å‰ç«¯åº”ç”¨æ•´ç†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å‰ç«¯æ¡†æ¶æ•´ç†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å¼€å‘å·¥å…·æ•´ç†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>å…¶ä»–å·¥å…·æ•´ç†</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tools-dev/md-script/md.html" class="sidebar-link">MDè¯­æ³•</a></li><li><a href="/tools-dev/mac.html" class="sidebar-link">MACå¸¸ç”¨å‘½ä»¤</a></li><li><a href="/works/idea.html" class="sidebar-link">IDEAå¼€å‘é—®é¢˜æ•´ç†</a></li><li><a href="/works/update.html" class="sidebar-link">çƒ­çˆ±å­¦ä¹ </a></li><li><a href="/works/gitlab.html" class="sidebar-link">/works/gitlab.html</a></li><li><a href="/works/IDEAä¸å®Œå…¨ä½¿ç”¨æŒ‡åŒ—.html" class="sidebar-link">/works/IDEAä¸å®Œå…¨ä½¿ç”¨æŒ‡åŒ—.html</a></li><li><a href="/works/NCCå¼‚å¸¸é—®é¢˜è®°å½•.html" class="active sidebar-link">/works/NCCå¼‚å¸¸é—®é¢˜è®°å½•.html</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/works/NCCå¼‚å¸¸é—®é¢˜è®°å½•.html#å ä½" class="sidebar-link">å ä½</a></li><li class="sidebar-sub-header"><a href="/works/NCCå¼‚å¸¸é—®é¢˜è®°å½•.html#_2-å‚ç…§" class="sidebar-link">2 å‚ç…§</a></li><li class="sidebar-sub-header"><a href="/works/NCCå¼‚å¸¸é—®é¢˜è®°å½•.html#_3-åç«¯" class="sidebar-link">3 åç«¯</a></li><li class="sidebar-sub-header"><a href="/works/NCCå¼‚å¸¸é—®é¢˜è®°å½•.html#_4-æ‰“å°" class="sidebar-link">4 æ‰“å°</a></li><li class="sidebar-sub-header"><a href="/works/NCCå¼‚å¸¸é—®é¢˜è®°å½•.html#_5-ç¯å¢ƒ" class="sidebar-link">5 ç¯å¢ƒ</a></li><li class="sidebar-sub-header"><a href="/works/NCCå¼‚å¸¸é—®é¢˜è®°å½•.html#_6-å•ç‚¹ç™»é™†" class="sidebar-link">6 å•ç‚¹ç™»é™†</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åç«¯åº”ç”¨æ•´ç†</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>[toc]</p> <h1 id="å¼‚å¸¸è§£å†³">å¼‚å¸¸è§£å†³</h1> <h2 id="å ä½">å ä½</h2> <h3 id="å ä½-2">å ä½</h3> <h4 id="å‰ç«¯">å‰ç«¯</h4> <hr> <h3 id="_1-1-uncaught-syntaxerror-invalid-regular-expression-éˆ¥æ©¾-unterminated-character-class">1.1 Uncaught SyntaxError: Invalid regular expression: /['éˆ¥æ©¾/: Unterminated character class</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=W7d1EKZcQVU&amp;fid=362980571088657&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p> <p>2005åŠä»¥åçš„ç‰ˆæœ¬VMå¯åŠ¨å‚æ•°é‡Œéœ€è¦åŠ ä¸€ä¸ª-Dfile.encoding=UTF-8ã€‚
å¦‚æœåŠ äº†è¯¥å‚æ•°ï¼Œæ£€æŸ¥å¯åŠ¨å‚æ•°é‡Œé¢æ˜¯å¦å«æœ‰ä¸­æ–‡ç©ºæ ¼ä¹‹ç±»çš„å­—ç¬¦ï¼Œå¦‚æœæœ‰ä¸­æ–‡ç©ºæ ¼æ—¶ä¹Ÿä¼šå¯¼è‡´è¯¥é—®é¢˜ã€‚ä¿®æ”¹åé‡å¯åç«¯æœåŠ¡å¹¶æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ã€‚
è§ä¸‹å›¾ã€‚</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=ZnIlqLKlSBk&amp;fid=362980571088656&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_1-2-æµè§ˆå™¨æŠ¥é”™-error-malformed-utf-8-data">1.2 æµè§ˆå™¨æŠ¥é”™ Errorï¼šMalformed UTF-8 data</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong>
(1)ç”¨homeé‡Œé¢çš„platformæ›¿æ¢å‰ç«¯å·¥ç¨‹srcé‡Œé¢çš„platformã€‚æ¸…é™¤å‰ç«¯æµè§ˆå™¨ç¼“å­˜ã€‚é‡å¯å‰ç«¯æœåŠ¡ã€‚</p> <p>(2)å¦‚æœç”¨ä¸Šé¢çš„æ–¹æ³•è¿˜æ˜¯æœ‰é—®é¢˜ï¼Œå¯ä»¥æŠŠhome\hotwebs\nccloud\WEB-INF\config\miscellaneous.xmlé…ç½®æ–‡ä»¶é‡Œçš„trueæ”¹æˆfalseï¼Œå†æ¬¡æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œé‡å¯åç«¯æœåŠ¡å†è¯•ã€‚</p> <p>(3)å°è¯•æŠŠå‰ç«¯è„šæ‰‹æ¶config\webpack.dev.config.jsé‡Œé¢çš„<code>const host = 'localhost';</code> æ”¹æˆ<code>const host = '127.0.0.1';</code></p> <p>(4)ç”¨ 127.0.0.1:åç«¯ç«¯å£/nccloud ï¼Œå¦‚æœç”¨åç«¯ç«¯å£èƒ½æ­£å¸¸ç™»é™†æ‰“å¼€èŠ‚ç‚¹åˆ™è¯´æ˜æ˜¯å‰ç«¯å·¥ç¨‹æ­å»ºæœ‰é—®é¢˜ï¼Œå¦‚æœåç«¯ç«¯å£æ‰“å¼€æŠ¥é”™è¯´æ˜åç«¯å·¥ç¨‹æ­å»ºæœ‰é—®é¢˜ã€‚</p> <p>(5)æ£€æŸ¥æµè§ˆå™¨ç‰ˆæœ¬ã€æ›´æ¢æµè§ˆå™¨</p> <h3 id="_1-3-å‰ç«¯ç•Œé¢èŠ‚ç‚¹æ‰“å¼€æŠ¥é”™-ç•Œé¢æ˜¾ç¤ºcannot-get-xxx-xxx-xxx-main-index-html">1.3 å‰ç«¯ç•Œé¢èŠ‚ç‚¹æ‰“å¼€æŠ¥é”™ï¼Œç•Œé¢æ˜¾ç¤ºCannot GET /xxx/xxx/xxx/main/index.html</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=Lrt7uX57QmM&amp;fid=362980571089176&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong></p> <p>å‰ç«¯å·¥ç¨‹config.jsoné‡Œé¢æ²¡æœ‰é…ç½®å¯¹åº”èŠ‚ç‚¹çš„è·¯å¾„ã€‚</p> <p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆªå›¾é‡Œé¢æŠ¥é”™æ˜¯&quot; Cannot GET /uapbd/mainchild/mainentity/main/index.html&quot;,é‚£æˆ‘ä»¬å°±éœ€è¦æŠŠ&quot;./src/uapbd/mainchild/mainentity/main/index.js&quot;è·¯å¾„é…ç½®åˆ°config.jsonæ–‡ä»¶çš„buildEntryPathé‡Œé¢ï¼Œå¯ä»¥ä½¿ç”¨*å·è¿›è¡ŒåŒ¹é…ã€‚</p> <p>åŒæ—¶éœ€è¦ä¿è¯å‰ç«¯å·¥ç¨‹é‡Œé¢çš„src/uapbd/mainchild/mainentity/main/index.jsæ˜¯æºç ï¼Œå¦‚æœæ˜¯ä»homeé‡Œé¢æ‹¿å‡ºæ¥çš„ç¼–è¯‘å¥½çš„ä»£ç ï¼Œåˆ™ä¸é…ç½®åœ¨config.jsoné‡Œé¢ã€‚
æ”¹å®Œconfig.jsonåéœ€è¦é‡å¯å‰ç«¯æœåŠ¡ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=7AZ9z7wjQzU&amp;fid=362980571089177&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_1-4-å‰ç«¯jsæ€ä¹ˆè·å–å½“å‰ç™»é™†ç”¨æˆ·ä¿¡æ¯ã€ä¸šåŠ¡æ—¥æœŸ">1.4 å‰ç«¯jsæ€ä¹ˆè·å–å½“å‰ç™»é™†ç”¨æˆ·ä¿¡æ¯ã€ä¸šåŠ¡æ—¥æœŸ</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>getBusinessInfo <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nc-lightapp-front'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> businessInfo <span class="token operator">=</span> <span class="token function">getBusinessInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pk_group <span class="token operator">=</span> businessInfo<span class="token punctuation">.</span>groupId<span class="token punctuation">;</span><span class="token comment">//æ‰€å±é›†å›¢</span>
<span class="token keyword">let</span> groupName <span class="token operator">=</span> businessInfo<span class="token punctuation">.</span>groupName<span class="token punctuation">;</span><span class="token comment">//æ‰€å±é›†å›¢åç§°</span>
<span class="token keyword">let</span> userCode <span class="token operator">=</span> businessInfo<span class="token punctuation">.</span>userCode<span class="token punctuation">;</span><span class="token comment">//ç™»é™†ç”¨æˆ·ç¼–ç </span>
<span class="token keyword">let</span> username <span class="token operator">=</span> businessInfo<span class="token punctuation">.</span>userName<span class="token punctuation">;</span><span class="token comment">//ç™»é™†ç”¨æˆ·å</span>
<span class="token keyword">let</span> userId <span class="token operator">=</span> businessInfo<span class="token punctuation">.</span>userId<span class="token punctuation">;</span><span class="token comment">//ç™»é™†ç”¨æˆ·ä¸»é”®</span>
<span class="token keyword">let</span> businessDate <span class="token operator">=</span> businessInfo<span class="token punctuation">.</span>businessDate<span class="token punctuation">;</span><span class="token comment">//ä¸šåŠ¡æ—¥æœŸï¼Œæ ¼å¼yyyy-MM-dd HH:mm:ss</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-5-å‰ç«¯å·¥ç¨‹æ€ä¹ˆå‡ºè¡¥ä¸-æ€ä¹ˆå‡ºå¯ä»¥åœ¨æµ‹è¯•ç¯å¢ƒè°ƒè¯•çš„å‰ç«¯è¡¥ä¸">1.5 å‰ç«¯å·¥ç¨‹æ€ä¹ˆå‡ºè¡¥ä¸ï¼Ÿæ€ä¹ˆå‡ºå¯ä»¥åœ¨æµ‹è¯•ç¯å¢ƒè°ƒè¯•çš„å‰ç«¯è¡¥ä¸ï¼Ÿ</h3> <p>æ£€æŸ¥å‰ç«¯è„šæ‰‹æ¶configä¸‹æœ‰æ²¡æœ‰patch.jså’Œpackmetadata.xmlï¼Œå¦‚æœè¯´æ˜å¯ä»¥ä½¿ç”¨npm run patchå‘½ä»¤è¿›è¡Œå‡ºè¡¥ä¸ï¼Œæ‰§è¡Œåä¼šåœ¨è„šæ‰‹æ¶æ ¹ç›®å½•å‡ºç°ä¸€ä¸ªpatchå¼€å¤´çš„å‹ç¼©æ–‡ä»¶ï¼Œç›®å½•æ— éœ€è°ƒæ•´ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=vQrId59QSsY&amp;fid=362980571089195&amp;width=1200&amp;height=800&amp;type=min" alt="1.png"></p> <p>å¦‚æœæ²¡æœ‰patch.jså’Œpackmetadata.xmlï¼Œåœ¨ç»ˆç«¯è¾“å…¥npm run buildï¼Œåœ¨è„šæ‰‹æ¶distç›®å½•ä¸‹ä¼šå‡ºç°ç¼–è¯‘å¥½çš„æ–‡ä»¶ï¼Œéœ€è¦æ‰¾åˆ°home\hotwebs\nccloud\resourcesï¼Œå°†distç”Ÿæˆçš„æ–‡ä»¶è¦†ç›–åˆ°è¯¥ç›®å½•è¦†ç›–å³å¯ã€‚</p> <p>å¦‚æœæ˜¯ç”¨npm run patchæˆ–è€…npm run testå‘½ä»¤ç”Ÿæˆçš„æ–‡ä»¶å¯ä»¥çœ‹åˆ°é™¤äº†æœ‰jsã€htmlå¤–è¿˜æœ‰js.mapæ–‡ä»¶ï¼Œå¦‚æœæœ‰.js.mapæ–‡ä»¶åˆ™åœ¨æµè§ˆå™¨é‡Œé¢æ˜¯å¯ä»¥è°ƒè¯•çš„ï¼Œä¸åœ¨æœ¬åœ°è°ƒè¯•ä¸€æ ·ï¼ˆæµè§ˆå™¨æŒ‰F12ï¼Œæ‰¾æ¥æº-&gt;mainframe-&gt;[name]-&gt;.-&gt;srcï¼‰ã€‚</p> <h3 id="_1-6-æ€ä¹ˆé€šè¿‡-js-mapæ–‡ä»¶è·å–å‰ç«¯æºç ">1.6 æ€ä¹ˆé€šè¿‡.js.mapæ–‡ä»¶è·å–å‰ç«¯æºç ï¼Ÿ</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> å¦‚æœæ‹¿åˆ°xxxx.js.mapæ–‡ä»¶å¯ä»¥é€šè¿‡reverse-sourcemapå‘½ä»¤åç¼–è¯‘å‡ºæºç æ¥çš„ã€‚æ“ä½œæ­¥éª¤ï¼š</p> <p>1ã€ä½¿ç”¨æ·˜å®é•œåƒï¼Œè¿™æ¡å‘½ä»¤æ‰§è¡Œä¸€æ¬¡å³å¯ï¼Œä¸‹æ¬¡ä¸ç”¨æ‰§è¡Œã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install -g cnpm --registry=https://registry.npm.taobao.org 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å®‰è£…reverse-sourcemapå‘½ä»¤ï¼Œæ‰§è¡Œä¸€æ¬¡å³å¯ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cnpm install --global reverse-sourcemap
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2ã€<code>reverse-sourcemap --output-dir XXX(å¯¼å‡ºè·¯å¾„) XXX.js.map( .js.mapæ–‡ä»¶å)</code></p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=taanR44S20&amp;fid=362980571089196&amp;width=1200&amp;height=800&amp;type=min" alt="2.png"></p> <h3 id="_1-7-å‰ç«¯æœåŠ¡å¯åŠ¨æŠ¥é”™error-listen-eaddrinuse-address-already-in-use-0-0-0-0-3006">1.7 å‰ç«¯æœåŠ¡å¯åŠ¨æŠ¥é”™Error: listen EADDRINUSE: address already in use 0.0.0.0:3006</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=NOr8PQQSSAQ&amp;fid=362980571089124&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> å‰ç«¯3006ç«¯å£è¢«å ç”¨ï¼Œéœ€è¦æ¢ä¸ªç«¯å£</p> <h3 id="_1-8-æ‰“å¼€èŠ‚ç‚¹ç™½å±æ§åˆ¶å°æŠ¥é”™-cannot-read-properties-of-undefined-reading-list-head">1.8 æ‰“å¼€èŠ‚ç‚¹ç™½å±æ§åˆ¶å°æŠ¥é”™ Cannot read properties of undefined (reading 'list_head')</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=D3H90mVDQWw&amp;fid=362980571088706&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•</strong></p> <p>(1) å¦‚æœæ‹¬å·é‡Œé¢çš„æ˜¯åŒºåŸŸçš„idï¼š2105åŠ2105ä»¥åç‰ˆæœ¬å¦‚æœä½¿ç”¨äº†æŸ¥è¯¢åŒºç»„ä»¶æˆ–simplTableã€cardTableã€formç»„ä»¶åˆæ²¡æœ‰ä½¿ç”¨props.useè¿›è¡Œæ³¨å†Œï¼Œå°±ä¼šæŠ¥é”™ã€‚éœ€è¦æ ¹æ®æƒ…å†µï¼Œä½¿ç”¨äº†å“ªä¸ªå°±æ³¨å†Œå“ªä¸ªç»„ä»¶ã€‚</p> <p>å…·ä½“å‚è€ƒæ–‡æ¡£ï¼š[prop.useä½¿ç”¨](javascript:void(0))
ç¤ºä¾‹ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>use<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token string">'æŸ¥è¯¢åŒºåŸŸç¼–ç '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>use<span class="token punctuation">.</span><span class="token function">form</span><span class="token punctuation">(</span><span class="token string">'è¡¨å•åŒºåŸŸç¼–ç '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>use<span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token string">'è¡¨æ ¼åŒºåŸŸ1ç¼–ç '</span><span class="token punctuation">,</span> <span class="token string">'è¡¨æ ¼åŒºåŸŸ2ç¼–ç '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>use<span class="token punctuation">.</span><span class="token function">cardTable</span><span class="token punctuation">(</span><span class="token string">'cardTableåŒºåŸŸç¼–ç '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>(2) å¦‚æœæ‹¬å·é‡Œé¢ä¸æ˜¯åŒºåŸŸç¼–ç è€Œæ˜¯ç»„ä»¶åç§°ï¼Œè¯´æ˜è¯¥ç»„ä»¶æ²¡æœ‰æ­£å¸¸å¼•è¿›æ¥ï¼Œéœ€è¦æ£€æŸ¥ä¸€ä¸‹ã€‚</p> <h3 id="_1-9-æ—¥æœŸç±»å‹æ˜¾ç¤ºinvalid-date-æˆ–è€…ä¿å­˜æŠ¥é”™invalid-date">1.9 æ—¥æœŸç±»å‹æ˜¾ç¤ºInvalid Date æˆ–è€…ä¿å­˜æŠ¥é”™Invalid Date</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> 2111ç‰ˆæœ¬å¯åŠ¨å‚æ•°éœ€è¦åŠ ä¸Š
<code>-Duser.timezone=GMT+8</code> <img src="https://nccdev.yonyou.com/shareThumbnail?shareId=rogJ9NQuTxM&amp;fid=362980571088736&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_1-10-cannot-read-property-connectmesg-of-undefined">1.10 Cannot read property 'connectMesg' of undefined</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=V0GRlQySOA&amp;fid=362980571088623&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <img src="https://nccdev.yonyou.com/shareThumbnail?shareId=F0QBnnfqSsU&amp;fid=362980571088624&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³åŠæ³•ï¼š</strong> ä»home/hotwebs/nccloud/resourcesä¸‹æ‹·è´platformåˆ°vscodeå·¥ç¨‹çš„srcä¸‹ï¼Œé‡å¯å‰ç«¯æœåŠ¡ï¼Œæ¸…é™¤æµè§ˆå™¨ç¼“å­˜ã€‚</p> <h3 id="_1-11-å¯åŠ¨å‰ç«¯æœåŠ¡æ—¶æŠ¥-invalid-configuration-object-webpack-has-been-initialised-using-a-configuration-object-that-does-not-match-the-api-schema">1.11 å¯åŠ¨å‰ç«¯æœåŠ¡æ—¶æŠ¥ï¼šInvalid configuration object. Webpack has been initialised using a configuration object that does not match the API schema.</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=gKAMd679TKU&amp;fid=362980571088625&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³åŠæ³•</strong> npm run dev å¯åŠ¨å‰ç«¯æœåŠ¡æ—¶å‡ºç°å¦‚ä¸Šå›¾çº¢æ¡†ä¸­çš„é—®é¢˜çš„è¯ï¼Œæ˜¯å› ä¸ºä½ çš„config.jsonä¸­
buildEntryPathä¸­è·¯å¾„é…ç½®çš„æœ‰é—®é¢˜é€ æˆçš„ï¼Œéœ€è¦æ£€æŸ¥è·¯å¾„æ˜¯å¦èƒ½ä¸srcä¸‹çš„è·¯å¾„åŒ¹é…ã€‚</p> <h3 id="_1-12-npm-installå¤±è´¥-æŠ¥é”™reason-connect-etimedout">1.12 npm installå¤±è´¥ï¼ŒæŠ¥é”™reason: connect ETIMEDOUT</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=wXMIe2AESAM&amp;fid=362980571089114&amp;width=1200&amp;height=800&amp;type=min" alt="8ae87295d7249768812c19c1743f2e2.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> å»ºè®®ä½¿ç”¨æ·˜å®é•œåƒï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install -g cnpm --registry=https://registry.npm.taobao.org
cnpm install
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ï¼ˆå½“ä½ æ‰§è¡Œnpm install, npmä¼šæ ¹æ®è„šæ‰‹æ¶é‡Œé¢çš„package.jsonä¸­å¯¹å„ç§ä¾èµ–çš„å®šä¹‰å»å®‰è£…è¿™äº›ä¾èµ–ï¼Œå®‰è£…ååœ¨è„šæ‰‹æ¶å¯ä»¥çœ‹åˆ°ä¼šæœ‰æ–‡ä»¶å¤¹node_modulesé‡Œé¢å°±æ˜¯ä¸‹è½½çš„å„ç§ä¾èµ–åŒ…ï¼Œè¿˜æœ‰package-lock.jsonï¼Œç”¨ä»¥è®°å½•å½“å‰çŠ¶æ€ä¸‹å®é™…å®‰è£…çš„å„ä¸ªnpm packageçš„å…·ä½“æ¥æºå’Œç‰ˆæœ¬å·ã€‚æ‰§è¡Œ<code>npm config ls -l</code> å¯ä»¥çœ‹åˆ°npmé…ç½®ï¼Œå…¶ä¸­æœ‰ä¸€æ¡<code>registry = &quot;https://registry.npmjs.org/&quot;</code>ä¹Ÿå°±æ˜¯è¯´npm installçš„æ—¶å€™æ˜¯ä»[https://registry.npmjs.org/å»å®‰è£…æˆ‘ä»¬çš„ä¾èµ–ï¼Œcnpm](javascript:void(0)) installåˆ™æ˜¯ä»å›½å†…[https://registry.npm.taobao.orgå»ä¸‹è½½å®‰è£…ã€‚å¦å¤–package.jsonæ˜¯å·²ç»é…ç½®å¥½äº†çš„ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸è¦ä¿®æ”¹ã€‚](javascript:void(0))
ï¼‰</p> <h3 id="_1-13-minified-react-error-62-é—®é¢˜-æ³¨æ„æ˜¯-62">1.13 Minified React error #62;é—®é¢˜ï¼ˆæ³¨æ„æ˜¯#62ï¼‰</h3> <p>Error: Minified React error #62; visit [https://reactjs.org/docs/error-decoder.html?invariant=62&amp;args[]=](javascript:void(0)) for the full message or use the non-minified dev environment for full errors and additional helpful warnings.</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=ZNskXwmSAU&amp;fid=362980571089366&amp;width=1200&amp;height=800&amp;type=min" alt="image.png">
ç‚¹è¶…é“¾æ¥ä¼šè¿›å…¥ä¸‹é¢çš„é¡µé¢
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=1bCEuhLTIA&amp;fid=362980571089368&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong>
ç‚¹å‡»è¶…é“¾æ¥åä¼šè¿›å…¥æŠ¥é”™åŸå› çš„ä»‹ç»é¡µé¢ï¼Œæ³¨æ„çœ‹ä¸Šé¢çš„æŠ¥é”™æç¤ºã€‚æ£€æŸ¥è‡ªå·±çš„styleæ ·å¼ï¼Œä¸‹é¢æ˜¯æ­£ç¡®çš„å’Œé”™è¯¯å†™æ³•ç¤ºä¾‹ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>æ­£ç¡®å†™æ³•ï¼š
<span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>width<span class="token operator">:</span><span class="token string">'100px'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
é”™è¯¯å†™æ³•ï¼š
<span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>width<span class="token operator">:</span><span class="token string">'100px'</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token string">'width:100px'</span><span class="token operator">&gt;</span>
ç­‰ç­‰

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_1-14-minified-react-error-130-é—®é¢˜-æ³¨æ„æ˜¯-130">1.14 Minified React error #130; é—®é¢˜ï¼ˆæ³¨æ„æ˜¯#130ï¼‰</h3> <p>react-dom.production.min.js:187 Error: Minified React error #130; visit
[https://reactjs.org/docs/error-decoder.html?invariant=130&amp;args[]=undefined&amp;args[]=](javascript:void(0)) for the full message or use the non-minified dev environment for full errors and additional helpful warnings.é—®é¢˜</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=xr8XnJnZRyg&amp;fid=362980571089347&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p> <p>æˆ‘ä»¬éœ€è¦åœ¨renderæ–¹æ³•ä¸­returnç»„ä»¶çš„åœ°æ–¹æ‰“æ–­ç‚¹ï¼Œç„¶åæ£€æŸ¥æ¯ä¸ªç»„ä»¶ï¼Œæ˜¯å¦æ˜¯å¦‚ä¸‹å›¾è¿™æ ·ï¼Œå¦‚æœæ˜¯é‚£å°±æ˜¯è¯¥ç»„ä»¶æ²¡æœ‰å¼•ç”¨åˆ°ï¼Œéœ€è¦å»æ£€æŸ¥å¯¹åº”çš„å¼•ç”¨</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=B7duyC5KRic&amp;fid=362980571089346&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>(1)å¦‚æœæ˜¯2105åŠä»¥åçš„ç‰ˆæœ¬ï¼Œéƒ¨åˆ†ç»„ä»¶çš„å¼•ç”¨æ–¹å¼å‘ç”Ÿäº†å˜åŒ–ï¼Œå‚è€ƒæ–‡æ¡£ï¼š [ç»„ä»¶å¼•ç”¨æ–¹å¼å˜åŒ–](javascript:void(0))</p> <p>æ³¨æ„ç‚¹ï¼šconfig.jsonä¿®æ”¹å®Œæˆéœ€è¦é‡å¯å‰ç«¯æœåŠ¡ã€‚æ–‡æ¡£é‡Œé¢æ‰€è¯´çš„config.jsonï¼Œæ˜¯è·Ÿä½ çš„index.jså¹³çº§çš„ï¼Œå¹¶ä¸æ˜¯æŒ‡é…ç½®é¡µé¢è·¯å¾„çš„é‚£ä¸ªconfig.jsonã€‚æœ¬åœ°å¼€å‘æ—¶éœ€è¦æ³¨æ„è¦ç”¨home\hotwebs\nccloud\resourcesä¸‹é¢çš„uapã€platformæ›¿æ¢è‡ªå·±å‰ç«¯å·¥ç¨‹é‡Œçš„uapã€platformã€‚
å‚è€ƒä¸‹é¢çš„æˆªå›¾ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=ZGRg0GHfQp4&amp;fid=362980571088885&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p><strong>æ³¨æ„ç‚¹1ï¼šå¦‚æœæ˜¯äººåŠ›çš„äº§å“ï¼Œå¼•ç”¨æ–¹å¼ç•¥æœ‰äº›ä¸åŒ</strong>ã€‚ä¸æ˜¯é…config.jsonï¼Œè€Œæ˜¯é€šè¿‡è¿™ç§æ–¹å¼å¼•å…¥:
<code>import ApproveDetail from 'src/uap/common/components/ApproveDetail'; //å®¡æ‰¹è¯¦æƒ…ï¼Œå…¶ä»–ç»„ä»¶ç±»ä¼¼ã€‚</code></p> <p>(2)å¦‚æœå‰ç«¯è°ƒè¯•æ£€æŸ¥å‘ç°æ˜¯è°ƒç”¨createSimpleTableæˆ–è€…createCardTableç­‰ç»„ä»¶æŠ¥é”™ï¼Œæœ‰æ•°æ®æ—¶æŠ¥é”™ï¼Œæ— æ•°æ®ä¸æŠ¥é”™ï¼Œè¿™ç§ä¸€èˆ¬æ˜¯modifyMetaé‡Œé¢è‡ªå®šä¹‰äº†renderæ–¹æ³•æˆ–è€…æ·»åŠ æ“ä½œåˆ—æŒ‰é’®å¯¼è‡´ï¼Œå¯ä»¥æ£€æŸ¥å¯¹åº”ä»£ç é‡Œé¢æ˜¯å¦å¼•ç”¨äº†ç‰¹æ®Šçš„ç»„ä»¶ã€‚ï¼ˆä¾‹å¦‚åˆ°è´§å•ç»´æŠ¤initTemplateé‡Œé¢æœ‰ä¸€ä¸ªå¼•å…¥çš„æ–¹å¼import BillCodeHyperLink from 'scmpub/scmpub/components/BillCodeStyle'; è¿™ç§éœ€è¦åœ¨å…¥å£index.jsé…ç½®å¯¹åº”çš„config.jsonï¼Œå¯ä»¥å‚è€ƒæ–‡æ¡£[https://nccdev.yonyou.com/article/detail/240](javascript:void(0))ã€‚ï¼‰</p> <p>(3) å¦‚æœé€šè¿‡ä¸Šè¿°æ–¹å¼æ²¡æœ‰æ‰¾åˆ°ï¼Œå¯ä»¥å¤‡ä»½ä»£ç ï¼Œé€ä¸ªåˆ é™¤renderé‡Œé¢çš„ä»£ç ï¼Œå®šä½ä»£ç ä½ç½®ï¼Œå…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚</p> <h3 id="_1-15-å¯¼å…¥å¯¼å‡ºæŠ¥é”™-typeerror-0-nclightappfront-excelimportconfig-is-not-a-function">1.15 å¯¼å…¥å¯¼å‡ºæŠ¥é”™ï¼šTypeError: (0 , _ncLightappFront.excelImportconfig) is not a function</h3> <p>å¯¼å…¥å¯¼å‡ºç»„ä»¶å¼•ä¸è¿›æ¥
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=aSagZ7dEQck&amp;fid=362980571089374&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> 2105åŠ2105ä»¥åçš„ç‰ˆæœ¬ï¼Œéƒ¨åˆ†ç»„ä»¶çš„å¼•ç”¨æ–¹å¼å‘ç”Ÿäº†å˜åŒ–ï¼Œå‚è€ƒæ–‡æ¡£ï¼š [ç»„ä»¶å¼•ç”¨æ–¹å¼å˜åŒ–](javascript:void(0))
ï¼ˆæ³¨æ„ç‚¹1ï¼šconfig.jsonä¸èŠ‚ç‚¹index.jså¹³çº§ï¼Œä¿®æ”¹è¿‡config.jsonåéœ€è¦é‡å¯å‰ç«¯æœåŠ¡ï¼Œä¸ç„¶ä¸ç”Ÿæ•ˆï¼Œå¯ä»¥å‚è€ƒä¸Šä¸ªé—®é¢˜ã€‚</p> <p>æ³¨æ„ç‚¹2ï¼šå‰ç«¯å·¥ç¨‹é‡Œé¢éœ€è¦æ‹·è´home\hotwebs\nccloud\resourcesé‡Œé¢çš„platformã€uapåˆ°srcç›®å½•ä¸‹ã€‚</p> <p>æ³¨æ„ç‚¹3ï¼šäººåŠ›äº§å“ <code>import excelImportconfig from 'src/uap/common/components/excelImportconfig'; //å¯¼å…¥ï¼Œå…¶ä»–ç»„ä»¶ç±»ä¼¼ã€‚</code>
ï¼‰</p> <h3 id="_1-16-å‰ç«¯å¯åŠ¨æŠ¥é”™-error-can-t-resolve-ssccommon-components-xxx-æˆ–è€…can-t-resolve-ssccommon-utils-xxxx">1.16 å‰ç«¯å¯åŠ¨æŠ¥é”™ Error: Can't resolve 'ssccommon/components/xxx' æˆ–è€…Can't resolve 'ssccommon/utils/xxxx'</h3> <p>æŠ¥é”™æˆªå›¾ï¼š
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=nIgnU7BESq8&amp;fid=362980571088647&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong>
config\webpack.common.jså¢åŠ é…ç½®è·¯å¾„ï¼Œ<strong>åŒæ—¶ä¸€å®šè¦æ³¨æ„å¯¹åº”è·¯å¾„é‡Œé¢æœ‰å¯¹åº”çš„æºç </strong></p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=32eNTBYQQT4&amp;fid=362980571099145&amp;width=1200&amp;height=800&amp;type=min" alt="image.png">
ï¼ˆ1ï¼‰å¦‚æœæ˜¯ermæ¨¡å—é…ç½®å¦‚ä¸‹ ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>alias<span class="token operator">:</span><span class="token punctuation">{</span>
	src<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;../src/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token comment">//è·¯å¾„src/erm/sscrppublic/commonä¸‹éœ€è¦æœ‰å¯¹åº”æºç </span>
	ssccommon <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;../src/erm/sscrppublic/common/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token comment">//ä¸‹é¢è¿™ä¸€æ¡æ ¹æ®ç‰ˆæœ¬è‡ªè¡Œè°ƒæ•´ï¼Œsrc/sscrp/public/common/platformcomponentséœ€è¦æœ‰å¯¹åº”æºç </span>
	sscplatformcomponents <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src/sscrp/public/common/platformcomponents/V2111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	base<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">&quot;../src/common/less/base&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	widgetsless<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span> __dirname<span class="token punctuation">,</span><span class="token string">&quot;../src/sscrp/public/common/less/widgets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	uapbd<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span> __dirname<span class="token punctuation">,</span><span class="token string">&quot;../src/uapbd&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ï¼ˆ2ï¼‰å¦‚æœæ˜¯å…±äº«çš„æ¨¡å— sscrpé…ç½®ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>alias<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">//è·¯å¾„src/sscrp/public/common/ä¸‹éœ€è¦æœ‰ä»£ç </span>
        ssccommon<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/sscrp/public/common/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token comment">//ä¸‹é¢è¿™ä¸€æ¡æ ¹æ®ç‰ˆæœ¬è‡ªè¡Œè°ƒæ•´ï¼Œsrc/sscrp/public/common/platformcomponentséœ€è¦æœ‰å¯¹åº”æºç </span>
	sscplatformcomponents <span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;../src/sscrp/public/common/platformcomponents/V2111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        base<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/common/less/base'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        widgetsless<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/sscrp/public/common/less/widgets'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        uapbd<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/uapbd'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        src<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_1-17-å‰ç«¯æœåŠ¡å¯åŠ¨æŠ¥é”™-module-not-found-error-can-t-resolve-epmp-in-xxx-xxx-xxx">1.17 å‰ç«¯æœåŠ¡å¯åŠ¨æŠ¥é”™ï¼šModule not found: Error: Can't resolve 'epmp' in xxx\xxx\xxx</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=2BgMEXRx0&amp;fid=362980571089125&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong></p> <p>é¢„ç®—é¢†åŸŸå°è£…äº†ä¸€äº›å…¬å…±çš„ç»„ä»¶ã€æ–¹æ³•ã€‚è¿™äº›ç»„ä»¶æ–¹æ³•åœ¨epmp\output\config\com\index.jsè¿›è¡Œæ•´ä½“çš„å¼•å…¥å’Œå¯¼å‡ºæ“ä½œã€‚
åœ¨éœ€è¦ç¼–è¯‘çš„èŠ‚ç‚¹ï¼Œä¸index.jså¹³çº§åŠ ä¸ªconfig.jsonã€‚æ–‡ä»¶å†…å®¹å¦‚ä¸‹</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;dependModuleName&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;epmp&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;dependjs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;../../../../epmp/index.js&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>æˆªå›¾ç¤ºä¾‹ï¼š
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=sTyNEWGFRI&amp;fid=362980571089126&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_1-18-å‰ç«¯å¯åŠ¨æŠ¥é”™-module-not-found-error-can-t-resolve-uap-common-components-ncuploader-in-xxxxx">1.18 å‰ç«¯å¯åŠ¨æŠ¥é”™ï¼šModule not found: Error: Can't resolve 'uap/common/components/NCUploader' in xxxxx</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=8jfgmoEmStk&amp;fid=362980571089127&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> (1) ä»2105ç‰ˆæœ¬å¼€å§‹ï¼Œéƒ¨åˆ†å¹³å°çš„ç»„ä»¶å¼•ç”¨æ–¹å¼å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¸ªè·Ÿä¸Šä¸ªé—®é¢˜â€™epmpâ€™æ‰¾ä¸åˆ°çš„é—®é¢˜åŸºæœ¬ç±»ä¼¼ã€‚</p> <p>éœ€è¦æŠŠè‡ªå·±èŠ‚ç‚¹ä¾èµ–çš„ç»„ä»¶é…ç½®åœ¨config.jsoné‡Œé¢ï¼ŒåŒæ—¶éœ€è¦ç¡®ä¿å‰ç«¯å·¥ç¨‹é‡Œé¢å¤åˆ¶äº†home\hotwebs\nccloud\resourcesé‡Œé¢çš„uapæ¨¡å—ä»¥ä¾¿èƒ½æ‰¾åˆ°å¯¹åº”ç»„ä»¶ã€‚å‚è€ƒæ–‡æ¡£ï¼š[å„é¢†åŸŸç»„ä»¶é€‚é…](javascript:void(0))ã€‚å¼•ç”¨æ–¹å¼å¦‚ä¸‹é¢æˆªå›¾æ‰€ç¤ºã€‚é…ç½®å®Œåéœ€è¦é‡å¯å‰ç«¯æœåŠ¡ã€‚</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=8h5wPJYGSnI&amp;fid=362980571089128&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>(2) é…ç½®ç¼–è¯‘è·¯å¾„çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸€ä¸‹éœ€è¦å“ªä¸ªèŠ‚ç‚¹ç¼–è¯‘å“ªä¸ªï¼Œç»å¸¸ä¼šæœ‰åŒå­¦buildEntryPathé…ç½®æˆ<code>&quot;./src/æ¨¡å—ç¼–ç /*/*/*/index.js&quot;</code>è¿™æ ·ä¼šå¯¼è‡´æœ‰äº›ä¸éœ€è¦çš„ä¹Ÿç¼–è¯‘è¿›å»ï¼Œä¸€èˆ¬buildEntryPathåªé…ç½®ç¼–è¯‘å…¥å£æ–‡ä»¶ã€‚ä¸¾ä¸ªä¾‹å­æ‰“å¼€ã€è¯·è´­å•ç»´æŠ¤ã€‘èŠ‚ç‚¹ï¼Œå³é”®æ£€æŸ¥-&gt;å…ƒç´ æ‰¾åˆ°main_iframeçš„src=&quot;/pu/pu/buyingreq/main/index.html#/list&quot;ä»è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºå®ƒå¯¹åº”çš„ç¼–è¯‘å…¥å£æ–‡ä»¶ã€‚å³buildEntryPathåº”è¯¥é…ç½®æˆ<code>&quot;./src/pu/pu/buyingreq/main/index.js&quot;</code>ã€‚</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=A8j7t4KR4E&amp;fid=362980571104519&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p><strong>é”™è¯¯ç¤ºä¾‹ï¼š</strong> å¦‚æœbuildEntryPathé…ç½®æˆ<code>&quot;./src/pu/pu/*/*/index.js&quot;</code>ï¼Œå°±ä¼šå¯¼è‡´æŠŠlisté¡µé¢è·¯å¾„çš„ä¹Ÿä½œä¸ºç¼–è¯‘å…¥å£å¯¼è‡´æ‰¾ä¸åˆ°ç»„ä»¶ã€‚å…·ä½“å‚è€ƒä¸‹é¢æˆªå›¾ç¤ºä¾‹ã€‚</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=c8m1NYnZSIA&amp;fid=362980571104520&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_1-19-å‰ç«¯å¯åŠ¨æŠ¥é”™-module-not-found-error-can-t-resolve-fs-in-xxxxxxx">1.19 å‰ç«¯å¯åŠ¨æŠ¥é”™ï¼šModule not found: Error: Can't resolve 'fs' in 'xxxxxxx'</h3> <p>Module not found: Error: Can't resolve 'fs' in 'C:\Users\Administrator\Desktop\cs\node_modules\webpack\node_modules\schema-utils\src'
@ (webpack)/node_modules/schema-utils/src/validateOptions.js 8:11-24
@ (webpack)/node_modules/schema-utils/src/index.js
@ (webpack)/lib/IgnorePlugin.js
@ (webpack)/lib/webpack.js
@ ./src/cdmc/cdm/financepay/card/events/buttonClick.js
@ ./src/cdmc/cdm/financepay/card/events/index.js
@ ./src/cdmc/cdm/financepay/card/index.js
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=dhrMcVtRmY&amp;fid=362980571089275&amp;width=1200&amp;height=800&amp;type=min" alt="657e21d8d129d64f054cfb49028f623.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> webpackè‡ªåŠ¨åœ¨å¤´éƒ¨å¼•å…¥äº†<code>import { debug } from &quot;webpack&quot;;</code></p> <p>æ‰¾åˆ°è‡ªå·±çš„jsæ–‡ä»¶ï¼Œå¦‚æœé‡Œé¢æœ‰è¿™è¡Œä»£ç ï¼Œåˆ é™¤é‡æ–°ç¼–è¯‘å³å¯ã€‚</p> <h3 id="_1-20-å‰ç«¯å¯åŠ¨æŠ¥é”™-use-strict-unrecognised-input-æˆ–è€…æŠ¥é”™-import-base">1.20 å‰ç«¯å¯åŠ¨æŠ¥é”™ï¼šuse strict Unrecognised input æˆ–è€…æŠ¥é”™@import &quot;~base&quot;;</h3> <p>æŠ¥é”™æˆªå›¾ï¼š</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=nkB48bmgT3c&amp;fid=362980571100204&amp;width=1200&amp;height=800&amp;type=min" alt="d5168c2b723e56d29458bce7ef9a42b.png"></p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=qqW0GGgBTFw&amp;fid=362980571099146&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong>
åŸå› æ˜¯å°‘æ ·å¼æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=kr1LgVILSso&amp;fid=362980571099151&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>åŒæ—¶éœ€è¦ä¿®æ”¹è„šæ‰‹æ¶é…ç½®ï¼Œå¯ä»¥å‚è€ƒé—®é¢˜ â€œ1.16 å‰ç«¯å¯åŠ¨æŠ¥é”™ Error: Can't resolve 'ssccommon/components/xxx' â€ æ·»åŠ <code>base: path.resolve(__dirname, '../src/common/less/base'),</code></p> <p>æ ·å¼æ–‡ä»¶ä¸‹è½½åœ°å€ï¼š[https://pan.yonyou.com/s/OiIs9vTjQhE](javascript:void(0))</p> <h3 id="_1-21-ncc2105-é€‚é…äº†é™„ä»¶-é™„ä»¶ç®¡ç†æ‰“å¼€åæ˜¯ç©ºç™½-åªæ˜¾ç¤ºå•æ®å·xxxx">1.21 NCC2105 é€‚é…äº†é™„ä»¶ï¼Œé™„ä»¶ç®¡ç†æ‰“å¼€åæ˜¯ç©ºç™½ï¼Œåªæ˜¾ç¤ºå•æ®å·xxxx</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=JRZuO0oT28&amp;fid=362980571088649&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> NCC2105ç‰ˆæœ¬ä¸ºäº†é€‚é…æŒ‰é’®æƒé™ï¼Œé™„ä»¶å¼¹æ¡†ä¸Šé¢çš„æŒ‰é’®ä¹Ÿéœ€è¦æ³¨å†Œã€‚è¿™ç§æ˜¯å› ä¸ºæ²¡æœ‰æ³¨å†Œé™„ä»¶çš„æŒ‰é’®å¯¼è‡´ã€‚åˆ°åº”ç”¨æ³¨å†Œ-&gt;æ‰¾åˆ°å¯¹åº”é¡µé¢-&gt;æŒ‰é’®æ³¨å†Œç•Œé¢å³ä¸Šè§’æœ‰ä¸ªé™„ä»¶æŒ‰é’®æ³¨å†Œç‚¹ä¸€ä¸‹ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=qrjLDzhFT0c&amp;fid=362980571088650&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_1-22-ncc2105-æ‰©å±•å¼€å‘ä¸ç”Ÿæ•ˆ-ä¸åŠ è½½æ‰©å±•å¼€å‘çš„js">1.22 NCC2105 æ‰©å±•å¼€å‘ä¸ç”Ÿæ•ˆï¼Œä¸åŠ è½½æ‰©å±•å¼€å‘çš„js</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong>
2105åŠä»¥åçš„ç‰ˆæœ¬æ‰©å±•å¼€å‘åº”ç”¨æ³¨å†Œéœ€è¦é…ç½®å‚æ•°ã€‚æ‰“å¼€åº”ç”¨æ³¨å†Œï¼Œæ‰¾åˆ°éœ€è¦æ‰©å±•å¼€å‘çš„å°åº”ç”¨ï¼Œæ·»åŠ å‚æ•°ï¼šå‚æ•°åï¼šsec_develop å‚æ•°å€¼: Y
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=4XdXcx3uStY&amp;fid=362980571088894&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_1-23-å®¡æ‰¹ä¸­å¿ƒæŠ¥-æ²¡æœ‰åº”ç”¨æƒé™æˆ–é…ç½®é”™è¯¯-è¯·è”ç³»ç®¡ç†å‘˜">1.23 å®¡æ‰¹ä¸­å¿ƒæŠ¥â€œæ²¡æœ‰åº”ç”¨æƒé™æˆ–é…ç½®é”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜â€</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=UC2cMRStRmk&amp;fid=362980571088653&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> (1)æ£€æŸ¥å¯¹åº”çš„å®¡æ‰¹è”æŸ¥èŠ‚ç‚¹æƒé™,æ£€æŸ¥å®¡æ‰¹é¡µé¢æ˜¯å¦æœ‰æƒé™ ï¼Œå¦‚æœæ²¡æœ‰åˆ†é…æƒé™åˆ™éœ€è¦åˆ°èŒè´£-é›†å›¢å»åˆ†é…ã€‚</p> <p>(2)æ£€æŸ¥æ˜¯å¦å¤šæ¬¡ç”ŸæˆèŠ‚ç‚¹,å­˜åœ¨å†—ä½™è„šæœ¬ å®¡æ‰¹åº”ç”¨æ³¨å†ŒèŠ‚ç‚¹</p> <p>(3)æ˜¯å¦è®¾ç½®äº†é»˜è®¤é¡µé¢
Select * from sm_apppage where dr = 0 and parentcode = 'å®¡æ‰¹è”æŸ¥åº”ç”¨ç¼–ç ' and isdefault = 'Y'
Select * from sm_appparam where dr = 0 and parentid = (select pk_appregister from sm_appregister where code = 'å®¡æ‰¹è”æŸ¥åº”ç”¨ç¼–ç ') and paramname = 'transtype'</p> <h3 id="_1-24-æ‰“å¼€èŠ‚ç‚¹æç¤º-unexpected-eof-in-prolog-at-row-col-unknown-source-1-0">1.24 æ‰“å¼€èŠ‚ç‚¹æç¤º Unexpected EOF in prolog at [row,col {unknown-source}]: [1,0]</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=0ZTaKAKTH4&amp;fid=362980571089129&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong>
ï¼ˆ1ï¼‰å¯¼å…¥å¯¼å‡ºéœ€è¦ä¸€ä¸ªxmlé…ç½®æ–‡ä»¶ï¼Œæ”¾åœ¨æ–‡ä»¶å¤¹home\resources\excel\billdefine\å¯¹åº”çš„æ¨¡å—\excelå¯¼å…¥å¯¼å‡ºç±»å‹å.xmlã€‚ä»¥ç‰©æ–™-ä¸šåŠ¡å•å…ƒä¸ºä¾‹ï¼Œåœ¨excel_billprocessè¡¨é‡Œæ³¨å†Œçš„billtypeå€¼ä¸ºMATERIAL_ORGï¼Œåˆ™å¯¹åº”çš„xmlè·¯å¾„ä¸ºhome\resources\excel\billdefine\uapbd\material_org.xmlã€‚å‰ç«¯jsè¿›è¡Œé€‚é…çš„æ—¶å€™è°ƒç”¨excelImportconfigã€ExcelOutputä¼ å…¥çš„billtypeä¹Ÿæ˜¯material_orgï¼Œå­—æ¯å¤§å°å†™æ²¡æœ‰å…³ç³»ã€‚</p> <p>ï¼ˆ2ï¼‰å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œæ£€æŸ¥æ–‡ä»¶æ ¼å¼ã€å†…å®¹æ˜¯å¦ç¬¦åˆxmlæ ¼å¼è¦æ±‚ã€‚</p> <h3 id="_1-25-æ‰“å¼€èŠ‚ç‚¹æç¤º-æ ¹æ®å½“å‰æ¨¡æ¿ä¸»é”®æ— æ³•å®šä½æ¨¡æ¿-è¯·å°è¯•æ¸…é™¤ç¼“å­˜åé‡è¯•-æˆ–è€…æç¤º-01501001-0281">1.25 æ‰“å¼€èŠ‚ç‚¹æç¤ºâ€œæ ¹æ®å½“å‰æ¨¡æ¿ä¸»é”®æ— æ³•å®šä½æ¨¡æ¿ï¼Œè¯·å°è¯•æ¸…é™¤ç¼“å­˜åé‡è¯•ï¼â€æˆ–è€…æç¤ºâ€œ01501001-0281â€</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=a9U99xBZTuo&amp;fid=362980571090515&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong>
ä¸€èˆ¬åŸå› æ˜¯åœ¨ã€æ¨¡æ¿è®¾ç½®-é›†å›¢ã€‘æˆ–è€…ã€æ¨¡æ¿è®¾ç½®-ä¸šåŠ¡å•å…ƒã€‘å¤åˆ¶äº†æ¨¡æ¿å¹¶ä¸”åˆ†é…äº†æ¨¡æ¿ååˆé‡æ–°ç”Ÿæˆäº†èŠ‚ç‚¹ï¼Œå¯¼è‡´æ‰¾ä¸åˆ°åŸæ¥çš„æ¨¡æ¿ã€‚è§£å†³æ–¹æ³•æ˜¯å½•åˆ¶spræ—¥å¿—æœç´¢â€œPUB_TEMPLATE_ASSIGNMENTâ€ æŠŠå¯¹åº”æ•°æ®åˆ é™¤æ‰ã€‚</p> <p>æŸ¥è¯¢sqlï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> PUB_TEMPLATE_ASSIGNMENT <span class="token keyword">where</span>  app_code <span class="token operator">=</span> <span class="token string">'åº”ç”¨ç¼–ç '</span> <span class="token operator">and</span> page_code <span class="token operator">=</span> <span class="token string">'é¡µé¢ç¼–ç '</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=rEJM8c3vSXQ&amp;fid=362980571090516&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_1-26-npm-installæç¤ºac-ep-utils-not-found">1.26 npm installæç¤ºac-ep-utils not found</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=mFEl1D9MQwQ&amp;fid=362980571099872&amp;width=1200&amp;height=800&amp;type=min" alt="1876c82fd099a9645f8249adf1a965b.png"></p> <p><strong>è§£å†³æ–¹æ³•</strong> ï¼š ï¼ˆ1ï¼‰å»ºè®®æŠŠpackage.jsoné‡Œé¢çš„ac-ep-utilsåˆ é™¤æ‰ã€‚ç„¶åé‡æ–°npm installã€‚</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=tFnU1oX7Sx0&amp;fid=362980571099873&amp;width=1200&amp;height=800&amp;type=min" alt="b1ac94c90f492c45f58fbd4666e502a.png"></p> <p>ï¼ˆ2ï¼‰ å‚è€ƒæ–‡æ¡£ï¼š[https://nccdev.yonyou.com/article/detail/806](javascript:void(0))</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm i ynpm-tool -g 
 
ynpm i
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_1-27-è¯¥å•æ®æ— å°åº”ç”¨xxxxçš„æ•°æ®æƒé™æˆ–ç»„ç»‡æƒé™-è¯·åˆ·æ–°åé‡è¯•">1.27 è¯¥å•æ®æ— å°åº”ç”¨xxxxçš„æ•°æ®æƒé™æˆ–ç»„ç»‡æƒé™,è¯·åˆ·æ–°åé‡è¯•</h3> <p>æŠ¥é”™æˆªå›¾å¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=rhiVlp2S3A&amp;fid=362980571104336&amp;width=1200&amp;height=800&amp;type=min" alt="728407c89da53ff31527cbdbde37bba.png"></p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> ï¼ˆ1ï¼‰æ£€æŸ¥æ˜¯å¦æœ‰è¯¥åº”ç”¨çš„æƒé™ï¼Œæ¢å¦å¤–ä¸€ä¸ªç”¨æˆ·ç™»å½•ï¼Œåˆ°ã€èŒè´£-é›†å›¢ã€‘èŠ‚ç‚¹åˆ†é…ä¸€ä¸‹æƒé™ã€‚</p> <p>ï¼ˆ2ï¼‰å¦å¤–æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªé”™è¯¯æ˜¯åº”ç”¨æ³¨å†Œçš„ç»„ç»‡ç±»å‹é”™è¯¯ã€‚ä¾‹å¦‚ä¸‹é¢æˆªå›¾æ˜¯ä¸ª<strong>é”™è¯¯ä¾‹å­</strong> ç»„ç»‡ç±»å‹é€‰æ‹©äº†â€œå…¨å±€â€ä½†æ˜¯å…ƒæ•°æ®ä¸Šæ˜¯â€œä¸šåŠ¡å•å…ƒâ€è¿™ç§ä¹Ÿä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=RZjZMQ6kSw&amp;fid=362980571104337&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>ï¼ˆ3ï¼‰é…ç½®äº†æ•°æ®æƒé™ï¼Œå¯ä»¥åˆ°ã€æ•°æ®æƒé™ã€‘èŠ‚ç‚¹æ£€æŸ¥é…ç½®æƒ…å†µï¼Œæˆ–è€…æ–°åšä¸€ä¸ªæ•°æ®æˆ–è€…æ¢å…¶ä»–æ•°æ®æ£€æŸ¥èƒ½å¦è”æŸ¥è¿‡å»ã€‚</p> <h3 id="_1-28-å‰ç«¯npm-installæ—¶æŠ¥é”™æç¤ºnpm-err-code-eintegrity">1.28 å‰ç«¯npm installæ—¶æŠ¥é”™æç¤ºnpm ERR! code EINTEGRITY</h3> <p>æŠ¥é”™å†…å®¹ç¤ºä¾‹å¦‚ä¸‹ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm ERR! code EINTEGRITY
npm ERR! Verification failed while extracting rxjs@6.6.7:
npm ERR! Verification failed while extracting rxjs@6.6.7:
npm ERR! sha1-hqs431zx8LGU9WZQc+nLhznherw= integrity checksum failed when using sha1: wanted sha1-hqs431zx8LGU9WZQc+nLhznherw= but got sha512-hTdwr+7yYNIT5n4AMYp85KA6yw2Va0FLa3Rguvbpa4W3I5xynaBZo41cM3XM+4Q6fRMj3sBYIR1VAmZMXYJvRQ== sha1-kKwBisq/SRv2UEQjXVhjxNq4BMk=. (754116 bytes)
 
npm ERR! A complete log of this run can be found in:
npm ERR!     D:\Nodejs\node_cache\_logs\2023-07-05T03_08_12_453Z-debug.log
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=W816lBu7SPw&amp;fid=362980571106423&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> è„šæ‰‹æ¶æ–‡ä»¶é‡Œé¢é‡Œé¢æœ‰ä¸ªpackage-lock.jsonï¼ŒæŠŠæ–‡ä»¶åˆ é™¤ï¼Œç„¶åé‡æ–°æ‰§è¡Œnpm installå³å¯ã€‚</p> <h2 id="_2-å‚ç…§">2 å‚ç…§</h2> <h3 id="_2-1-å¦‚ä½•å¯¹å‚ç…§è¿›è¡Œè¿‡æ»¤ã€‚">2.1 å¦‚ä½•å¯¹å‚ç…§è¿›è¡Œè¿‡æ»¤ã€‚</h3> <p>å‚ç…§è¿‡æ»¤çš„ä½ç½®å¯ä»¥å†™åœ¨initTemplateé‡Œé¢ä¹Ÿå¯ä»¥å†™åœ¨ç¼–è¾‘å‰æˆ–ç¼–è¾‘åäº‹ä»¶ï¼Œæ€»ä¹‹æ ¹æ®éœ€è¦ç¡®å®šå‚ç…§è¿‡æ»¤çš„ä½ç½®ã€‚</p> <p>1ã€ä»¥éƒ¨é—¨å‚ç…§ä¸ºä¾‹ï¼Œæ ¹æ®é€‰æ‹©çš„ç»„ç»‡å¯¹éƒ¨é—¨è¿›è¡Œè¿‡æ»¤ã€‚
å‰ç«¯ä»£ç ï¼ˆå¯ä»¥å†™åœ¨ç¼–è¾‘å‰äº‹ä»¶ï¼‰ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> meta <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">getMeta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è·å–æ¨¡æ¿meta</span>
meta<span class="token punctuation">[</span><span class="token string">&quot;åŒºåŸŸç¼–ç &quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>attrcode<span class="token operator">==</span><span class="token string">&quot;pk_dept&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//pk_deptæ˜¯éƒ¨é—¨å­—æ®µç¼–ç </span>
        item<span class="token punctuation">.</span><span class="token function-variable function">queryCondition</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
           <span class="token keyword">return</span><span class="token punctuation">{</span>
               pk_group<span class="token operator">:</span>pk_group<span class="token punctuation">,</span><span class="token comment">//é›†å›¢ä¸»é”®pk_group</span>
               pk_org<span class="token operator">:</span>pk_org<span class="token comment">//ç»„ç»‡ä¸»é”®pk_org</span>
           <span class="token punctuation">}</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span><span class="token comment">//item. queryCondition</span>
  	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">setMeta</span><span class="token punctuation">(</span>meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è¿™æ ·æ‰“å¼€å‚ç…§æŸ¥è¯¢æ—¶ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚çš„queryConditionå‚æ•°é‡Œé¢æœ‰pk_groupåŠpk_orgçš„å€¼ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=N0wKVydmSFA&amp;fid=362980571089180&amp;width=1200&amp;height=800&amp;type=min" alt="image.png">
è¿™æ ·åå°å‚ç…§ç±»é‡Œé¢å°±å¯ä»¥å–åˆ°å‰ç«¯ä¼ è¿‡æ¥çš„å‚æ•°å€¼ï¼Œåœ¨getExtraSqlåŠgetExtraSqlParameteræŠŠæŸ¥è¯¢çš„sqlæ‹¼è¿›å»ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=yLgtRJX0T8M&amp;fid=362980571089181&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>2ã€ä½¿ç”¨è¿‡æ»¤ç±»ï¼šæœ‰æ—¶å€™å…‰æœ‰ä¸Šé¢çš„å‚ç…§è¿‡æ»¤å¯èƒ½è¿˜ä¸å¤Ÿçµæ´»ï¼Œæ¯”å¦‚ä¸Šé¢å…è®¸æˆ‘ä»¬ç”¨é›†å›¢ã€ç»„ç»‡è¿›è¡Œè¿‡æ»¤ï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™æˆ‘ä»¬å¯èƒ½åªæƒ³æ˜¾ç¤ºç¼–ç ä¸º0001çš„éƒ¨é—¨ã€‚ä¸å¯èƒ½åšå‚ç…§å¼€å‘çš„æ—¶å€™æŠŠæ‰€æœ‰åœºæ™¯éƒ½è€ƒè™‘åˆ°ï¼Œæ‰€ä»¥ä¸ºäº†èƒ½å¤Ÿåšåˆ°çµæ´»åº”å˜å°±ç”¨åˆ°å‚ç…§çš„è¿‡æ»¤ç±»ã€‚è¿™é‡Œè¿˜æ˜¯ä»¥éƒ¨é—¨å‚ç…§ä¸ºä¾‹ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> meta <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">getMeta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>attrcode<span class="token operator">==</span><span class="token string">&quot;pk_dept&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       item<span class="token punctuation">.</span><span class="token function-variable function">queryCondition</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
       	<span class="token keyword">return</span><span class="token punctuation">{</span>
          pk_group<span class="token operator">:</span>pk_group<span class="token punctuation">,</span>
          pk_org<span class="token operator">:</span>pk_org<span class="token punctuation">,</span>
          code<span class="token operator">:</span><span class="token string">&quot;0001&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">//æ ‘å‹å‚ç…§ç”¨TreeRefActionExt</span>
          <span class="token comment">//è¡¨å‹å‚ç…§ç”¨GridRefActionExt</span>
          TreeRefActionExt<span class="token operator">:</span><span class="token string">&quot;nccloud.web.uapbd.ref.DeptCodeFilter&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span> 
       <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">setMeta</span><span class="token punctuation">(</span>meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>åç«¯ï¼šnccloud.web.uapbd.ref.DeptCodeFilterè¯¥ç±»åº”è¯¥æ”¾åˆ°NCC clientä¸‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">nccloud<span class="token punctuation">.</span>web<span class="token punctuation">.</span>uapbd<span class="token punctuation">.</span>ref</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">nccloud<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>processor<span class="token punctuation">.</span></span><span class="token class-name">IRefSqlBuilder</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">nccloud<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>processor<span class="token punctuation">.</span>refgrid<span class="token punctuation">.</span></span><span class="token class-name">RefQueryInfo</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">nccloud<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>ui<span class="token punctuation">.</span>meta<span class="token punctuation">.</span></span><span class="token class-name">RefMeta</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">nccloud<span class="token punctuation">.</span>pubitf<span class="token punctuation">.</span>platform<span class="token punctuation">.</span>db<span class="token punctuation">.</span></span><span class="token class-name">SqlParameterCollection</span><span class="token punctuation">;</span>
<span class="token comment">/*
 * dept
 * @author duchsh
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DeptCodeFilter</span> <span class="token keyword">implements</span> <span class="token class-name">IRefSqlBuilder</span>  <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getExtraSql</span><span class="token punctuation">(</span><span class="token class-name">RefQueryInfo</span> para<span class="token punctuation">,</span> <span class="token class-name">RefMeta</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot; and code=? &quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">SqlParameterCollection</span> <span class="token function">getExtraSqlParameter</span><span class="token punctuation">(</span><span class="token class-name">RefQueryInfo</span> queryInfo<span class="token punctuation">,</span> <span class="token class-name">RefMeta</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">String</span> code <span class="token operator">=</span> queryInfo<span class="token punctuation">.</span><span class="token function">getQueryCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">SqlParameterCollection</span> ret <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlParameterCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		ret<span class="token punctuation">.</span><span class="token function">addChar</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> ret<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getOrderSql</span><span class="token punctuation">(</span><span class="token class-name">RefQueryInfo</span> para<span class="token punctuation">,</span> <span class="token class-name">RefMeta</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>ç•Œé¢æ•ˆæœï¼š
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=JQPUhsvURPA&amp;fid=362980571089182&amp;width=1200&amp;height=800&amp;type=min" alt="image.png">
éƒ¨é—¨å‚ç…§æ˜¯æ ‘å½¢ç»“æ„ï¼ŒqueryConditionè¿”å›æ—¶æ˜¯TreeRefActionExtï¼Œå¦‚æœæ˜¯è¡¨å‹å‚ç…§è¿”å›æ—¶å°±æ˜¯{GridRefActionExt: &quot;classç±»å…¨è·¯å¾„&quot;}ï¼Œå¦‚æœæœ‰å¤šä¸ªè¿‡æ»¤ç±»æ—¶å¯ä»¥ä½¿ç”¨é€—å·è¿›è¡Œåˆ†å‰²ã€‚</p> <p>3ã€å·¦æ ‘å³è¡¨çš„å‚ç…§è¿‡æ»¤ï¼š</p> <p>ä»¥ç‰©æ–™ä¸ºä¾‹ï¼Œæ‰¾åˆ°ç‰©æ–™å‚ç…§çš„jså¯ä»¥çœ‹åˆ°å®ƒæœ‰ä¸¤ä¸ªè¯·æ±‚urlï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯queryTreeUrlå³å·¦æ ‘çš„ç‰©æ–™åˆ†ç±»ï¼Œä¸€ä¸ªæ˜¯queryGridUrlå³å³è¡¨çš„ç‰©æ–™ã€‚</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=N9k2v0kwRN8&amp;fid=362980571089183&amp;width=1200&amp;height=800&amp;type=min" alt="image.png">
æ‰€ä»¥å·¦æ ‘å³è¡¨çš„å‚ç…§ä¼šæœ‰ä¸¤ä¸ªåå°çš„ç±»MaterialClassTreeRefå’ŒMaterialGridRefï¼Œå³è¡¨å¯¹ç‰©æ–™åˆ†ç±»çš„è¿‡æ»¤ä¹Ÿæ˜¯é€šè¿‡getExtraSqlå®Œæˆçš„ï¼Œæ„Ÿå…´è¶£çš„ä¸å¦¨å»çœ‹ä¸€ä¸‹ã€‚æ‰€ä»¥å¦‚æœå‚ç…§ç±»é‡Œé¢getExtraSqlä¸èƒ½æ»¡è¶³æˆ‘ä»¬è¿‡æ»¤éœ€è¦æ—¶ï¼Œä¹Ÿå¯ä»¥ç”¨å‚ç…§è¿‡æ»¤ç±»ï¼Œå·¦æ ‘è¿‡æ»¤å°±æ˜¯{TreeRefActionExt: &quot;ç±»å…¨è·¯å¾„&quot;}ï¼Œå³è¡¨è¿‡æ»¤å°±æ˜¯{GridRefActionExt: &quot;ç±»å…¨è·¯å¾„&quot;}ï¼Œä¸¤ä¸ªéƒ½éœ€è¦åˆ™ä¸¤ä¸ªéƒ½å†™ã€‚</p> <p>4ã€å‚ç…§ä½¿ç”¨ReferLoaderåŠè¿‡æ»¤æ–¹æ³•</p> <p>ä»¥éƒ¨é—¨å‚ç…§ä¸ºä¾‹ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> high <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nc-lightapp-front'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Refer<span class="token operator">:</span><span class="token punctuation">{</span>ReferLoader<span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> high<span class="token punctuation">;</span><span class="token comment">//å¼•å…¥ReferLoader</span>
<span class="token operator">&lt;</span>ReferLoader
	placeholder<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;éƒ¨é—¨&quot;</span><span class="token punctuation">}</span> 
	value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>pk_dept<span class="token punctuation">}</span>
	disabled<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
	required<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
	queryCondition<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//å‚ç…§è¿‡æ»¤</span>
		<span class="token keyword">return</span> <span class="token punctuation">{</span>
			pk_group<span class="token operator">:</span>pk_group<span class="token punctuation">,</span>
			pk_org<span class="token operator">:</span>pk_org 
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">}</span>
	onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//å€¼æ”¹å˜å¤„ç†</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			pk_dept<span class="token operator">:</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> value<span class="token punctuation">.</span>refpk<span class="token punctuation">,</span> display<span class="token operator">:</span> value<span class="token punctuation">.</span>refname <span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">}</span>
	refcode<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;uapbd/refer/org/DeptAllDataTreeRef/index&quot;</span><span class="token punctuation">}</span><span class="token comment">//å‰ç«¯éƒ¨é—¨å‚ç…§çš„è·¯å¾„ï¼Œæ³¨æ„æ²¡æœ‰.js</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>5ã€å¯ç”¨æ•°æ®æƒé™ã€ç»„ç»‡æƒé™è¿‡æ»¤</p> <p>queryConditioné‡Œé¢è®¾ç½®isDataPowerEnableä¸ºtrueå³å¯ï¼Œå¦‚æœéœ€è¦è®¾ç½®ä½¿ç”¨åœºæ™¯å¯ä»¥åœ¨queryConditioné‡Œè®¾ç½®DataPowerOperationCodeï¼Œå€¼ä¸ºå¯¹åº”åœºæ™¯ç¼–ç ã€‚åŒæ—¶éœ€è¦åœ¨ã€æ•°æ®æƒé™ã€‘é…ç½®ä½¿ç”¨è§„åˆ™æ‰èƒ½ç”Ÿæ•ˆï¼Œæ•°æ®æƒé™å¯¹åº”çš„æ‹¼sqlç±»nccloud.web.refer.sqlbuilder. DefaultRefSqlBuilderæ–¹æ³•åç§°ï¼šgetDataPowerSQLã€‚</p> <p>è¿‡æ»¤ç”¨æˆ·æœ‰æƒé™çš„ç»„ç»‡ï¼Œå‚è€ƒä¸‹é¢çš„ä¾‹å­ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> meta <span class="token operator">=</span> props<span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">getMeta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
meta<span class="token punctuation">[</span><span class="token string">'åŒºåŸŸç¼–ç '</span><span class="token punctuation">]</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>attrcode <span class="token operator">==</span> <span class="token string">&quot;pk_org&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		item<span class="token punctuation">.</span><span class="token function-variable function">queryCondition</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span>
				AppCode <span class="token operator">:</span> props<span class="token punctuation">.</span><span class="token function">getSearchParam</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
				TreeRefActionExt <span class="token operator">:</span> <span class="token string">'nccloud.web.refer.sqlbuilder.PrimaryOrgSQLBuilder'</span>
			<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
props<span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">setMeta</span><span class="token punctuation">(</span>meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-2-å‚ç…§è¿‡æ»¤ä¸ç”Ÿæ•ˆ">2.2 å‚ç…§è¿‡æ»¤ä¸ç”Ÿæ•ˆ</h3> <p>ç‚¹å‚ç…§å³ä¸Šè§’çš„åˆ·æ–°ï¼Œæ£€æŸ¥è¯·æ±‚çš„å‚æ•°é‡Œé¢çš„queryConditioné‡Œé¢æœ‰æ²¡æœ‰è‡ªå·±è¿‡æ»¤çš„å‚æ•°ï¼Œå¦‚æœæœ‰è¯´æ˜å·²ç»ç”Ÿæ•ˆï¼Œæ£€æŸ¥åç«¯ä»£ç é€»è¾‘ã€‚å¦‚æœæ²¡æœ‰queryConditionè¿‡æ»¤å‚æ•°åˆ™æ£€æŸ¥ä»£ç æ˜¯å¦æ‰§è¡Œäº†å‚ç…§è¿‡æ»¤çš„ä»£ç ï¼Œè®¾ç½®å‚ç…§è¿‡æ»¤åæœ‰æ²¡æœ‰è°ƒç”¨props.meta.setMeta(meta);
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=L1iaDJpuQBA&amp;fid=362980571089184&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_2-3-å•æ®å‚ç…§ç¿»è¯‘é—®é¢˜æˆ–å‚ç…§æ˜¾ç¤ºä¸»é”®">2.3 å•æ®å‚ç…§ç¿»è¯‘é—®é¢˜æˆ–å‚ç…§æ˜¾ç¤ºä¸»é”®</h3> <p>å‚ç…§ç¿»è¯‘ä¸è¿‡æ¥çš„é—®é¢˜æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå¯ä»¥æä¾›ä¸€äº›æ’æŸ¥æ€è·¯ï¼š
(1)æ£€æŸ¥actionè¯·æ±‚è¿”å›çš„æ•°æ®å¯¹åº”çš„å­—æ®µæœ‰æ²¡æœ‰displayå’Œvalueï¼Œå¦‚æœæœ‰displayå’Œvalueè¯´æ˜å·²ç»ç¿»è¯‘æ’æŸ¥å‰ç«¯ä»£ç ï¼Œå¯èƒ½å‰ç«¯é€»è¾‘æœ‰é—®é¢˜ï¼›å¦‚æœæ²¡æœ‰valueï¼Œåˆ™æ£€æŸ¥åç«¯ä»£ç ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=Ns10lMQtTEQ&amp;fid=362980571089187&amp;width=1200&amp;height=800&amp;type=min" alt="111.png">
(2) æ£€æŸ¥å‚ç…§å­—æ®µçš„pkå€¼æ‰€å¯¹åº”æ¡£æ¡ˆæ˜¯å¦å·²ç»è¢«åˆ é™¤äº†ã€‚å¦‚æœå½•spræ—¥å¿—æ—¶ï¼Œä¸€èˆ¬ä¼šçœ‹åˆ°æœ‰å¯¹åº”çš„æŸ¥è¯¢sqlä¼šå»æŸ¥æ‰¾å¯¹åº”æ¡£æ¡ˆçš„codeæˆ–nameï¼Œæ£€æŸ¥åé¢çš„ç»“æœé›†æˆ–è€…åˆ°æ•°æ®åº“é‡Œé¢æ‰§è¡Œä¸€ä¸‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰å¯¹åº”çš„æ•°æ®ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=ehPQkTfSS4M&amp;fid=362980571089188&amp;width=1200&amp;height=800&amp;type=min" alt="222.png">
(3)å¦‚æœå•æ®ä¸Šæ‰€æœ‰å‚ç…§å­—æ®µéƒ½ç¿»è¯‘æœ‰é—®é¢˜æ£€æŸ¥æ¨¡æ¿åŒºåŸŸæœ‰æ²¡æœ‰è®¾ç½®voç±»ã€‚æ£€æŸ¥actionè°ƒç”¨çš„ç¿»è¯‘æ–¹æ³•æ˜¯å¦æ­£ç¡®ï¼Œç¿»è¯‘çš„æ–¹æ³•å¯ä»¥å‚è€ƒ2111ç‰ˆæœ¬nccloud.web.codeplatform.framework.action.base. VOTransform
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=TJ5fpirPTg&amp;fid=362980571089189&amp;width=1200&amp;height=800&amp;type=min" alt="3.png">
(4) æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº†è‡ªå®šä¹‰é¡¹ï¼šå¦‚æœä½¿ç”¨è‡ªå®šä¹‰é¡¹è®¾ç½®ä¸ºå‚ç…§ï¼Œåº”è¯¥é€šè¿‡ã€ç”¨æˆ·å®šä¹‰å±æ€§è®¾ç½®-å…¨å±€ã€‘å’Œã€ç”¨æˆ·å®šä¹‰å±æ€§è®¾ç½®-é›†å›¢ã€‘æ¥é…ç½®ï¼Œè€Œä¸æ˜¯ä¿®æ”¹æ¨¡æ¿ã€‚å¦‚æœç”¨æˆ·å®šä¹‰å±æ€§è®¾ç½®é‡Œé¢æ‰¾ä¸åˆ°ï¼Œéœ€è¦å…ˆåˆ°ã€ç”¨æˆ·å®šä¹‰å±æ€§ç»„ã€‘å»æ³¨å†Œã€‚
<strong>æ³¨æ„ï¼šå¦‚æœç”¨æˆ·å®šä¹‰å±æ€§è®¾ç½®åæ²¡ç”Ÿæ•ˆï¼Œæ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œé‡å¯åå°æœåŠ¡ã€‚</strong></p> <p>(5)æ£€æŸ¥æ¨¡æ¿ä¸Šçš„åŒºåŸŸæ˜¯å¦è®¾ç½®äº†å…³è”åŒºåŸŸæˆ–è€…é…ç½®äº†ä¾§æ‹‰å±•å¼€ã€‚å¦‚æœæœ‰è¿™ç§æƒ…å†µï¼Œåˆ™å…³è”çš„åŒºåŸŸç›¸åŒå­—æ®µè¦é…ç½®çš„ä¸€æ ·æ‰èƒ½ç¿»è¯‘è¿‡æ¥ã€‚æ£€æŸ¥æ–¹æ³•ï¼š
<code>select * from pub_area left join pub_page_templet on pub_area.templetid = pub_page_templet.pk_page_templet where pub_page_templet.code in ('æ¨¡æ¿ç¼–ç ') and relationcode='åŒºåŸŸç¼–ç '</code> <img src="https://nccdev.yonyou.com/shareThumbnail?shareId=NulCz2QQRs&amp;fid=362980571089190&amp;width=1200&amp;height=800&amp;type=min" alt="4.png">
(6)æ£€æŸ¥pub_form_propertyè¡¨ï¼Œç¿»è¯‘æ—¶æ˜¯æ ¹æ®pub_form_propertyè¡¨é‡Œé¢çš„metadatapropertyå’Œmetaidæ¥ç¡®å®šå‚ç…§ä»å“ªä¸ªè¡¨å»æŸ¥ï¼Œç¿»è¯‘æˆå“ªä¸ªå­—æ®µçš„ã€‚
<strong>æ³¨æ„ï¼šå¦‚æœä¿®æ”¹äº†pub_form_propertyè¡¨ï¼ŒéªŒè¯æ—¶æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ã€é‡å¯åå°æœåŠ¡ã€‚</strong> <img src="https://nccdev.yonyou.com/shareThumbnail?shareId=pCv7DWNuSL4&amp;fid=362980571089191&amp;width=1200&amp;height=800&amp;type=min" alt="5.png">
(7)å¦‚æœä¸Šè¿°æ–¹å¼æ£€æŸ¥è¿‡åæ— æ³•è§£å†³æˆ–è€…å‚ç…§æœ¬èº«æ— æ³•é€šè¿‡å¹³å°è¿›è¡Œç¿»è¯‘ï¼Œè¿˜å¯ä»¥è‡ªå·±ä»£ç é‡Œé¢ç¿»è¯‘ã€‚ä¾‹å¦‚ï¼Œå¡ç‰‡ç•Œé¢åœ¨è°ƒç”¨å®Œå¹³å°æä¾›çš„ç¿»è¯‘æ–¹æ³•åä¼šå¾—åˆ°BillCardå¯¹è±¡ï¼Œå¯¹cardè¿›è¡Œè§£æè®¾ç½®displayå³å¯ã€‚ä¸‹é¢æ˜¯BillCardä¾‹å­ï¼Œå…¶ä»–æƒ…å†µå¯ä»¥è‡ªè¡Œè°ƒè¯•è§£æç»“æ„ï¼Œé€»è¾‘ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå³è®¾ç½®Cellçš„displayã€‚å‚è€ƒä¾‹å­å¦‚ä¸‹</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">BillCard</span> <span class="token function">headExtraTranslate</span><span class="token punctuation">(</span><span class="token class-name">BillCard</span> card<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BusinessException</span> <span class="token punctuation">{</span>
	<span class="token class-name">Form</span> form <span class="token operator">=</span> card<span class="token punctuation">.</span><span class="token function">getHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">Row</span><span class="token punctuation">[</span><span class="token punctuation">]</span> rows <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>rows <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> rows<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> card<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> rows<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		rows<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getCell</span><span class="token punctuation">(</span><span class="token string">&quot;creator&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setDisplay</span><span class="token punctuation">(</span><span class="token string">&quot;username:****&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å­—æ®µçš„displayå€¼</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> card<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_2-4-å¦‚ä½•è®¾ç½®å‚ç…§å¤šé€‰">2.4 å¦‚ä½•è®¾ç½®å‚ç…§å¤šé€‰</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> æŸ¥è¯¢åŒºåŸŸé€šè¿‡é…ç½®æ¨¡æ¿ï¼Œé€‰ä¸­å­—æ®µåè®¾ç½®æ˜¾ç¤ºå±æ€§åå¤šé€‰å³å¯ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=v8HQ59USTY&amp;fid=362980571089192&amp;width=1200&amp;height=800&amp;type=min" alt="6.png">
å¦‚æœæ˜¯è¡¨å•æˆ–è€…è¡¨æ ¼å‚ç…§éœ€è¦å¤šé€‰ï¼Œä¸å»ºè®®è¿™ä¹ˆåšã€‚åŸå› æœ‰å¾ˆå¤šï¼Œå­—æ®µå¯èƒ½å­˜ä¸ä¸‹ï¼Œéœ€è¦è€ƒè™‘åå°å­—æ®µé•¿åº¦é—®é¢˜ï¼›ç¿»è¯‘é—®é¢˜ï¼Œå¤šé€‰çš„å‚ç…§å¹³å°ç¿»è¯‘ä¸äº†ï¼Œéœ€è¦è‡ªå·±ç¿»è¯‘ï¼›æ˜¾ç¤ºé—®é¢˜ï¼Œå‚ç…§é€‰çš„è®°å½•å¾ˆå¤šæ—¶ï¼Œç•Œé¢å¯èƒ½æ˜¾ç¤ºä¸å…¨ã€‚å¦‚æœä»¥ä¸Šé—®é¢˜è€ƒè™‘æ¸…æ¥šåå¯ä»¥å‚è€ƒä¸‹é¢æ–¹æ³•ï¼š</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>meta<span class="token punctuation">[</span><span class="token string">'åŒºåŸŸç¼–ç '</span><span class="token punctuation">]</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        
	<span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>attrcode <span class="token operator">==</span> <span class="token string">&quot;å­—æ®µç¼–ç &quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		item<span class="token punctuation">.</span>isMultiSelectedEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å‚ç…§å­—æ®µå¤šé€‰</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_2-5-å¦‚ä½•é€šè¿‡å‰ç«¯jsä»£ç è®¾ç½®æŸä¸ªå­—æ®µä¸ºå‚ç…§">2.5 å¦‚ä½•é€šè¿‡å‰ç«¯jsä»£ç è®¾ç½®æŸä¸ªå­—æ®µä¸ºå‚ç…§ï¼Ÿ</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> å‚è€ƒä¸‹é¢çš„æ–¹å¼ï¼Œä¿®æ”¹metaå¯¹åº”çš„itemï¼š
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=CsxruCStTlU&amp;fid=362980571089193&amp;width=1200&amp;height=800&amp;type=min" alt="f4ad14de2727d95a8f9dac285919f39.png"></p> <h3 id="_2-6-å‰ç«¯å‚ç…§æ²¡æœ‰è¾“å…¥æ¡†æˆ–è€…æŠ¥é”™æ‰¾ä¸åˆ°xxxxx-indexè¿™ä¸ªæ–‡ä»¶-è¯·æ£€æŸ¥å¼•ç”¨è·¯å¾„">2.6 å‰ç«¯å‚ç…§æ²¡æœ‰è¾“å…¥æ¡†æˆ–è€…æŠ¥é”™æ‰¾ä¸åˆ°xxxxx/indexè¿™ä¸ªæ–‡ä»¶ï¼Œè¯·æ£€æŸ¥å¼•ç”¨è·¯å¾„</h3> <p>æˆ–è€…æŠ¥é”™æç¤ºï¼šâ€œè¯·æ£€æŸ¥å¼•ç”¨çš„xxxxxxè¿™ä¸ªæ–‡ä»¶æ˜¯æºç è¿˜æ˜¯ç¼–è¯‘å¥½çš„ã€‚æºç éœ€è¦åœ¨config.json/buildEntryPathé…ç›¸åº”çš„è·¯å¾„ï¼Œç¼–è¯‘å¥½çš„åˆ™ä¸ç”¨â€
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=NeSKTwfGR6w&amp;fid=362980571089194&amp;width=1200&amp;height=800&amp;type=min" alt="7.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> 1ã€å¦‚æœconsoleæ§åˆ¶å°æœ‰ä¸Šé¢æŠ¥é”™çš„æç¤ºä¿¡æ¯ï¼Œæ£€æŸ¥å‰ç«¯å·¥ç¨‹srcé‡Œé¢æœ‰æ²¡æœ‰å¯¹åº”çš„æ–‡ä»¶ï¼Œå¦‚æœjsæ–‡ä»¶æ˜¯æºç ï¼Œéœ€è¦é…ç½®åˆ°config.jsonçš„buildEntryPathé‡Œé¢ã€‚å¦‚æœæ˜¯ç³»ç»Ÿè‡ªå¸¦çš„å‚ç…§ï¼Œå¯ä»¥ä»homeé‡Œé¢ï¼ˆhome\hotwebs\nccloud\resourcesï¼‰å¤åˆ¶åˆ°å‰ç«¯å·¥ç¨‹é‡Œé¢ï¼Œå› ä¸ºhomeé‡Œçš„æ˜¯å·²ç»ç¼–è¯‘å¥½çš„ä¸éœ€è¦é…ç½®config.jsonã€‚</p> <p>2ã€å¦‚æœæ²¡æœ‰æŠ¥é”™ï¼Œæ£€æŸ¥æ¨¡æ¿æ˜¯å¦æ­£ç¡®ã€‚ä»£ç é‡Œé¢æ£€æŸ¥item.refcodeæ˜¯å¦æ­£ç¡®ã€‚
æ•°æ®åº“æ£€æŸ¥pub_form_propertyçš„refcode</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>select * from pub_form_property where areaid in( select pk_area from pub_area left join pub_page_templet on pub_area.templetid = pub_page_templet.pk_page_templet where pub_page_templet.code in ('é¡µé¢ç¼–ç ') ) and code in('å­—æ®µç¼–ç ');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_3-åç«¯">3 åç«¯</h2> <h3 id="_3-1-æŠ¥é”™æç¤º-ä¸æ”¯æŒæ­¤ç§ä¸šåŠ¡">3.1 æŠ¥é”™æç¤º ä¸æ”¯æŒæ­¤ç§ä¸šåŠ¡</h3> <p>(1)å¦‚æœæ˜¯<strong>æœ¬åœ°å¼€å‘ç¯å¢ƒ</strong>è·Ÿä»£ç å‘ç°æ˜¯ nccloud.framework.web.action.entry.ActionExcutorä¸­ ifæ¡ä»¶åˆ¤æ–­instance instanceof ICommonActionä¸ºfalseå¯¼è‡´æ‰§è¡Œäº†ExceptionUtils.unSupported(); ä¸€èˆ¬æ˜¯æ²¡æœ‰ä½¿ç”¨deployéƒ¨ç½²å·¥å…·ï¼ˆ[https://pan.yonyou.com/web/share.html?hash=mJ0LpdY6TU8ï¼‰å¯¼è‡´çš„ï¼Œå¹¶ä¸”ä¸€å®šè¦ç”¨å·¥å…·å»æ‰§è¡Œä¸è¦æ‰‹åŠ¨æŒªjaråŒ…ã€‚éœ€è¦åœæ­¢æœåŠ¡å…³é—­å¼€å‘å·¥å…·ï¼Œé˜²æ­¢æ–‡ä»¶è¢«å ç”¨ï¼Œä½¿ç”¨é™„ä»¶ä¸­çš„deployå·¥å…·é‡æ–°éƒ¨ç½²ï¼Œéƒ¨ç½²å®Œæˆåå¹¶ç¡®ä¿home\hotwebs\nccloud\WEB-INF\libå’Œhome\hotwebs\nccloud\WEB-INF\classesæ–‡ä»¶å¤¹é‡Œé¢æ˜¯ç©ºçš„ã€‚](javascript:void(0))</p> <p>(2)å¦‚æœå·²ç»æ‰§è¡Œä¸Šè¿°æ­¥éª¤è€Œä¸”ä»ç„¶æŠ¥é”™ï¼Œæ£€æŸ¥å¯¹åº”çš„actionç±»æ˜¯å¦å®ç°äº†ICommonActionæ¥å£æˆ–è€…ActionExcutoré‡Œé¢æ¡ä»¶åˆ¤æ–­çš„æ¥å£ã€‚</p> <p>(3)æ£€æŸ¥è·Ÿä»£ç å¦‚æœä¸æ˜¯ nccloud.framework.web.action.entry.ActionExcutoræŠ¥çš„é”™ï¼Œåˆ™éœ€è¦è·Ÿä»£ç å…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚</p> <p><strong>å¦å¤–éœ€è¦æ³¨æ„ï¼šdeployæ‰§è¡Œæ˜¯æœ¬åœ°å¼€å‘ç¯å¢ƒæ‰éœ€è¦ç”¨åˆ°çš„ï¼Œçº¿ä¸Šæµ‹è¯•ç¯å¢ƒä¸èƒ½æ‰§è¡Œ</strong></p> <h3 id="_3-2-user-session-expired-please-re-login-0">3.2 User session expired,please re login!(0)</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> ä½¿ç”¨NCLocatorè¿›è¡Œè°ƒç”¨æ¥å£ï¼Œæ˜¯ä¼šæ ¡éªŒä¼šè¯ä¿¡æ¯çš„ã€‚éœ€è¦ç¡®è®¤ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š
(1) æ˜¯å¦æ˜¯åœ¨NCCçš„clientä½¿ç”¨äº†NCLocatorï¼ˆåŒ…æ‹¬åœ¨publicå†™äº†é™æ€æ–¹æ³•ï¼Œpublicçš„é™æ€æ–¹æ³•ä½¿ç”¨äº†NCLocatorï¼ŒNCC clientåˆè°ƒç”¨äº†è¯¥é™æ€æ–¹æ³•ï¼‰ï¼ŒNCCçš„clientåº”è¯¥æ˜¯ç”¨ServiceLocatorè·å–æ¥å£å®ä¾‹è°ƒç”¨æ¥å£ã€‚
(2) æ˜¯å¦å¯ç”¨äº†çº¿ç¨‹ï¼Œåœ¨çº¿ç¨‹é‡Œé¢è°ƒç”¨äº†æ¥å£ã€‚
(3) æ˜¯å¦åœ¨webserviceæˆ–è€…servletç±»å‹çš„æ¥å£é‡Œé¢ä½¿ç”¨äº†NCLocatorï¼Œè¿™ç§ä¹Ÿä¼šå‡ºç°ç±»ä¼¼æƒ…å†µã€‚
(4) ç”¨æˆ·è¿˜æœªç™»é™†ï¼Œä¾‹å¦‚ç”¨æˆ·ç™»é™†ç•Œé¢ç‚¹å‡»ç™»é™†æˆ–è€…è°ƒç”¨è¿œç¨‹æ¥å£ã€‚
å¦‚æœç”¨æˆ·æ˜¯æœªç™»å½•çš„æƒ…å†µä¸‹éœ€è¦è°ƒç”¨æ¥å£ï¼Œæ­¤æ—¶å¯ä»¥å‚è€ƒä¸‹é¢æ–¹å¼</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ISecurityTokenCache</span> service <span class="token operator">=</span> <span class="token class-name">NCLocator</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token class-name">ISecurityTokenCache</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token class-name">ISecurityTokenCallback</span> sc <span class="token operator">=</span> <span class="token class-name">NCLocator</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token class-name">ISecurityTokenCallback</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">String</span> userCode <span class="token operator">=</span> <span class="token string">&quot;annoymous&quot;</span><span class="token punctuation">;</span><span class="token comment">//åŒ¿åç”¨æˆ·ç¼–ç </span>
			<span class="token class-name">InvocationInfoProxy</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUserCode</span><span class="token punctuation">(</span>userCode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®è¿è¡Œç¯å¢ƒçš„ç”¨æˆ·ç¼–ç </span>
			<span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> annonyTokens <span class="token operator">=</span> sc<span class="token punctuation">.</span><span class="token function">token</span><span class="token punctuation">(</span><span class="token class-name">ISystemIDConstants</span><span class="token punctuation">.</span>NCSYSTEM<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> userCode<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ISystemIDConstants.NCSYSTEMä»£è¡¨ncç³»ç»Ÿ</span>
			sc<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span>annonyTokens<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®ä¸´æ—¶token</span>
			<span class="token keyword">return</span> <span class="token class-name">SysInitQuery</span><span class="token punctuation">.</span><span class="token function">getParaBoolean</span><span class="token punctuation">(</span>GLOBEL_PK<span class="token punctuation">,</span> initCode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è°ƒç”¨æ¥å£</span>
		<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
			<span class="token comment">// æ³¨é”€ä¸´æ—¶token</span>
			<span class="token class-name">InvocationInfoProxy</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setUserCode</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">boolean</span> isCacheOn <span class="token operator">=</span> <span class="token class-name">TokenUtil</span><span class="token punctuation">.</span><span class="token function">isSecurityTokenCacheOn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>isCacheOn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				service<span class="token punctuation">.</span><span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token class-name">NetStreamContext</span><span class="token punctuation">.</span><span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ³¨ï¼šæœ‰äº›ç®€å•çœäº‹çš„åŠæ³•æ˜¯ï¼Œæ¥å£è°ƒç”¨å‰åŠ ä¸Šä¸‹é¢ä»£ç ï¼Œä¸è¿‡è€ƒè™‘å®‰å…¨é—®é¢˜æ…ç”¨ã€‚
<code>NCLocator.getInstance().lookup(ISecurityTokenCallback.class).token(&quot;NCSystem&quot;.getBytes(),&quot;pfxx&quot;.getBytes());</code></p> <h3 id="_3-3-actionè¯·æ±‚æŠ¥é”™-401-unauthorized">3.3 actionè¯·æ±‚æŠ¥é”™ 401 Unauthorized</h3> <p>ç•Œé¢æç¤ºæœ‰ç±»è·¯å¾„æˆ–è€…httpå“åº”æ ‡å¤´authorizemsg ä¼šæœ‰ä¸ªç±»è·¯å¾„
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=SSEUJkKRXc&amp;fid=362980571088775&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong>
çœ‹åˆ°401 Unauthorized å¯èƒ½æŠŠå¾ˆå¤šä¼šè®¤ä¸ºæ˜¯æ²¡æœ‰æ”¾é‰´æƒæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰é‰´æƒæ–‡ä»¶æ—¶ç¡®å®ä¼šæœ‰401çŠ¶æ€çš„æç¤ºï¼Œè¿™ä¸ªæˆ‘ä»¬è¿™é‡Œä¹Ÿä¼šè¿›è¡Œä»‹ç»ã€‚æ²¡æœ‰é‰´æƒæ–‡ä»¶æ—¶ä¸€èˆ¬è¿˜ä¼šæœ‰æç¤ºä¿¡æ¯æ˜¯â€œåº”ç”¨ç¼–ç  xx ä»¥åŠå…¶æ ¹åº”ç”¨ç¼–ç  xx æ²¡æœ‰è¯¥æ“ä½œçš„ä¸šåŠ¡æƒé™ xxxx/xxx/xxxâ€ å¯ä»¥åœ¨æ–‡æ¡£æœä¸€ä¸‹ç›¸å…³ä»‹ç»ã€‚æ‰“å¼€nccloud.framework.core.filter.AppActionAuthorizeFilterç±»doFilteræ–¹æ³•å¯ä»¥çœ‹åˆ°ä¸‹é¢ä¸€æ®µä»£ç </p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> ncrequest<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">IActionResource</span> resource <span class="token operator">=</span> <span class="token class-name">Locator</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">IActionResource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    define <span class="token operator">=</span> resource<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">&quot;è¯·æ±‚ 401æŠ¥é”™:  &quot;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ThreadResources</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;AUTHORIZE&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;FALSE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// å¤„ç†ç©ºæ ¼è½¬ä¸ºåŠ å·çš„é—®é¢˜</span>
    msg <span class="token operator">=</span> msg<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;\\+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;%20&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;AUTHORIZEMSG&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>æ‰€ä»¥å¦‚æœè·å–å®ä¾‹æŠ¥é”™äº†å°±ä¼šå‡ºç°è¯¥é—®é¢˜ï¼ŒåŒæ—¶AUTHORIZEMSGæ˜¾ç¤ºçš„æ˜¯å¯¹åº”ç±»åç§°ã€‚åƒæˆªå›¾è¿™ç§æŠ¥é”™ä¸€èˆ¬æ˜¯å®ä¾‹åŒ–actionç±»å‡ºé”™å¯¼è‡´ã€‚</p> <p>å¦å¤–åœ¨è¿™ä¸ªç±»é‡Œé¢è¿˜æœ‰ä¸ªæ–¹æ³•validateActionAuthorizedï¼Œè¿™ä¸ªæ˜¯æ ¡éªŒå°åº”ç”¨æ˜¯å¦æœ‰actionè¯·æ±‚æƒé™çš„ï¼Œä¹Ÿå°±æ˜¯æ ¡éªŒé‰´æƒæ–‡ä»¶ã€‚è¿™ä¸ªæ–¹æ³•finallyé‡Œé¢æœ‰ä¸€æ®µä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ThreadResources</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
httpRes<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;AUTHORIZE&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;FALSE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
msg <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span>URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// å¤„ç†ç©ºæ ¼è½¬ä¸ºåŠ å·çš„é—®é¢˜</span>
msg <span class="token operator">=</span> msg<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;\\+&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;%20&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				logger_security<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;AppActionAuthorizeFilter:401æŠ¥é”™ ï¼›msg:&quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
httpRes<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;AUTHORIZEMSG&quot;</span><span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
httpRes<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å¦‚æœæ ¡éªŒé‰´æƒæ²¡æœ‰é€šè¿‡ï¼Œåˆ™è®¾ç½®çŠ¶æ€ç ä¸º401ï¼ŒåŒæ—¶ä¹Ÿä¼šæœ‰å¯¹åº”çš„AUTHORIZEMSGã€‚å¦‚æœauthorizemsgçœ‹ä¸æ‡‚æ²¡æœ‰å…³ç³»ï¼Œå¤åˆ¶åæ‰¾url Decodeè§£ç å·¥å…·è§£æå°±æ˜ç™½äº†ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=zQlbmV1CT7g&amp;fid=362980571089123&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>å¯ä»¥æŒ‰ä¸‹é¢æ–¹å¼è§£å†³ï¼š
(1) å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒï¼Œæ£€æŸ¥action xmlé…ç½®æ–‡ä»¶é‡Œé¢å¯¹åº”çš„ç±»è·¯å¾„æ˜¯å¦å®Œå…¨æ­£ç¡®ï¼Œç±»æ˜¯å¦å­˜åœ¨ï¼Œå¯¹åº”çš„ç±»æœ‰æ²¡æœ‰ç¼–è¯‘å‡ºclassæ–‡ä»¶ã€‚å¦‚æœæœ‰å¤šä¸ªé¡¹ç›®æ—¶éœ€è¦å…³æ³¨å½“å‰å¯åŠ¨çš„æ˜¯å“ªä¸ªé¡¹ç›®ã€‚</p> <p>å¦å¤–æœ‰æ—¶å€™PackageExplorerè§†å›¾é‡Œé¢å‘ç°å·¥ç¨‹å‰é¢æœ‰ä¸ªçº¢è‰²çš„å¹å·ï¼ˆç±»ä¼¼ä¸‹å›¾testå·¥ç¨‹ï¼‰ï¼Œè¿™ç§å°±æ˜¯ç”±äºjava build pathæ„å»ºæœ‰è¯¯å¯¼è‡´çš„ï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šå¯¼è‡´ç±»ä¸ç¼–è¯‘ï¼Œå³ä½¿binæ–‡ä»¶å¤¹æœ‰classæ–‡ä»¶ï¼Œæ–°æ·»åŠ ç±»æˆ–ä¿®æ”¹ç±»ä¹Ÿä¸ç”Ÿæ•ˆã€‚</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=VLotk1uERzo&amp;fid=362980571088777&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>(2) å¦‚æœæ˜¯æµ‹è¯•ç¯å¢ƒï¼Œæ£€æŸ¥æœåŠ¡å™¨ä¸Šactioné…ç½®çš„ç±»è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œæœ‰æ²¡æœ‰è¿™ä¸ªç±»ï¼Œæœ‰æ²¡æœ‰classæ–‡ä»¶ï¼Œè¡¥ä¸è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œxmlæ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œæ‰“è¿‡è¡¥ä¸åæœ‰æ²¡æœ‰é‡å¯æœåŠ¡ï¼ˆæ³¨:æœ‰äº›è€çš„å·¥å…·å‡ºncc clientçš„è¡¥ä¸ä¼šåœ¨modules\æ¨¡å—\clientä¸‹ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒæ•´ï¼Œæ­£ç¡®çš„è·¯å¾„åº”è¯¥æ˜¯åœ¨home\hotwebs\nccloud\WEB-INF\classesä¸‹ï¼‰ã€‚</p> <p>(3) å¦‚æœæ˜¯wasç¯å¢ƒï¼Œhotwebsçš„è¡¥ä¸åœ¨waséœ€è¦éƒ¨ç½²åˆ°IBMç›®å½•åº•ä¸‹ï¼Œæ£€æŸ¥é‡æ–°éƒ¨ç½²ï¼Œé‡å¯æœåŠ¡ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=HSChdyhZQpA&amp;fid=362980571089349&amp;width=1200&amp;height=800&amp;type=min" alt="983459fa63dcc5c4efc8b8fdeab284a.png"></p> <p>(4) å¦‚æœæ˜¯æ‰“å°çš„æ—¶å€™æŠ¥é”™ï¼Œæ£€æŸ¥æ˜¯å¦æ”¾äº†é‰´æƒæ–‡ä»¶ï¼ŒactionåŠé‰´æƒæ–‡ä»¶å†…å®¹é…ç½®æ˜¯å¦æ­£ç¡®ã€‚</p> <h3 id="_3-4-è°ƒactionè¯·æ±‚æŠ¥é”™-java-heap-space">3.4 è°ƒactionè¯·æ±‚æŠ¥é”™ Java heap space</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> ä¸€èˆ¬æ˜¯åå°çš„ä»£ç æ‰æ­»å¾ªç¯é‡Œé¢äº†ã€‚å…¶ä¸­æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªé”™è¯¯æ˜¯ï¼Œvoç±»é‡Œé¢çš„getã€setæ–¹æ³•ä½¿ç”¨äº†getAttributeValueã€setAttributeValueï¼Œä½†æ˜¯å…ƒæ•°æ®é‡Œé¢å¯¹åº”çš„å±æ€§åˆæ²¡æœ‰å‹¾ä¸ŠåŠ¨æ€å±æ€§ä¹Ÿä¼šæŠ¥è¿™ä¸ªé”™è¯¯ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCode</span><span class="token punctuation">(</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span> code<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setAttributeValue</span><span class="token punctuation">(</span>CODE<span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>lang<span class="token punctuation">.</span></span>String</span> <span class="token function">getCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttributeValue</span><span class="token punctuation">(</span>CODE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>å¯¹åº”çš„å…ƒæ•°æ®ä¸Šå®ä½“å­—æ®µæ²¡æœ‰å‹¾åŠ¨æ€å±æ€§ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=mIr66wfQv8&amp;fid=362980571088875&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>æ”¹æ­£æ–¹æ³•ï¼š</strong> å¦‚æœéœ€è¦ç”¨åŠ¨æ€å±æ€§ï¼Œåˆ™å…ƒæ•°æ®ä¸Šå‹¾ä¸ŠåŠ¨æ€å±æ€§ï¼Œvoç±»é‡Œé¢å¯¹åº”çš„å­—æ®µgetã€setç”¨getAttributeValueã€setAttributeValueã€‚</p> <p>å¦‚æœä¸ç”¨åŠ¨æ€å±æ€§ï¼Œåˆ™å…ƒæ•°æ®ä¸Šä¸è¦å‹¾åŠ¨æ€å±æ€§ï¼Œvoç±»é‡Œé¢å¯¹åº”å­—æ®µgetã€setä¸è¦ç”¨getAttributeValueã€setAttributeValueã€‚</p> <p>ä¿®æ”¹å®Œå…ƒæ•°æ®é‡æ–°å‘å¸ƒã€voç±»ä¿®æ”¹é‡å¯æœåŠ¡ï¼Œè¿›è¡ŒéªŒè¯ã€‚</p> <h3 id="_3-5-æ–°å¢æˆ–ä¿®æ”¹æ•°æ®-æ²¡æœ‰æŠ¥é”™ä¹Ÿæ²¡æœ‰ä¿å­˜åˆ°æ•°æ®åº“é‡Œé¢">3.5 æ–°å¢æˆ–ä¿®æ”¹æ•°æ®ï¼Œæ²¡æœ‰æŠ¥é”™ä¹Ÿæ²¡æœ‰ä¿å­˜åˆ°æ•°æ®åº“é‡Œé¢</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong>ï¼ˆ1ï¼‰æ£€æŸ¥voçš„statusï¼Œvoç»§æ‰¿SuperVOåä¿å­˜æ—¶ä¸€èˆ¬ä¼šæ ¹æ®vo.getStatus()è¿›è¡Œåˆ¤æ–­ã€‚åœ¨nc.vo.pub.VOStatusæœ‰å¯¹åº”çš„æšä¸¾å€¼ï¼Œå¦‚æœæšä¸¾å€¼æ˜¯0ï¼Œåˆ™è®¤ä¸ºæ˜¯æ²¡æœ‰ä¿®æ”¹ä¸€èˆ¬ä¿å­˜æ¥å£é‡Œé¢ä¸ä¼šä¿å­˜ã€‚</p> <p>ï¼ˆ2ï¼‰æ£€æŸ¥upmæ–‡ä»¶é…ç½®æœ‰æ²¡æœ‰è®¾ç½®tx=â€CMTâ€ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œå¦‚æœåªæ˜¯æŸ¥è¯¢ä¸€èˆ¬é…ç½®tx=â€NONEâ€ï¼Œå¦‚æœæ¶‰åŠåˆ°å¢åˆ æ”¹æ—¶ä¼šæœ‰äº‹åŠ¡æäº¤æ‰ä¼šè®¾ç½®tx=&quot;CMT&quot;
ï¼ˆæ³¨æ„ç‚¹ï¼šæŸ¥è¯¢é…ç½®æˆâ€œNONEâ€è¿™ä¸ªå¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œæœ‰äº›æŸ¥è¯¢æ¯”å¦‚éœ€è¦æ ¹æ®ä¸»é”®æŸ¥è¯¢åˆ›å»ºä¸´æ—¶è¡¨æ—¶ä¹Ÿæ˜¯éœ€è¦ç”¨äº‹åŠ¡çš„ã€‚ï¼‰</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;gb2312&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uapbd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>public</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">priority</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">singleton</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">remote</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>CMT<span class="token punctuation">&quot;</span></span> <span class="token attr-name">supportAlias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>interface</span><span class="token punctuation">&gt;</span></span>nc.itf.uapbd.mainchild.mainentity.IMainEntityService<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>interface</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>implementation</span><span class="token punctuation">&gt;</span></span>nc.impl.uapbd.mainchild.mainentity.MainEntityServiceImpl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>implementation</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">priority</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">singleton</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">remote</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>NONE<span class="token punctuation">&quot;</span></span> <span class="token attr-name">supportAlias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>interface</span><span class="token punctuation">&gt;</span></span>nc.itf.uapbd.mainchild.mainentity.IQuery10KHForMC01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>interface</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>implementation</span><span class="token punctuation">&gt;</span></span>nc.impl.uapbd.mainchild.mainentity.Query10KHForMC01Impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>implementation</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>public</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ï¼ˆ3ï¼‰å½•spræ—¥å¿—ï¼Œæ£€æŸ¥æœ‰æ²¡æœ‰æŠ¥é”™å¯¼è‡´äº‹åŠ¡å›æ»šã€‚</p> <p>ï¼ˆ4ï¼‰åœ¨AbstractEJBServiceHandlerç±»çš„invokeæ–¹æ³•é‡Œé¢æ‰¾catchï¼Œä¸¤ä¸ªcatch çš„åœ°æ–¹éƒ½æ‰“ä¸ªæ–­ç‚¹ï¼Œé‡æ–°æ“ä½œçœ‹æ˜¯å¦è¿›å…¥æ–­ç‚¹ã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Object</span> target<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InvocationTargetException</span> var23<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        hasError <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Throwable</span> var24<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        hasError <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3-6-æäº¤æŠ¥é”™-é”™è¯¯-æµç¨‹å¹³å°ç¼“å­˜ä¸­ä¸å­˜åœ¨è¯¥å•æ®æˆ–äº¤æ˜“ç±»å‹-xxxx">3.6 æäº¤æŠ¥é”™ï¼šé”™è¯¯ï¼šæµç¨‹å¹³å°ç¼“å­˜ä¸­ä¸å­˜åœ¨è¯¥å•æ®æˆ–äº¤æ˜“ç±»å‹=xxxx</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=MJvurpXTRhM&amp;fid=362980571089199&amp;width=1200&amp;height=800&amp;type=min" alt="1.png"></p> <p>å®¡æ‰¹æµéœ€è¦æ³¨å†Œå•æ®ç±»å‹ï¼Œå¦‚æœæ²¡æœ‰æ³¨å†Œåˆ°å•æ®ç±»å‹ç®¡ç†é‡Œé¢æ³¨å†Œï¼Œå¦‚æœæ³¨å†Œäº†ï¼Œæ£€æŸ¥å•æ®ç±»å‹æ³¨å†Œæ˜¯å¦æ­£ç¡®ã€‚
<code>SELECT * FROM bd_billtype WHERE pk_billtypecode = 'å•æ®ç±»å‹çš„ç¼–ç ' and ( pk_group = '~' or pk_group = 'global00000000000000' )</code></p> <p>å½•spræ—¥å¿—ï¼Œè·Ÿä¸€ä¸‹ä»£ç ï¼Œæœ‰äº›æ—¶å€™å¯èƒ½æ˜¯å…¶ä»–åŸå› æŸ¥è¯¢æ—¶æŠ¥é”™ï¼Œç„¶ååœ¨catché‡Œé¢æ•è·æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚è§ä¸‹é¢ä»£ç ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">nc<span class="token punctuation">.</span>vo<span class="token punctuation">.</span>pf<span class="token punctuation">.</span>change<span class="token punctuation">.</span></span>PfUtilBaseTools</span><span class="token operator">:</span>
<span class="token comment">//ä»æ•°æ®åº“é‡Œå†æŸ¥ä¸€ä¸‹ï¼Œè¿˜æ˜¯å–ä¸åˆ°ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token class-name">IBilltypeService</span> ser<span class="token operator">=</span><span class="token class-name">NCLocator</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lookup</span><span class="token punctuation">(</span><span class="token class-name">IBilltypeService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btVO<span class="token operator">=</span>ser<span class="token punctuation">.</span><span class="token function">getBilltype</span><span class="token punctuation">(</span>strTypeCodestr<span class="token punctuation">,</span> <span class="token class-name">InvocationInfoProxy</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getGroupId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">PFRuntimeException</span><span class="token punctuation">(</span><span class="token class-name">NCLangRes4VoTransl</span><span class="token punctuation">.</span><span class="token function">getNCLangRes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStrByID</span><span class="token punctuation">(</span><span class="token string">&quot;busitype&quot;</span><span class="token punctuation">,</span>
		<span class="token string">&quot;PfUtilBaseTools-000000&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> billtype <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">/* é”™è¯¯ï¼šæµç¨‹å¹³å°ç¼“å­˜ä¸­ä¸å­˜åœ¨è¯¥å•æ®æˆ–äº¤æ˜“ç±»å‹={0} */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3-7-å¦‚ä½•æ‰¾åˆ°actionè¯·æ±‚å¯¹åº”çš„åå°ç±»">3.7 å¦‚ä½•æ‰¾åˆ°actionè¯·æ±‚å¯¹åº”çš„åå°ç±»ï¼Ÿ</h3> <p>(1) æ¨èä½¿ç”¨actionå—–ä¸€ä¸‹åŠŸèƒ½ï¼š[https://nccdev.yonyou.com/devtools/action/search](javascript:void(0))</p> <p>(2)é€šè¿‡æœç´¢å®šä½ï¼šéœ€è¦å…ˆç¡®å®šè¯·æ±‚çš„è·¯å¾„ï¼Œé€šè¿‡ä»£ç æˆ–è€…æµè§ˆå™¨é‡Œé¢çš„networkï¼Œä¾‹å¦‚ä¸‹å›¾è¯·æ±‚è·¯å¾„æ˜¯/nccloud/platform/total/switch.do
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=Yy1kOiDRXk&amp;fid=362980571089200&amp;width=1200&amp;height=800&amp;type=min" alt="3.png">
åˆ™æˆ‘ä»¬åªéœ€è¦æ‰¾actioné…ç½®è·¯å¾„ä¸ºplatform.total.switchå³å¯é€šè¿‡actioné…ç½®æ‰¾åˆ°å¯¹åº”çš„nameã€clazzå°±å¯ä»¥æ‰¾åˆ°å¯¹åº”çš„ç±»ã€‚ä½¿ç”¨notepad++-&gt;æœç´¢-&gt;æ–‡ä»¶ä¸­æŸ¥æ‰¾-&gt;æŸ¥æ‰¾ç›®æ ‡ï¼šplatform.total.switchï¼Œæ–‡ä»¶ç±»å‹*.xmlï¼Œç›®å½•home\hotwebs\nccloud\WEB-INF\extend\yyconfig\modulesï¼Œæœç´¢åä¼šæ‰¾åˆ°å¯¹åº”çš„é…ç½®åŠclassæ–‡ä»¶
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=yo9se2rJS30&amp;fid=362980571089201&amp;width=1200&amp;height=800&amp;type=min" alt="4.png"> <img src="https://nccdev.yonyou.com/shareThumbnail?shareId=eEefMTTiSH0&amp;fid=362980571089202&amp;width=1200&amp;height=800&amp;type=min" alt="5.png"></p> <p>ï¼ˆ3ï¼‰é€šè¿‡å½•spræ—¥å¿—æ–¹å¼æŸ¥æ‰¾ï¼šé€šè¿‡å½•spræ—¥å¿—å¯ä»¥æ‰¾åˆ°remoteCallPathåŠremoteCallActionï¼Œéƒ¨åˆ†è€çš„ç‰ˆæœ¬ä¸æ”¯æŒã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=LO4UeJzuRyI&amp;fid=362980571089203&amp;width=1200&amp;height=800&amp;type=min" alt="6.png"></p> <h3 id="_3-8-å¤–éƒ¨äº¤æ¢å¹³å°æŠ¥é”™-ä¸æ­£ç¡®çš„ç”¨æˆ·ç±»å‹">3.8 å¤–éƒ¨äº¤æ¢å¹³å°æŠ¥é”™â€œä¸æ­£ç¡®çš„ç”¨æˆ·ç±»å‹â€</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> &amp;operator=ç”¨æˆ·ä¸»é”®
å¤–éƒ¨äº¤æ¢å¹³å°å¯¼å…¥ï¼Œéœ€è¦åœ¨urlåé¢æ·»åŠ ç”¨æˆ·å‚æ•°operatorï¼Œåé¢çš„æ˜¯ç”¨æˆ·çš„ä¸»é”®ï¼Œæ ¹æ®è‡ªå·±éœ€è¦å¡«å†™ç”¨æˆ·ä¸»é”®ã€‚ç¤ºä¾‹ï¼š<code>&amp;operator=1001A110000000002QZ3</code></p> <h3 id="_3-9-å¤–éƒ¨äº¤æ¢å¹³å°æŠ¥é”™-ä»åå°è¯»å–äº¤æ¢è§„åˆ™å®šä¹‰æ–‡ä»¶å‘ç”Ÿé”™è¯¯-è¯·æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨">3.9 å¤–éƒ¨äº¤æ¢å¹³å°æŠ¥é”™â€œä»åå°è¯»å–äº¤æ¢è§„åˆ™å®šä¹‰æ–‡ä»¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼â€</h3> <p>æ–‡ä»¶é…ç½®é”™è¯¯:æ–‡ä»¶è·¯å¾„ 263X,å¼‚å¸¸ä¿¡æ¯:ä»åå°è¯»å–äº¤æ¢è§„åˆ™å®šä¹‰æ–‡ä»¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼&quot;,&quot;errorStack&quot;:&quot;nc.vo.pfxx.exception.FileConfigException: æ–‡ä»¶é…ç½®é”™è¯¯:æ–‡ä»¶è·¯å¾„ 263X,å¼‚å¸¸ä¿¡æ¯:ä»åå°è¯»å–äº¤æ¢è§„åˆ™å®šä¹‰æ–‡ä»¶å‘ç”Ÿé”™è¯¯ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼
nc.bs.pfxx.xxconfig.FileConfigInfoReadFacadeImp.getSchemeDefinationFromXML(FileConfigInfoReadFacadeImp.java:322)
nc.bs.pfxx.xxconfig.FileConfigInfoReadFacadeImp.getSchemeDefinationFromXML(FileConfigInfoReadFacadeImp.java:208)
nc.bs.pfxx.xxconfig.FileConfigInfoReadFacade.getSchemeDefinationFromXML(FileConfigInfoReadFacade.java:70)
nc.bs.pfxx.XChangeContext.initBillDefination(XChangeContext.java:131)
nc.bs.pfxx.XChangeContext.init(XChangeContext.java:98)
nc.bs.pfxx.XChangeContext.init(XChangeContext.java:73)
nc.bs.pfxx.XChangeContext.init(XChangeContext.java:79)</p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> ä¸€èˆ¬æ˜¯æ ¡éªŒæ–‡ä»¶ä¸å­˜åœ¨ã€‚ æ£€æŸ¥<code>select * from xi_billdefine where billtype='æŠ¥é”™æç¤ºçš„ç±»å‹'</code> å¦‚æœæ²¡æœ‰éœ€è¦ä»å…¶ä»–ç¯å¢ƒå¯¼å…¥è¿›æ¥ã€‚</p> <h3 id="_3-10-ç™»å½•é¡µé¢platform-total-switchè¯·æ±‚403-æ— æ•ˆçš„è¯·æ±‚">3.10 ç™»å½•é¡µé¢platform/total/switchè¯·æ±‚403ï¼Œâ€œæ— æ•ˆçš„è¯·æ±‚!â€</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=yvKdMXjmQuo&amp;fid=362980571101056&amp;width=1200&amp;height=800&amp;type=min" alt="488e2590a8c271d1cca118861233d35.png"></p> <p><em><strong>è§£å†³æ–¹æ³•ï¼š</strong></em> åº”è¯¥æœ‰å¤šä¸ªplatform/total/switch è¯·æ±‚ï¼Œå¦‚æœèƒ½æ­£å¸¸ç™»å½•å¯ä»¥ä¸ç”¨ç®¡ã€‚å¦‚æœç™½å±æŒ¨ä¸ªæ£€æŸ¥ä¸€ä¸‹è¿”å›ä¿¡æ¯ã€‚å¦‚æœæœ‰æç¤ºç±»åç§°åˆ™æ£€æŸ¥è¯¥ç±»æ˜¯å¦å­˜åœ¨ï¼Œç¡®å®šå­˜åœ¨ç›¸åº”çš„ç±»æ›´æ–°ç±»è·¯å¾„ï¼Œé‡å¯æœåŠ¡ç„¶åå†è¯•ã€‚</p> <h3 id="_3-11-å‘å¸ƒwebserivceåè®¿é—®wsdlåœ°å€-æŠ¥é”™java-lang-classcastexception-nc-uap-ws-engine-engine-cannot-be-cast-to-nc-uap-ws-bus">3.11 å‘å¸ƒwebserivceåè®¿é—®wsdlåœ°å€ï¼ŒæŠ¥é”™java.lang.ClassCastException: nc.uap.ws.engine.Engine cannot be cast to nc.uap.ws.Bus</h3> <p><em><strong>è§£å†³æ–¹æ³•ï¼š</strong></em> å‚è€ƒé—®é¢˜ [https://nccdev.yonyou.com/qa/detail/879](javascript:void(0))
å°†home\modules\uapfw\META-INF\module.xmlä¸­çš„å†…å®¹æ”¹ä¸ºå¦‚ä¸‹</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>    <span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;gb2312&quot;?&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>uapfw<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>public</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>public</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>private</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>private</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>é‡å¯æœåŠ¡ã€‚</p> <h2 id="_4-æ‰“å°">4 æ‰“å°</h2> <h3 id="_4-1-æ‰“å°æ—¶æç¤ºè¯¥ç½‘é¡µæ— æ³•æ­£å¸¸è¿ä½œ-http-error-401">4.1 æ‰“å°æ—¶æç¤ºè¯¥ç½‘é¡µæ— æ³•æ­£å¸¸è¿ä½œï¼ŒHTTP ERROR 401</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=gZFSO4iFTqk&amp;fid=362980571089130&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> æ²¡æœ‰æ”¾é‰´æƒæ–‡ä»¶ï¼Œå‚è€ƒå‰é¢é—®é¢˜actionè¯·æ±‚æŠ¥é”™ 401 Unauthorizedæˆ–è€… å‚è€ƒæ ¡éªŒç±»nccloud.framework.core.filter.AppActionAuthorizeFilter ã€‚</p> <h2 id="_5-ç¯å¢ƒ">5 ç¯å¢ƒ</h2> <h3 id="_5-1-å¯åŠ¨ç¯å¢ƒåˆ°ä¸€åŠå°±åœæ­¢">5.1 å¯åŠ¨ç¯å¢ƒåˆ°ä¸€åŠå°±åœæ­¢</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=2awwqHAgQ2M&amp;fid=362980571088629&amp;width=1200&amp;height=800&amp;type=min" alt="b608ecb4ed79240d42b72da64b6a5b0.jpg">
Java HotSpot(TM) 64-Bit Server VM warning: ignoring option MaxPermSize=256m; support was removed in 8.0
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=QjX0shvfS9s&amp;fid=362980571088651&amp;width=1200&amp;height=800&amp;type=min" alt="image.png">
çº¢è‰²æŠ¥é”™éƒ¨åˆ†å…¶å®å¹¶æ²¡æœ‰å½±å“ï¼Œé—®é¢˜å‡ºåœ¨åè®®åˆå§‹åŒ–ã€‚</p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> (1)æ£€æŸ¥ipåœ°å€æˆ–ç«¯å£ï¼ŒIPåœ°å€åº”è¯¥é…æˆ127.0.0.1æˆ–è€…ä¸ºç©ºã€‚
è¿˜æœ‰å¯èƒ½ç«¯å£è¢«å ç”¨äº†ï¼Œæ£€æŸ¥å“ªä¸ªç¨‹åºå ç”¨ç«¯å£å…³æ‰æˆ–è€…æ¢ä¸ªå¯åŠ¨ç«¯å£ ã€‚
ipåœ°å€å’Œå¯åŠ¨ç«¯å£åœ¨home\bin\sysconfig.bat åŒå‡»æ‰§è¡Œåçš„ã€æœåŠ¡å™¨ä¿¡æ¯ã€‘é‡Œé…ç½®ã€‚
(2) å¦‚æœå¼€å‘å·¥å…·å¡æ­»å¼ºåˆ¶å…³é—­ã€é‡å¤å¯åŠ¨ä¹Ÿæœ‰å¯èƒ½å‡ºç°è¿™ç§æƒ…å†µï¼Œæ³¨æ„æ£€æŸ¥ä¸€ä¸‹ã€‚</p> <h3 id="_5-2-ç¯å¢ƒå¯åŠ¨ä¸€ç›´å¡åœ¨esa-server-starting">5.2 ç¯å¢ƒå¯åŠ¨ä¸€ç›´å¡åœ¨ESA Server starting</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=ZVyQP6ZqQfM&amp;fid=362980571096159&amp;width=1200&amp;height=800&amp;type=min" alt="bb68c3751c4b08aeee53c7cd867eeb8.jpg"></p> <p><em><strong>è§£å†³æ–¹æ³•ï¼š</strong></em> home\bin\sysconfig.batåŒå‡»æ‰§è¡Œåæ£€æŸ¥ã€æœåŠ¡å™¨ä¿¡æ¯ã€‘é‡Œé…ç½®ã€‚
è¯»å–åæ­£ç¡®çš„åº”è¯¥ä¸ºä¸‹é¢çš„å•æœåŠ¡å™¨ï¼Œå¦‚æœæ˜¯é€‰æ‹©äº†é›†ç¾¤æœåŠ¡å™¨å¯èƒ½ä¼šå‡ºç°è¯¥é—®é¢˜ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=GeBbO0tFQE&amp;fid=362980571096160&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_5-3-ä¿®æ”¹ç«¯å£å·ä¸ç”Ÿæ•ˆ-æ— è®ºæ€ä¹ˆä¿®æ”¹-æœåŠ¡å¯åŠ¨æ—¶å§‹ç»ˆæ˜¯80ç«¯å£ã€‚">5.3 ä¿®æ”¹ç«¯å£å·ä¸ç”Ÿæ•ˆï¼Œæ— è®ºæ€ä¹ˆä¿®æ”¹ï¼ŒæœåŠ¡å¯åŠ¨æ—¶å§‹ç»ˆæ˜¯80ç«¯å£ã€‚</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> ã€æœåŠ¡å™¨åç§°ã€‘è®¾ç½®äº†åå­—ï¼Œæœ¬åœ°å¼€å‘æ—¶åº”è®¾ç½®ä¸ºserverï¼Œè§ä¸‹å›¾ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=B2prsuIBSzA&amp;fid=362980571088652&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>å¦‚æœä½¿ç”¨å¼€å‘å·¥å…·èµ·æœåŠ¡ï¼Œå¯ä»¥åœ¨å¯åŠ¨å‚æ•°é‡Œé¢æŒ‡å®šå¯åŠ¨ç«¯å£ï¼š<code>-Dnc.http.port=8090</code></p> <h3 id="_5-4-ç™»é™†æ—¶æç¤º-éæ³•ç™»é™†">5.4 ç™»é™†æ—¶æç¤ºâ€œéæ³•ç™»é™†â€</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=RNqqV3w4TxQ&amp;fid=362980571089112&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> æµè§ˆå™¨åœ°å€æ localhostæ”¹æˆ127.0.0.1</p> <h3 id="_5-5-ç™»é™†æ—¶æç¤º-å®‰å…¨æ—¥å¿—æ•°æ®æºå¼‚å¸¸-è¯·è”ç³»ç¯å¢ƒç®¡ç†å‘˜å¤„ç†">5.5 ç™»é™†æ—¶æç¤ºâ€œå®‰å…¨æ—¥å¿—æ•°æ®æºå¼‚å¸¸ï¼Œè¯·è”ç³»ç¯å¢ƒç®¡ç†å‘˜å¤„ç†â€</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=H42hCCUISu8&amp;fid=362980571090587&amp;width=1200&amp;height=800&amp;type=min" alt="627f537f89dd2b8a761c9b207ce7b0e.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong>
ï¼ˆ1ï¼‰ æ£€æŸ¥home\bin\sysConfig.bat é…ç½®å·¥å…·æœ‰æ²¡æœ‰é…ç½®å®‰å…¨æ—¥å¿—æ•°æ®æºã€‚å·¦ä¾§çš„é¡µç­¾æ•°æ®æºã€å®‰å…¨æ—¥å¿—æ•°æ®æºé…ç½®å®Œæˆåéœ€è¦é‡å¯æœåŠ¡éªŒè¯ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=TJbrlGhgQis&amp;fid=362980571090588&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>ï¼ˆ2ï¼‰ç™»é™†é¡µé¢æŒ‰F12æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œå¦‚æœå‡ºç°å¦‚ä¸‹æŠ¥é”™ä¿¡æ¯
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=FAKccv1Sf8&amp;fid=362980571096161&amp;width=1200&amp;height=800&amp;type=min" alt="5631e0a79030e88f2b20597967a002b.jpg">
åŸå› æ˜¯ç™»é™†é¡µé¢æ‰“å¼€æ—¶ä¼šæœ‰ç™»é™†åˆå§‹åŒ–è¿‡ç¨‹ï¼Œåˆå§‹åŒ–åå°æŠ¥é”™ä½†æ˜¯åå°ä½¿ç”¨try...catchæŠŠå¼‚å¸¸ä¿¡æ¯åƒæ‰äº†ï¼Œå¯¼è‡´éƒ¨åˆ†å­—æ®µä¿¡æ¯ä¸¢å¤±ã€‚å¯ä»¥åˆ°nccloud.web.riart.login.action.LoginInitActionç±»çš„processRSAæ–¹æ³• è·Ÿä»£ç è§£å†³ã€‚</p> <p>è¿™é‡Œä»‹ç»ä¸€ä¸ªå¸¸è§çš„åœºæ™¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºæ‰§è¡ŒRSAUtilsFromDB.getRSAPublicKeyæ—¶æŠ¥é”™ï¼ŒåŸå› æ˜¯jaråŒ…å†²çªå¯¼è‡´ã€‚æ­£å¸¸çš„åº”è¯¥æ˜¯ä½¿ç”¨external/libä¸‹çš„commons-codecé‡Œé¢çš„Hexç±»ï¼Œå®é™…å¯èƒ½è·Ÿåˆ«çš„jarå†²çªï¼ˆæœ‰å¤šä¸ªorg.apache.commons.codec.binary.Hexç±»ï¼‰ï¼Œèµ°äº†å…¶ä»–jaråŒ…é‡Œé¢ç±»å¯¼è‡´é—®é¢˜ã€‚åªéœ€è¦è°ƒæ•´é¡¹ç›®é‡Œé¢.classpathå…ˆåé¡ºåºï¼Œé‡æ–°å¯åŠ¨é¡¹ç›®å³å¯ï¼Œå¦‚æœæœ‰é¢å¤–æ·»åŠ çš„jaråŒ…éœ€è¦è®¤çœŸæ£€æŸ¥åˆ é™¤ä¸ç”¨çš„jaråŒ…ã€‚</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=H3UrG4tuSLo&amp;fid=362980571096162&amp;width=1200&amp;height=800&amp;type=min" alt="02d6ae5284f57273f71dd93d87e4ad7.jpg"> <img src="https://nccdev.yonyou.com/shareThumbnail?shareId=WkqopwBjQy4&amp;fid=362980571096163&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>ï¼ˆ3ï¼‰å¦‚æœæ’é™¤äº†1ã€2ä¸¤ç§æƒ…å†µã€‚æŒ‰ç…§ä¸‹é¢æ–¹æ³•è§£å†³ï¼š</p> <p>å…ˆåˆ°æ•°æ®åº“é‡Œé¢æŠŠ sm_securitylognameã€sm_securitylog_strategyã€sm_init_data<strong>è¿™å‡ å¼ è¡¨åšä¸€ä¸‹å¤‡ä»½</strong>ï¼Œç„¶åæŠŠsm_init_dataè¡¨ä»æ•°æ®åº“dropæ‰ã€‚</p> <p>ç”¨è®°äº‹æœ¬æ‰“å¼€sysConfig.batè„šæœ¬ã€‚åœ¨å¦‚ä¸‹ä½ç½®åŠ å…¥å‘½ä»¤ï¼š</p> <div class="language-bat line-numbers-mode"><pre class="language-text"><code>REM  è¿™é‡Œè®¾ç½®JAVA_HOMEä½¿ç”¨homeé‡Œçš„ufjdk
REM  æ ¹æ®è‡ªå·±homeçš„ä½ç½®è‡ªè¡Œè°ƒæ•´
set JAVA_HOME=D:\devsoft\21NCC2105\ncchome_0710\ufjdk
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=fDP81FUZQuc&amp;fid=362980571090589&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>ä¿å­˜åå†æ¬¡æ‰“å¼€sysConfig.baté…ç½®å·¥å…·ï¼Œå·¦ä¾§é€‰æ‹©å®‰å…¨æ—¥å¿—æ•°æ®æºï¼Œå¯ä»¥çœ‹åˆ°åˆå§‹åŒ–æ•°æ®æºæŒ‰é’®å¯ç”¨ï¼Œç‚¹å‡»åˆå§‹åŒ–ã€‚ç„¶åé‡å¯NCCæœåŠ¡ã€‚</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=e7fmKGLzTBA&amp;fid=362980571090590&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_5-6-è¶…çº§ç®¡ç†å‘˜ç™»é™†æç¤º-nc-bs-framework-tool-config-upgrade-confupgradexml-æˆ–è€…æ—¥å¿—æç¤º-nc-bs-framework-tool-config-upgrade-confupgradexml">5.6 è¶…çº§ç®¡ç†å‘˜ç™»é™†æç¤ºï¼šâ€œnc.bs.framework.tool.config.upgrade.ConfUpgradeXMLâ€ æˆ–è€…æ—¥å¿—æç¤ºâ€œnc/bs/framework/tool/config/upgrade/ConfUpgradeXMLâ€</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> ä¸€èˆ¬æ˜¯æœ¬åœ°å¼€å‘ç¯å¢ƒç™»é™†è¶…çº§ç®¡ç†å‘˜çš„æ—¶å€™æŠ¥çš„é”™ã€‚åŸå› æ˜¯ç±»æ‰¾ä¸åˆ°ï¼ŒConfUpgradeXMLæ˜¯äº‘åŸç”Ÿç¯å¢ƒé‡Œé¢ç”¨åˆ°çš„ï¼Œä¸€èˆ¬çš„å•æœºç¯å¢ƒç”¨ä¸åˆ°è¿™ä¸ªç±»ã€‚å…ˆæ£€æŸ¥home\ierp\bin\nativeconfig\runningOnCloud.properties é‡Œé¢å€¼æ˜¯å¦ä¸ºfalseï¼Œå¦‚æœæ˜¯trueæ”¹ä¸ºfalseã€‚å¦‚æœæ£€æŸ¥æ²¡æœ‰é—®é¢˜åˆ™æ‰“å¼€nccloud.web.riart.login.action.LoginInitActionæ£€æŸ¥doActionæ–¹æ³•ï¼Œthis.init()åŠ åˆ¤æ–­å¤„ç†ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// æ˜¯å¦ç™»å½•ç³»ç»Ÿç®¡ç†</span>
<span class="token class-name">String</span> isAdmin <span class="token operator">=</span> requestDto<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;isAdmin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
* äº‘åŸç”Ÿæ‰èµ°
*/</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;true&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>isAdmin<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token class-name">RuntimeEnv</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isRunningOnCloud</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=3a0kfbLGSNo&amp;fid=362980571090591&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_5-7-é¡µé¢æç¤º-æŠ±æ­‰-æ‚¨è¯·æ±‚çš„é¡µé¢å‡ºé”™å•¦">5.7 é¡µé¢æç¤ºâ€œæŠ±æ­‰ï¼Œæ‚¨è¯·æ±‚çš„é¡µé¢å‡ºé”™å•¦ï¼â€</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=ddtjvhWT2c&amp;fid=362980571089115&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <img src="https://nccdev.yonyou.com/shareThumbnail?shareId=yGdDYE5mRb4&amp;fid=362980571089116&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong>
(1)å¦‚æœæ˜¯åœ¨åœ°å€æ é‡Œé¢è¾“å…¥[http://localhost:3006/nccloud](javascript:void(0)) åœ°å€åæç¤ºï¼Œè¯´æ˜æ²¡æœ‰ä½¿ç”¨æ­£ç¡®çš„å¯åŠ¨å‚æ•°ï¼Œå¯åŠ¨å‚æ•°é‡Œé¢éœ€è¦æœ‰ <code>-Duap.hotwebs=nccloud,fs</code>ã€‚åœ¨hotwebsæ–‡ä»¶å¤¹ä¸‹æœ‰å¤šä¸ªwebå·¥ç¨‹ï¼Œå¦‚æœéœ€è¦èµ·å“ªä¸ªæœåŠ¡ï¼Œå°±æŠŠå“ªä¸ªé…è¿›å»ï¼Œä¾‹å¦‚fsæ˜¯æ–‡ä»¶æœåŠ¡ã€‚</p> <p>(3)å¦‚æœé…ç½®äº†å¯åŠ¨nccloud ä¾ç„¶æŠ¥é”™ï¼Œæ£€æŸ¥å¯åŠ¨æœåŠ¡è¿‡ç¨‹æœ‰æ²¡æœ‰æŠ¥é”™ï¼Œå¿…é¡»å…ˆè§£å†³æŠ¥é”™çš„é—®é¢˜ã€‚</p> <p>(4) å¦‚æœæ˜¯åœ¨æ‰“å¼€æŸä¸ªèŠ‚ç‚¹æ—¶æŠ¥çš„é”™ï¼Œè¯´æ˜åœ°å€æ é‡Œé¢ç«¯å£æ˜¯åç«¯çš„ç«¯å£ï¼Œæ²¡æœ‰ä½¿ç”¨å‰ç«¯å·¥ç¨‹çš„ç«¯å£ã€‚æ­£ç¡®çš„åšæ³•åº”è¯¥æ­å»ºå‰ç«¯å·¥ç¨‹ï¼Œæµè§ˆå™¨è®¿é—®æ—¶ä½¿ç”¨å‰ç«¯é…å¥½çš„ç«¯å£ã€‚</p> <p>(5) <strong>å¦‚æœä¸ä¿®æ”¹å‰ç«¯ç•Œé¢ï¼Œåªå¼€å‘åç«¯</strong>ï¼Œå¯ä»¥æŒ‰ä¸‹é¢æ–¹æ³•è§£å†³ï¼Œæµè§ˆå™¨è®¿é—®æ—¶ä½¿ç”¨åç«¯çš„ç«¯å£å³å¯ï¼š</p> <p>è¿™é‡Œä»¥äººå‘˜èŠ‚ç‚¹ä¸ºä¾‹ï¼Œå¦‚æœé¼ æ ‡å³é”®-&gt;æ£€æŸ¥å…ƒç´ å¯ä»¥æ‰¾åˆ° <code>&lt;iframe fieldid=&quot;main_iframe&quot; id=&quot;mainiframe&quot; frameborder=&quot;0&quot; scrolling=&quot;0&quot; src=&quot;/uapbd/psninfo/psndoc/main/index.html&quot; style=&quot;width: 100%; height: 100%;&quot;&gt;&lt;/iframe&gt;</code>ï¼ŒæŠŠsrc=&quot;&quot;è¿™æ®µæ”¹æˆ&quot;/nccloud/resources/uapbd/psninfo/psndoc/main/index.html&quot;ï¼ŒåŠ ä¸Š/nccloud/resourcesè¿™ä¸ªæ—¶å€™å°±èƒ½è®¿é—®äº†ã€‚</p> <p>è¿˜æœ‰ä¸€ä¸ªåŠæ³•å°±æ˜¯å¯åŠ¨å‚æ•°é‡Œé¢æ·»åŠ ä¸€å¥<code>-Dnc.HomeFront=true</code> ï¼Œè¿™æ ·æ‰“å¼€ç•Œé¢æ—¶ä¼šè‡ªåŠ¨ä¿®æ”¹è·¯å¾„èµ°homeé‡Œé¢çš„é¡µé¢ï¼Œéœ€è¦NCC2111ç‰ˆæœ¬åŠæ›´é«˜ç‰ˆæœ¬æœ‰æ•ˆï¼ˆå¦‚æœéœ€è¦ä¿®æ”¹å‰ç«¯ç•Œé¢æ—¶æ³¨æ„ä¸è¦åŠ è¿™ä¸ªå‚æ•°ï¼šé˜²æ­¢èµ°homeé‡Œé¢ä»£ç å‰ç«¯ä¿®æ”¹ä¸ç”Ÿæ•ˆï¼‰ã€‚</p> <h3 id="_5-8-ä½¿ç”¨deployéƒ¨ç½²æ—¶æŠ¥é”™-æç¤ºfilenotfoundexception-hotwebs-nccloud-web-inf-extend-yyconfig-modules-hrpub-refer-config-action-refer-hrpub-xml">5.8 ä½¿ç”¨deployéƒ¨ç½²æ—¶æŠ¥é”™ï¼Œæç¤ºFileNotFoundException: .\hotwebs\nccloud\WEB-INF\extend\yyconfig\modules\hrpub\refer\config\action\refer_hrpub.xml</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=mdvOeAamQBg&amp;fid=362980571088715&amp;width=1200&amp;height=800&amp;type=min" alt="211495d805c2f32f6d86a86325c1b2a.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> éƒ¨ç½²å·¥å…·é—®é¢˜ï¼Œæ¢å·¥å…·åŒ…ï¼š [https://pan.yonyou.com/web/share.html?hash=mJ0LpdY6TU8](javascript:void(0))</p> <h3 id="_5-9-component-xxxxxxx-detail-message-the-tx-component-xxxxxxx-is-not-found-in-jndi-please-deploy-it-jndiname-xxxxxxx-meta-null">5.9 Component: xxxxxxx,Detail Message: The tx component: xxxxxxx is not found in jndi please deploy it!} jndiName: xxxxxxx meta: null</h3> <p>å…¶ä¸­xxxæ˜¯æ¥å£ç±»è·¯å¾„ï¼Œä¾‹å¦‚ä¸‹é¢æˆªå›¾ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=hLDOtiQ4&amp;fid=362980571088709&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> æ¥å£çš„upmæ–‡ä»¶æ²¡æœ‰éƒ¨ç½²ã€‚æ£€æŸ¥æ–¹æ³•ï¼š</p> <p>(1) å°†upmæ–‡ä»¶æ”¾åˆ°home\modules\æ¨¡å—\META-INF\ æ–‡ä»¶å¤¹é‡Œé¢ï¼Œé‡å¯åå°æœåŠ¡å³å¯ã€‚</p> <p>(2) å¦‚æœæ˜¯æ–°å¼€å‘çš„ä¸€ä¸ªæ¨¡å—ï¼Œæ£€æŸ¥home\modules\æ¨¡å—\META-INF\module.xmlï¼Œ<strong>æœ‰æ²¡æœ‰module.xmlï¼Œè·¯å¾„æ¨¡å—åç§°æ˜¯å¦è‹±æ–‡å­—ç¬¦å…¨éƒ¨å°å†™</strong>ã€‚æ–‡ä»¶å†…å®¹æ ¼å¼å¦‚ä¸‹</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;gb2312&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>æ¨¡å—å<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- è¿™é‡Œæ¨¡å—åè¦å¯¹åº”ä¸Šï¼Œè‹±æ–‡å…¨å°å†™ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>public</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>public</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>private</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>private</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ç¡®å®šæœ‰module.xmlæ–‡ä»¶åï¼Œåœ¨home\bin\sysconfig.bat-&gt;éƒ¨ç½²-&gt;æ¨¡å—å…¨é€‰åéƒ¨ç½²ï¼Œé‡å¯æœåŠ¡å³å¯ã€‚</p> <p>(3)å¦‚æœæ˜¯æœ¬åœ°å¼€å‘å·¥å…·å¯åŠ¨çš„æœåŠ¡ï¼Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„ï¼Œå¼€å‘å·¥å…·windows-&gt;Preferenceï¼ˆæˆ–è€…é¦–é€‰é¡¹ï¼‰-&gt;NC Cloudé›†æˆå¼€å‘-&gt;æ¨¡å—é€‰æ‹©ã€‚
ä¹Ÿå°±æ˜¯é…ç½®æ•°æ®æºçš„ç•Œé¢ï¼Œå¯¹åº”æœ‰å¤šä¸ªé¡µç­¾å…¶ä¸­æœ‰ä¸ªæ¨¡å—é€‰æ‹©ï¼Œè‡ªå·±çš„upmåœ¨å“ªä¸ªæ¨¡å—ä¸‹å°±è¦æŠŠå¯¹åº”çš„æ¨¡å—å‹¾ä¸Šã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=PmF8x0q0Tbk&amp;fid=362980571089298&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>(4) upmæ–‡ä»¶å†…å®¹ä¸ç¬¦åˆæ ¼å¼è¦æ±‚ã€ç±»è·¯å¾„å¡«å†™é”™è¯¯ï¼Œéœ€è¦è®¤çœŸæ£€æŸ¥ã€‚</p> <p>(5) Serviceæ¥å£æˆ–ServiceImplç±»æœ‰é”™è¯¯ã€ç±»æ‰¾ä¸åˆ°æˆ–è€…ServiceImplä½¿ç”¨äº†æœ‰å‚æ„é€ å‡½æ•°å´æ²¡æä¾›æ— å‚æ„é€ å‡½æ•°ç­‰æƒ…å†µä¹Ÿæœ‰å¯èƒ½å¼•å‘è¯¥ç§æƒ…å†µã€‚å¯ä»¥åˆ°<strong>nclogs\server\serverstart-log.log</strong>é‡Œè¿›è¡Œæ’æŸ¥ï¼Œå»ºè®®å…ˆæŠŠåŸæ¥çš„æ—¥å¿—å¤‡ä»½ååˆ é™¤ï¼Œé‡å¯æœåŠ¡é¿å…ä»¥å¾€æ—¥å¿—å½±å“åˆ†æã€‚</p> <p>è¿™é‡Œä¸¾ä¸€ä¸ªä¾‹å­ï¼Œçœ‹ä¸‹é¢ä¸€æ®µå–è‡ªserverstart-log.logçš„æ—¥å¿—ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$$ts=2022-01-08 19:26:34  $$msg=###å¼€å§‹éƒ¨ç½²æ¨¡å—::lcdp 
$$ts=2022-01-08 19:26:34  $$msg=info: module=lcdp, error at D:\devsoft\20codefactory\20210910\modules\lcdp\META-INF\msagg1to0_mastervo.upm &lt;module/public/component/interface&gt;, catch root &lt;module/public/component&gt; 
java.lang.ClassNotFoundException: nc.itf.lcdp.msagg1to0.mastervo.IQuery21ForAGGXZC10
	at java.net.URLClassLoader.findClass(URLClassLoader.java:382) ~[?:1.8.0_202]
	at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[?:1.8.0_202]
	at nc.bs.framework.loading.ModulePrivateClassLoader.loadClass(ModulePrivateClassLoader.java:92) ~[fwserver.jar:?]
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä»æ—¥å¿—å¯ä»¥çœ‹åˆ°æœ‰éƒ¨ç½²æ¨¡å—lcdpï¼ŒæŒ‡å‡ºå¯¹åº”çš„upmæ–‡ä»¶æ˜¯msagg1to0_mastervo.upmï¼Œé”™è¯¯åŸå› æ˜¯nc.itf.lcdp.msagg1to0.mastervo.IQuery21ForAGGXZC10ç±»æ‰¾ä¸åˆ°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±è¯¥å»æ£€æŸ¥è¿™ä¸ªç±»æœ‰æ²¡æœ‰ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰æ‰¾åˆ°ã€‚å¦‚æœæ²¡æœ‰å¯¹åº”upmæ–‡ä»¶çš„æŠ¥é”™ï¼Œåˆ™åº”è¯¥æ£€æŸ¥æœ‰æ²¡æœ‰<code>###å¼€å§‹éƒ¨ç½²æ¨¡å—::xxxx</code>å­—æ ·ï¼Œå¦‚æœæ²¡æœ‰è¯´æ˜æ²¡æœ‰éƒ¨ç½²è¯¥æ¨¡å—ï¼Œéœ€è¦å‚è€ƒå‰é¢å‡ æ¡è§£å†³æ–¹æ³•ã€‚</p> <h3 id="_5-10-å‰å°æŠ¥é”™-æ‰¾ä¸åˆ°æ´»åŠ¨å-xxx-xxx-xxxæ‰€å¯¹åº”çš„å¤„ç†ç±»">5.10 å‰å°æŠ¥é”™ â€œ æ‰¾ä¸åˆ°æ´»åŠ¨åï¼šxxx/xxx/xxxæ‰€å¯¹åº”çš„å¤„ç†ç±» â€</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> ä¸€èˆ¬æŠ¥é”™çš„ç±»ä¸ºnccloud.framework.web.action.define.ActionResourceï¼Œè¡¨æ˜æ²¡æœ‰æ‰¾åˆ°è¯¥è¯·æ±‚å¯¹åº”è·¯å¾„çš„actioné…ç½®æ–‡ä»¶ã€‚</p> <p>(1)å¦‚æœæ˜¯è‡ªå·±å®¢å¼€çš„actionï¼Œæ£€æŸ¥æ˜¯å¦æ”¾äº†actioné…ç½®æ–‡ä»¶ï¼Œæ–‡ä»¶æ ¼å¼æ˜¯å¦ç¬¦åˆxmlæ ¼å¼è¦æ±‚ï¼Œé…ç½®æ–‡ä»¶å†…å®¹æœ‰è¯¯ä¹Ÿå¯èƒ½ä¼šåŠ è½½ä¸åˆ°actioné…ç½®ã€‚</p> <p>(2)action xmlçš„æ”¾ç½®è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œæ­£ç¡®çš„åº”è¯¥ä¸ºhome\hotwebs\nccloud\WEB-INF\extend\yyconfig\modules\æ¨¡å—\ç»„ä»¶\config\action\xxxxx.xml</p> <p>(3)å¦‚æœæ˜¯æ ‡å‡†äº§å“é‡Œé¢çš„action(å³ç³»ç»Ÿè‡ªå¸¦actionä¸æ˜¯å®¢å¼€çš„)ï¼Œåˆ™æ£€æŸ¥æœ‰æ²¡æœ‰å¯¹åº”çš„actioné…ç½®ï¼Œå¯ä»¥ä½¿ç”¨notepad++ æœç´¢-åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾åŠŸèƒ½ï¼Œæœç´¢å†…å®¹æŠŠè·¯å¾„é‡Œé¢çš„/æ›¿æ¢æˆ.</p> <p>ä¾‹å¦‚æœæŠ¥é”™æç¤ºè·¯å¾„ä¸ºplatform/gzip/switchåˆ™æœç´¢å†…å®¹ä¸ºplatform.gzip.switchï¼Œæ–‡ä»¶ç±»å‹ä¸º*.xmlï¼Œæœç´¢è·¯å¾„home\hotwebs\nccloud\WEB-INF\extend\yyconfig\modules å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=xTODWzgSZI&amp;fid=362980571089912&amp;width=1200&amp;height=800&amp;type=min" alt="image.png">
å¦‚æœæ‰¾ä¸åˆ°è¯´æ˜æ²¡æœ‰ç”¨depolyå·¥å…·è¿›è¡Œéƒ¨ç½²ï¼Œå› ä¸ºä½¿ç”¨deployå·¥å…·éƒ¨ç½²æ—¶é™¤äº†ä¼šç§»åŠ¨jaråŒ…å¤–è¿˜ä¼šè§£å‹jaråŒ…é‡Œé¢çš„yyconfigï¼Œå³actioné…ç½®å’Œé‰´æƒé…ç½®ã€‚è§£å†³æ–¹æ³•æ˜¯æŠŠhome\external\libé‡Œé¢uiå¼€å¤´çš„jaråŒ…æ”¾å›åŸæ¥ä½ç½®ï¼ˆå³home\hotwebs\nccloud\WEB-INF\libï¼‰ï¼Œæ³¨æ„å…³é—­æœåŠ¡åŠå¼€å‘å·¥å…·é˜²æ­¢æ–‡ä»¶å ç”¨ç„¶åä½¿ç”¨éƒ¨ç½²å·¥å…·ï¼ˆ[https://pan.yonyou.com/web/share.html?hash=mJ0LpdY6TU8ï¼‰é‡æ–°éƒ¨ç½²ä¸€ä¸‹ï¼Œéƒ¨ç½²å®Œæˆè®°å¾—é‡å¯æœåŠ¡ã€‚](javascript:void(0))</p> <p>(4)æ”¾å®Œactioné…ç½®æ–‡ä»¶åéœ€è¦é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆã€‚</p> <p>(5) actioné…ç½®æ–‡ä»¶è·¯å¾„éœ€è¦æœ‰actionå­—ç¬¦ä¸²ï¼Œä½†æ˜¯è·¯å¾„åŠæ–‡ä»¶åç§°ä¸è¦å¸¦æœ‰â€œfreedefâ€ã€â€œuserdefâ€ã€â€œauthorizeâ€ç­‰å­—ç¬¦ä¸²ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ç³»ç»Ÿä¸­æ˜¯æ ¹æ®è·¯å¾„ä¸­åŒ…å«actionï¼Œå°±ä¼šåŒ¹é…åˆ°ActionConfigReaderã€‚åŒ…å«freedef-&gt;FreedefConfigReaderã€‚åŒ…å«userdef-&gt;UserdefConfigReaderã€‚åŒ…å«authorize-&gt;AppAuthenticationConfigReader
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ‰€ä»¥æ£€æŸ¥é…ç½®æ–‡ä»¶è·¯å¾„ã€‚</p> <h3 id="_5-11-åº”ç”¨ç¼–ç -xxxxxx-ä»¥åŠå…¶æ ¹åº”ç”¨ç¼–ç -xxxxxx-æ²¡æœ‰è¯¥æ“ä½œçš„ä¸šåŠ¡æƒé™-xxxx-xxx-xxxaction">5.11 åº”ç”¨ç¼–ç  xxxxxx ä»¥åŠå…¶æ ¹åº”ç”¨ç¼–ç  xxxxxx æ²¡æœ‰è¯¥æ“ä½œçš„ä¸šåŠ¡æƒé™ xxxx/xxx/xxxAction</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=igLPAAy2RM0&amp;fid=362980571088707&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong></p> <p>(1)è¿™ç§é”™è¯¯ä¸€èˆ¬æ˜¯æ²¡æœ‰æ”¾é‰´æƒæ–‡ä»¶ï¼Œæˆ–è€…è¯·æ±‚è·¯å¾„å’Œé‰´æƒæ–‡ä»¶é…ç½®çš„ä¸ä¸€æ ·ã€‚è·¯å¾„ï¼šhome\hotwebs\nccloud\WEB-INF\extend\yyconfig\modules\å¯¹åº”çš„æ¨¡å—\ç»„ä»¶\config\authorize\xxx.xmlé‡Œé¢ã€‚</p> <p>(2) å¦‚æœæ”¾äº†é…ç½®æ–‡ä»¶ï¼Œåˆ™æ£€æŸ¥é…ç½®æ–‡ä»¶å†…å®¹æ˜¯å¦ç¬¦åˆxmlè§„èŒƒï¼Œæ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚ä¸‹é¢æ˜¯æ­£ç¡®çš„é‰´æƒé…ç½®ç¤ºä¾‹ï¼š</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authorizes</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authorize</span><span class="token punctuation">&gt;</span></span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appcode</span><span class="token punctuation">&gt;</span></span>90H30199<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appcode</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- åº”ç”¨ç¼–ç ï¼Œå¤šä¸ªç”¨è‹±æ–‡é€—å·åˆ†å‰²ï¼Œå¯ä»¥ç”¨*è¡¨ç¤ºæ‰€æœ‰åº”ç”¨éƒ½æœ‰æƒé™ --&gt;</span>
  	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>actions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span><span class="token punctuation">&gt;</span></span>cfgnkf.cfinterviewermanage.ListCfinterviewermanageHVOAction<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>action</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span><span class="token punctuation">&gt;</span></span>cfgnkf.cfinterviewermanage.DeleteCfinterviewermanageHVOAction<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>action</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>actions</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authorize</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authorizes</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>(3) æ£€æŸ¥actionè¯·æ±‚è·¯å¾„ æ˜¯å¦å’Œå…¶ä»–çš„é…ç½®æ–‡ä»¶å†²çªäº†ï¼Œä¾‹å¦‚æˆªå›¾çš„è·¯å¾„ä¸ºcfgnkf/cfinterviewermanage/ListCfinterviewermanageHVOActionï¼Œåˆ™ä½¿ç”¨notepad++ æœç´¢-&gt;åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾-&gt; æŸ¥æ‰¾ç›®æ ‡ä¸º cfgnkf.cfinterviewermanage.ListCfinterviewermanageHVOActionï¼ˆå³è·¯å¾„é‡Œçš„æ–œçº¿&quot;/&quot;æ¢æˆç‚¹&quot;.&quot;ï¼‰ï¼Œæ–‡ä»¶ç±»å‹*.xmlï¼Œæœç´¢è·¯å¾„home\hotwebs\nccloud\WEB-INF\extend\yyconfig\modulesï¼Œæœç´¢ä¸åˆ°è¯´æ˜æ²¡æœ‰æ”¾é‰´æƒï¼Œå¦‚æœæœåˆ°å¤šä¸ªæ³¨æ„æ˜¯é‰´æƒè¿˜æ˜¯actioné…ç½®ï¼Œæ­£å¸¸æƒ…å†µæœç´¢ç»“æœæ˜¯ä¸€ä¸ªactionä¸€ä¸ªauthorizeé‰´æƒé…ç½®ï¼Œå¦‚æœæœç´¢åˆ°äº†å¤šä¸ªé‰´æƒåˆ™å¯èƒ½æ˜¯å†²çªäº†ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=ojfIZKg9QHc&amp;fid=362980571089915&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>(4) æ”¾å®Œé‰´æƒé…ç½®æ–‡ä»¶è¿˜éœ€è¦é‡å¯æœåŠ¡ã€‚</p> <p>(5) é‰´æƒæ–‡ä»¶è·¯å¾„ã€æ–‡ä»¶åç§°ä¸è¦å¸¦æœ‰â€œactionâ€å­—ç¬¦ä¸²ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ç³»ç»Ÿä¸­æ˜¯æ ¹æ®è·¯å¾„ä¸­åŒ…å«actionï¼Œå°±ä¼šåŒ¹é…åˆ°ActionConfigReaderã€‚åŒ…å«freedef-&gt;FreedefConfigReaderã€‚åŒ…å«userdef-&gt;UserdefConfigReaderã€‚åŒ…å«authorize-&gt;AppAuthenticationConfigReader
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ‰€ä»¥é‰´æƒæ–‡ä»¶è·¯å¾„ä¸è¦å¸¦actionç­‰ç‰¹æ®Šå­—ç¬¦ä¸²å¦åˆ™ä¼šå¯¼è‡´åŒ¹é…é”™è¯¯ã€‚</p> <h3 id="_5-12-å¼€å‘å·¥å…·å¯åŠ¨æœåŠ¡æŠ¥é”™-æ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±»">5.12 å¼€å‘å·¥å…·å¯åŠ¨æœåŠ¡æŠ¥é”™ï¼šæ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±»</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> ï¼ˆ1ï¼‰ä¸€èˆ¬æ–°æ­å»ºç¯å¢ƒæˆ–è€…æ›´æ¢homeçš„æ—¶å€™ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ã€‚é‡å¯å¼€å‘å·¥å…·ï¼Œæ›´æ–°ç±»è·¯å¾„ã€‚ç¡®ä¿å·¥ç¨‹é‡Œé¢èƒ½å¤Ÿå¼•ç”¨åˆ°ä¸‹é¢æˆªå›¾çš„ç±»åº“ã€‚</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=GCInoUMkRac&amp;fid=362980571089131&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>æ›´æ–°ç±»è·¯å¾„æ–¹å¼ï¼šé¡¹ç›®å·¥ç¨‹å³é”®-&gt;NC Cloud Tools(ä¸åŒç‰ˆæœ¬å·¥å…·å¯èƒ½ä¸ä¸€æ ·)-&gt;update classpath</p> <p>ï¼ˆå¦‚æœæ£€æŸ¥å‘ç°æœ‰çš„é¡¹ç›®æœ‰æ›´æ–°ç±»è·¯å¾„ï¼Œæœ‰çš„é¡¹ç›®æ‰¾ä¸åˆ°æ›´æ–°ç±»è·¯å¾„ï¼Œå¯ä»¥å‚è€ƒæœ¬æ–‡æ¡£â€œé¡¹ç›®å³é”®æ‰¾ä¸åˆ°æ›´æ–°ç±»è·¯å¾„â€é—®é¢˜è§£å†³æ–¹æ³•ã€‚ï¼‰</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=dosHDRNTyk&amp;fid=362980571089132&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>ï¼ˆ2ï¼‰å¦‚æœé‡å¯å¼€å‘å·¥å…·ã€æ›´æ–°ç±»è·¯å¾„åä¾ç„¶æœ‰é—®é¢˜ï¼Œå°è¯•æ›´ä½¿ç”¨homeé‡Œçš„ufjdkï¼Œæˆ–è€…æ›´æ¢å…¶ä»–ç‰ˆæœ¬jdkï¼ˆè®¾ç½®å¯åŠ¨jdkå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ã€‚å¦å¤–å°±æ˜¯æ³¨æ„JRE homeè·¯å¾„æ˜¯å…¨è‹±æ–‡æ²¡æœ‰ç©ºæ ¼çš„ï¼Œ<strong>VM argumentsä¹Ÿæ˜¯ç©ºçš„å…·ä½“è§ä¸‹å›¾ï¼ˆè·¯å¾„ã€VM argumentsè¿™æ¡è¦é‡ç‚¹æ£€æŸ¥ï¼‰</strong>ã€‚</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=z0C2pslsSEQ&amp;fid=362980571099143&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_5-13-é¡¹ç›®å³é”®debug-asæ‰¾ä¸åˆ°å¯åŠ¨å…¥å£-nc-cloudä¸­é—´ä»¶æœåŠ¡å™¨-é¡¹ç›®å³é”®æ‰¾ä¸åˆ°æ›´æ–°ç±»è·¯å¾„ã€‚">5.13 é¡¹ç›®å³é”®Debug Asæ‰¾ä¸åˆ°å¯åŠ¨å…¥å£â€œNC Cloudä¸­é—´ä»¶æœåŠ¡å™¨â€ï¼Œé¡¹ç›®å³é”®æ‰¾ä¸åˆ°æ›´æ–°ç±»è·¯å¾„ã€‚</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> æŒ‰ä¸‹å›¾æ–¹æ³•é¡¹ç›®ä¸Šå³é”®-&gt;properties-&gt;Project Naturesæ‰¾ä¸€ä¸‹æœ‰æ²¡æœ‰ä¸‹å›¾çš„ç‰¹æ€§ï¼Œå¦‚æœæ²¡æœ‰ç‚¹Addæ·»åŠ ä¸€ä¸‹ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=a2FuQuIzT5c&amp;fid=362980571089324&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_5-14-å¯åŠ¨ç¯å¢ƒæ—¶æŠ¥é”™nccloud-framework-web-action-entry-nccloudcontextlistener">5.14 å¯åŠ¨ç¯å¢ƒæ—¶æŠ¥é”™nccloud.framework.web.action.entry.NCCloudContextListener</h3> <p>ä¸¥é‡: å¼‚å¸¸å°†ä¸Šä¸‹æ–‡åˆå§‹åŒ–äº‹ä»¶å‘é€åˆ°ç±»çš„ä¾¦å¬å™¨å®ä¾‹.[nccloud.framework.web.action.entry.NCCloudContextListener]
java.lang.NullPointerException
at nccloud.framework.core.config.ResourceInitor.load(ResourceInitor.java:38)
at nccloud.framework.core.config.ConfigCacheServer.load(ConfigCacheServer.java:52)
at nccloud.framework.web.action.entry.NCCloudContextListener.contextInitialized(NCCloudContextListener.java:32)
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=khjz0T7NRGY&amp;fid=362980571088630&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> <strong>æ³¨æ„ï¼Œè¿™é‡Œæ˜¯æŠ¥çš„ç©ºæŒ‡é’ˆé”™è¯¯ï¼Œæç¤ºçš„æ˜¯NullPointerException</strong>ã€‚é—®é¢˜åŸå› æ˜¯ home\hotwebs\nccloud\WEB-INF\lib è¢«åˆ é™¤ï¼Œç”¨å·¥å…·deployæŒªå®ŒåŒ…åï¼Œlibæ–‡ä»¶å¤¹ä¸èƒ½åˆ æ‰ï¼Œå¦åˆ™å°±ä¼šæŠ¥ä¸Šé¢çš„é”™è¯¯ã€‚å¦‚æœæ˜¯ClassNotFoundExceptionè§ä¸‹ä¸€ä¸ªé—®é¢˜ã€‚</p> <h3 id="_5-15-æœåŠ¡å¯åŠ¨æ—¶æŠ¥é”™-ä¸¥é‡-é…ç½®åº”ç”¨ç¨‹åºç›‘å¬å™¨-nccloud-framework-web-action-entry-nccloudcontextlistener-é”™è¯¯">5.15 æœåŠ¡å¯åŠ¨æ—¶æŠ¥é”™ï¼šä¸¥é‡ï¼šé…ç½®åº”ç”¨ç¨‹åºç›‘å¬å™¨[nccloud.framework.web.action.entry.NCCloudContextListener]é”™è¯¯</h3> <p>java.lang.ClassNotFoundException:nccloud.framework.web.action.entry.NCCloudContextListener
at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1279)
at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1104)
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=mipYi5pdSBU&amp;fid=362980571089271&amp;width=1200&amp;height=800&amp;type=min" alt="1641210141(1).jpg"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> <strong>æ³¨æ„ï¼Œè¿™é‡Œæ˜¯æŠ¥çš„ç±»æ‰¾ä¸åˆ°ï¼Œæç¤ºçš„æ˜¯ClassNotFoundException</strong>ã€‚ç¡®è®¤æ˜¯é—®é¢˜ClassNotFoundExceptionåŸå› æ˜¯ç±»æ‰¾ä¸åˆ°ï¼Œè¿™ä¸ªç±»åœ¨pubplatform_baseLevel-1.jaré‡Œé¢ï¼Œä¸€èˆ¬æµ‹è¯•æœåŠ¡ç¯å¢ƒåœ¨home\hotwebs\nccloud\WEB-INF\lib ä¸‹ï¼Œæ­å»ºæœ¬åœ°å¼€å‘ç¯å¢ƒæ—¶ä¼šè¢«ç§»åŠ¨åˆ°home\external\lib ä¸‹ï¼Œåº”è¯¥å…ˆç¡®ä¿ç¯å¢ƒé‡Œæœ‰è¿™ä¸ªjaråŒ…ä¸”jaråŒ…é‡Œé¢æœ‰è¿™ä¸ªç±»ã€‚å¦‚æœæœ¬åœ°å¼€å‘ç”¨å·¥å…·deployå¼•èµ·çš„é—®é¢˜çš„è¯ï¼Œå…³é—­æœåŠ¡å…³é—­å¼€å‘å·¥å…·ï¼Œé‡æ–°æ‰“å¼€å¹¶é‡å¯åç«¯æœåŠ¡ã€‚</p> <p>å¦‚æœæç¤ºçš„æ˜¯NullPointerExceptionï¼Œå¤„ç†æ–¹æ³•è§ä¸Šä¸ªé—®é¢˜ã€‚</p> <h3 id="_5-16-æœåŠ¡å¯åŠ¨æ—¶æŠ¥é”™-provider-org-apache-xerces-jaxp-documentbuilderfactoryimpl-not-found">5.16 æœåŠ¡å¯åŠ¨æ—¶æŠ¥é”™ï¼šProvider org.apache.xerces.jaxp.DocumentBuilderFactoryImpl not found</h3> <p>è¯¦ç»†æŠ¥é”™æ—¥å¿—å¦‚ä¸‹ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Caused by: javax.xml.parsers.FactoryConfigurationError: Provider org.apache.xerces.jaxp.DocumentBuilderFactoryImpl not found
	at javax.xml.parsers.FactoryFinder.newInstance(FactoryFinder.java:200)
	at javax.xml.parsers.FactoryFinder.newInstance(FactoryFinder.java:152)
	at javax.xml.parsers.FactoryFinder.find(FactoryFinder.java:232)
	at javax.xml.parsers.DocumentBuilderFactory.newInstance(DocumentBuilderFactory.java:120)
....//çœç•¥éƒ¨åˆ†
Caused by: java.lang.ClassNotFoundException: org/apache/xerces/jaxp/DocumentBuilderFactoryImpl
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>è§£å†³æ–¹æ³•ï¼š</strong>
homeé‡Œé¢æ‰¾ä¸åˆ°DocumentBuilderFactoryImpl è¿™ä¸ªç±»ï¼Œä¸€èˆ¬æ˜¯NCC2111ç‰ˆæœ¬æŠ¥çš„é”™ã€‚2111ç‰ˆæœ¬åŸºäºå®‰å…¨é—®é¢˜åˆ æ‰äº†ä¸€äº›ç±»ã€‚å¯åŠ¨å‚æ•°ä¸Šåšäº†è°ƒæ•´ã€‚ç”¨ä¸‹é¢çš„å¯åŠ¨å‚æ•°(å‚è€ƒæ–‡æ¡£ï¼š[https://nccdev.yonyou.com/article/detail/495](javascript:void(0)) )ï¼š</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">-Dnc.exclude.modules</span><span class="token punctuation">=</span><span class="token attr-value">${FIELD_EX_MODULES}</span>
<span class="token attr-name">-Dnc.runMode</span><span class="token punctuation">=</span><span class="token attr-value">develop</span>
<span class="token attr-name">-Dnc.server.location</span><span class="token punctuation">=</span><span class="token attr-value">${FIELD_NC_HOME}</span>
<span class="token attr-name">-DEJBConfigDir</span><span class="token punctuation">=</span><span class="token attr-value">${FIELD_NC_HOME}/ejbXMLs</span>
<span class="token attr-name">-Dorg.owasp.esapi.resources</span><span class="token punctuation">=</span><span class="token attr-value">${FIELD_NC_HOME}/ierp/bin/esapi</span>
<span class="token attr-name">-DExtServiceConfigDir</span><span class="token punctuation">=</span><span class="token attr-value">${FIELD_NC_HOME}/ejbXMLs</span>
<span class="token attr-name">-Xms256M</span> <span class="token attr-value">-Xmx1024M -XX:NewSize=256M </span>
<span class="token attr-name">-Duap.hotwebs</span><span class="token punctuation">=</span><span class="token attr-value">nccloud,uapws,fs </span>
<span class="token attr-name">-Duap.disable.codescan</span><span class="token punctuation">=</span><span class="token attr-value">false </span>
<span class="token attr-name">-Djavax.xml.parsers.DocumentBuilderFactory</span><span class="token punctuation">=</span><span class="token attr-value">com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl </span>
<span class="token attr-name">-Djavax.xml.parsers.SAXParserFactory</span><span class="token punctuation">=</span><span class="token attr-value">com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl </span>
<span class="token attr-name">-Dfile.encoding</span><span class="token punctuation">=</span><span class="token attr-value">UTF-8</span>
<span class="token attr-name">-Duser.timezone</span><span class="token punctuation">=</span><span class="token attr-value">GMT+8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_5-17-åç«¯æŠ¥é”™nccloud-framework-core-exception-businessexception-illegal-key-size">5.17 åç«¯æŠ¥é”™nccloud.framework.core.exception.BusinessException: Illegal key size</h3> <p>è¯¦ç»†æŠ¥é”™å †æ ˆï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ä¸¥é‡: åœ¨è·¯å¾„ä¸º[/nccloud]çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œservlet[springServlet]çš„Servlet.service()å¼•å‘å¼‚å¸¸
nccloud.framework.core.exception.BusinessException: Illegal key size
	at nccloud.framework.core.exception.ExceptionUtils.wrapBusinessException(ExceptionUtils.java:82)
	at nccloud.framework.web.container.AESUtil.encrypt(AESUtil.java:85)
	at nccloud.framework.web.container.Response.verifyAES(Response.java:200)
	at nccloud.framework.web.container.Response.write(Response.java:73)
	at nccloud.framework.web.action.entry.ResponseProcess.writeJson(ResponseProcess.java:201)
	at nccloud.framework.web.action.entry.ResponseProcess.process(ResponseProcess.java:69)
	at nccloud.framework.core.filter.EntryLeaveFilter.doFilter(EntryLeaveFilter.java:68)
	at sun.reflect.GeneratedMethodAccessor227.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:282)
	at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:279)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAsPrivileged(Subject.java:549)
	at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:314)
	at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:253)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:191)
	at org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFilterChain.java:47)
	at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:149)
	at org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterChain.java:145)
	at java.security.AccessController.doPrivileged(Native Method)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:144)
	at nccloud.framework.core.filter.HostFilter.doFilter(HostFilter.java:48)
	at sun.reflect.GeneratedMethodAccessor227.invoke(Unknown Source)
....//çœç•¥éƒ¨åˆ†å†…å®¹
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p><strong>è§£å†³æ–¹æ³•ï¼š</strong> æœåŠ¡å¯åŠ¨æ—¶JDKä½¿ç”¨homeé‡Œé¢çš„ufjdk</p> <h3 id="_5-18-æ‰“å¼€ç™»é™†é¡µé¢æŠ¥é”™-can-not-find-datasource-xxxx">5.18 æ‰“å¼€ç™»é™†é¡µé¢æŠ¥é”™ï¼šcan not find datasource: xxxx</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=lky62XujQP4&amp;fid=362980571090841&amp;width=1200&amp;height=800&amp;type=min" alt="85fa24523b92c90051c339712f9590c.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> åŸå› æ˜¯æ‰¾ä¸åˆ°è´¦å¥—å¯¹åº”çš„æ•°æ®æºã€‚æ ¹æ®æƒ…å†µå¦‚æœæ˜¯æœ¬åœ°å¼€å‘æ¨¡å¼ï¼ˆä½¿ç”¨å¼€å‘å·¥å…·èµ·çš„æœåŠ¡ï¼‰æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œç™»é™†è´¦å¥—é€‰æ‹©å¼€å‘è´¦å¥—ï¼›å¦‚æœæ˜¯æµ‹è¯•ç¯å¢ƒï¼ˆä½¿ç”¨startup.batèµ·çš„æœåŠ¡ï¼‰éœ€è¦åœ¨sysConfig.baté…ç½®ç•Œé¢ä¸Šé€‰æ‹©æ•°æ®æº-&gt;æ·»åŠ æ•°æ®æºï¼Œæ•°æ®æºç¼–ç ä¸æŠ¥é”™æç¤ºç¼–ç ä¸€è‡´ï¼Œä¾‹å¦‚æˆªå›¾æç¤ºçš„æ˜¯nccxyåˆ™æ·»åŠ çš„æ•°æ®æºç¼–ç ä¸ºnccxy</p> <h3 id="_5-19-å¦‚ä½•é…ç½®ç”¨æˆ·sessionä¼šè¯æ—¶é•¿">5.19 å¦‚ä½•é…ç½®ç”¨æˆ·sessionä¼šè¯æ—¶é•¿</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> NCC ç”¨æˆ·ä¼šè¯æ—¶é•¿åœ¨home\ierp\bin\session.xmlé‡Œé¢é…ç½®ï¼ŒexpireTimeé…ç½®å°äºç­‰äº0æ—¶å–æ¶ˆè‡ªåŠ¨æ³¨é”€ã€‚
é‡é‡ç«¯çš„åœ¨home\bin\sysconfig.bat åŒå‡»æ‰§è¡Œåé…ç½®å·¥å…·-&gt;å…¶ä»–é…ç½®-&gt;ç³»ç»Ÿé…ç½®-&gt;ç³»ç»ŸåŸºç¡€é…ç½®ã€‚</p> <h3 id="_5-20-rootç®¡ç†å‘˜è´¦å·è¢«é”ã€è¶…çº§ç®¡ç†å‘˜ç™»å½•ä¸ä¸Šå»è§£å†³æ–¹æ³•">5.20 rootç®¡ç†å‘˜è´¦å·è¢«é”ã€è¶…çº§ç®¡ç†å‘˜ç™»å½•ä¸ä¸Šå»è§£å†³æ–¹æ³•</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> <code>update sm_super_user set password='U_U++--V93f182df06984208361b9689a94416ec' where admcode ='root';</code></p> <p>è¶…çº§ç®¡ç†å‘˜è¡¨sm_super_user
å¯†ç å­—æ®µæ˜¯password</p> <p>rootå¯†ç ä¸ºç©ºçš„å€¼<code>U_U++--V93f182df06984208361b9689a94416ec</code>
superå¯†ç ä¸ºç©ºçš„å€¼ <code>U_U++--V316a223e0a2381c992955a97f5734f8f</code>
æŠŠå¯¹åº”è´¦å·çš„å€¼åœ¨æ•°æ®åº“æ”¹ä¸€ä¸‹ï¼Œç™»å½•çš„æ—¶å€™å¯†ç å°±æ˜¯ç©ºï¼Œç‚¹ç™»é™†å³å¯ã€‚</p> <h3 id="_5-21-nccç”¨æˆ·è¢«é”nccè§£é”ç”¨æˆ·åå°">5.21 nccç”¨æˆ·è¢«é”nccè§£é”ç”¨æˆ·åå°</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> å¦‚æœæœ‰å…¶ä»–ç”¨æˆ·å¯ä»¥æ­£å¸¸ç™»é™†ï¼Œåˆ°ã€ç”¨æˆ·ã€‘èŠ‚ç‚¹ï¼Œæ‰¾åˆ°å¯¹åº”ç”¨æˆ·è§£é”å³å¯ï¼Œå¦‚æœæ‰¾ä¸åˆ°å¯ä»¥æ‰§è¡Œä¸‹é¢è„šæœ¬ï¼Œç”¨æˆ·ä¸»é”®ä¸ºç”¨æˆ·è¡¨sm_userå¯¹åº”è¦è§£é”ç”¨æˆ·çš„ä¸»é”®ã€‚
<code>DELETE FROM sm_user_ex WHERE user_id = 'ç”¨æˆ·ä¸»é”®' and exstatuscode in ( '1', '2' )</code></p> <h3 id="_5-22-nccç”¨æˆ·å¯†ç å¦‚ä½•åŠ å¯†-å¦‚ä½•æ ¡éªŒå¯†ç ">5.22 nccç”¨æˆ·å¯†ç å¦‚ä½•åŠ å¯†ï¼Ÿå¦‚ä½•æ ¡éªŒå¯†ç ï¼Ÿ</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> å¦‚æœæœ‰éœ€æ±‚å¯ä»¥å‚è€ƒnc.vo.uap.rbac.util.RbacUserPwdUtilç±»é‡Œé¢çš„checkUserPasswordæ–¹æ³•ã€‚å‚æ•°UserVO userç”¨æˆ·voï¼Œ String expresslyPWDå¾…æ ¡éªŒæ˜æ–‡å¯†ç ã€‚</p> <h3 id="_5-23-é‡é‡ç«¯ç™»é™†æç¤º-å¯†ç çº§åˆ«æ–‡ä»¶é­ç¯¡æ”¹-è¯¦ç»†è¯·æŸ¥çœ‹æ—¥å¿—">5.23 é‡é‡ç«¯ç™»é™†æç¤ºâ€œå¯†ç çº§åˆ«æ–‡ä»¶é­ç¯¡æ”¹ï¼Œè¯¦ç»†è¯·æŸ¥çœ‹æ—¥å¿—â€</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> home\ierp\bin\passwordsecurityconfig.xml æŠŠè¿™ä¸ªæ–‡ä»¶åˆ é™¤</p> <h3 id="_5-24-é™„ä»¶æ–‡ä»¶ä¸Šä¼ æç¤º-ä¸Šä¼ æ–‡ä»¶ä¸æ»¡è¶³æ ¼å¼é™åˆ¶">5.24 é™„ä»¶æ–‡ä»¶ä¸Šä¼ æç¤ºâ€œä¸Šä¼ æ–‡ä»¶ä¸æ»¡è¶³æ ¼å¼é™åˆ¶â€</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=3Kz7Zg7zQUM&amp;fid=362980571088708&amp;width=1200&amp;height=800&amp;type=min" alt="6d1edfb52b852e72af269a8bf659f52.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> ç”¨ç³»ç»Ÿç®¡ç†å‘˜ç™»å½•----&gt;å…¨å±€å‚æ•°----&gt;æ‰¾åˆ° é™„ä»¶ç±»å‹ å‚æ•° æŠŠéœ€è¦çš„ç±»å‹åŠ ä¸Šå»</p> <h3 id="_5-25-å¦‚ä½•èƒ½è·å–é™„ä»¶çš„url">5.25 å¦‚ä½•èƒ½è·å–é™„ä»¶çš„URLï¼Ÿ</h3> <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
é—®è¿™ä¸ªé—®é¢˜çš„å°ä¼™ä¼´è¿˜æŒºå¤šçš„ï¼Œå…¶å®è·å–çš„æ–¹æ³•å¾ˆç®€å•ã€‚å¦‚æœæ˜¯å•æ®é™„ä»¶ç®¡ç†ä¸Šä¼ çš„æ–‡ä»¶ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨æ–‡ä»¶æœåŠ¡å™¨é‡Œï¼ˆé€šè¿‡sysconfigé…ç½®ï¼‰ã€‚æ‰“å¼€ä¸€ä¸ªå•æ®ç‚¹å‡»é™„ä»¶ç®¡ç†çš„ä¸‹è½½æŒ‰é’®åˆ°uap.pub.fs.client.RestFileTransferç±»é‡Œé¢è·Ÿä¸€ä¸‹ä»£ç å°±å¯ä»¥çœ‹åˆ°downloadFileé‡Œé¢è°ƒç”¨äº†ä¸€ä¸ªæ–¹æ³•è·å–æ–‡ä»¶urlï¼Œè¿™ä¸ªurlå°±æ˜¯éœ€è¦çš„[http://xxxx](javascript:void(0)) URLè·¯å¾„ ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=3WjKG4iRE&amp;fid=362980571088989&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>æ‰€ä»¥æˆ‘ä»¬åªè¦è°ƒ <code>uap.pub.fs.client.UfsHostURI.getRestfulURI(bucket, filePath, VERSIONNO + &quot;=&quot; + version)</code> è¿™æ®µä»£ç å°±å¯ä»¥äº†ã€‚
å‚æ•°è¯´æ˜ï¼š
bucketï¼šæ–‡ä»¶æœåŠ¡çš„æ¨¡å—ï¼Œå¯¹åº”bap_fs_headeré‡Œé¢çš„moduleï¼Œå¦‚æœæ˜¯å•æ®é™„ä»¶å¡«nccloud.pubitf.platform.attachment.IFileStorageConst.Bucket å³ &quot;uapattachroot&quot;ï¼Œä¸è¿‡æ–‡ä»¶æœåŠ¡å™¨é‡Œé¢å­˜çš„å¯ä¸æ­¢å•æ®é™„ä»¶ï¼Œä¾‹å¦‚å¯¼å…¥å¯¼å‡ºã€ä¸šåŠ¡æ¶ˆæ¯ç­‰ä¹Ÿæœ‰æ–‡ä»¶å­˜æ–‡ä»¶æœåŠ¡å™¨ï¼Œå¦‚æœä¸æ˜¯å•æ®é™„ä»¶ç®¡ç†é‡Œé¢çš„æ–‡ä»¶å¯ä»¥åˆ°bap_fs_headeré‡Œé¢æŸ¥ä¸€ä¸‹ã€‚
filePathï¼šæ–‡ä»¶è·¯å¾„ï¼Œæ˜¯ä¸ªuuidï¼Œå¯¹åº”bap_fs_headeré‡Œé¢çš„pathã€‚
versionï¼šæ–‡ä»¶ç‰ˆæœ¬ï¼Œå¯ä»¥æ˜¯nullæˆ–å¡«versionno=0 .</p> <p>æœ¬åœ°å¼€å‘ç¯å¢ƒä¸‹æ³¨æ„å¯åŠ¨å‚æ•°è¦å¯åŠ¨fsæ–‡ä»¶æœåŠ¡<code>-Duap.hotwebs=nccloud,fs</code></p> <p>é™„ä¸€ä¸‹è·å–æ–‡ä»¶æœåŠ¡å™¨æ–‡ä»¶ä¿¡æ¯çš„sqlï¼š
1.æŸ¥è¯¢é™„ä»¶èŠ‚ç‚¹ä¿¡æ¯ï¼šselect * from sm_pub_filesystem where filepath = 'å•æ®ä¸»é”®' or filepath like 'å•æ®ä¸»é”®/%'</p> <p>2.æŸ¥è¯¢æ–‡ä»¶ä¿¡æ¯ï¼šselect * from bap_fs_header where path = sm_pub_filesystem.pk_doc</p> <p>3.æŸ¥è¯¢æ–‡ä»¶è·¯å¾„ï¼šselect storepath from bap_fs_body where headid = bap_fs_header.guid</p> <h3 id="_5-26-éƒ¨ç½²å‡ºé”™-hotwebsä¸‹æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„é…ç½®æ–‡ä»¶">5.26 éƒ¨ç½²å‡ºé”™ï¼Œhotwebsä¸‹æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„é…ç½®æ–‡ä»¶</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong>
1ã€æ£€æŸ¥æœ‰æ²¡æœ‰é…ç½®æ–‡ä»¶æœåŠ¡å™¨ï¼Œ<strong>å°¤å…¶æ˜¯ipã€ç«¯å£æ£€æŸ¥é…ç½®æ˜¯å¦æ­£ç¡®</strong></p> <p>2ã€æ£€æŸ¥å¯åŠ¨å‚æ•°é‡Œé¢æœ‰æ²¡æœ‰å¯åŠ¨æ–‡ä»¶æœåŠ¡ç³»ç»Ÿï¼š<code>-Duap.hotwebs=nccloud,fs,uapws</code> æ³¨æ„æœ‰ä¸ªfsï¼Œè¿™ä¸ªå°±æ˜¯æ–‡ä»¶æœåŠ¡ç³»ç»Ÿï¼Œä¿®æ”¹å®Œæˆåè¦é‡å¯åç«¯æœåŠ¡ã€‚</p> <h3 id="_5-27-å¦‚ä½•æ›´æ”¹ç™»å½•é¡µlogo-å¦‚ä½•æ›´æ”¹å¯¼èˆªæ logo-å¦‚ä½•é…ç½®é‡é‡ç«¯çš„é¢œè‰²ä¸»é¢˜">5.27 å¦‚ä½•æ›´æ”¹ç™»å½•é¡µlogoï¼Ÿå¦‚ä½•æ›´æ”¹å¯¼èˆªæ logoï¼Ÿå¦‚ä½•é…ç½®é‡é‡ç«¯çš„é¢œè‰²ä¸»é¢˜ï¼Ÿ</h3> <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
ï¼ˆ1ï¼‰è½»é‡ç«¯ï¼š
ç™»å½•é¡µlogoæ›¿æ¢è·¯å¾„ï¼š home\hotwebs\nccloud\resources\uap\public\img\logo.png</p> <p>ç™»é™†çš„èƒŒæ™¯å›¾ï¼šhome\hotwebs\nccloud\resources\uap\public\img\background.jpg</p> <p>ç™»é™†åå·¥ä½œç•Œé¢ä¸Šæ–¹é»˜è®¤ä¸»é¢˜logoæ›¿æ¢è·¯å¾„ï¼šhome\hotwebs\nccloud\resources\workbench\public\common\main\images\Group.png</p> <p>1909åŠ2005ç‰ˆæœ¬å·¥ä½œç•Œé¢çš„logoè¿˜è¦æ›¿æ¢è·¯å¾„ï¼š home\hotwebs\nccloud\resources\workbench\public\common\main\images\GroupWhite.png</p> <p>ï¼ˆ2ï¼‰é‡é‡ç«¯ï¼š
ç™»é™†ç•Œé¢çš„LOGOï¼Œæ›¿æ¢çš„homeè·¯å¾„æ˜¯ï¼šhome\resources\themeroot\blue\themeres\login\logo.pngå…¶ä¸­è·¯å¾„ä¸­çš„blueä¸ºå½“å‰ä½¿ç”¨çš„ä¸»é¢˜ã€‚</p> <p>ç™»é™†ç•Œé¢å³ä¸‹è§’çš„yonyouæ ‡å¿—ï¼Œè·¯å¾„æ˜¯ï¼šhome\resources\themeroot\blue\themeres\login\yonyou.pngå…¶ä¸­è·¯å¾„ä¸­çš„blueä¸ºå½“å‰ä½¿ç”¨çš„ä¸»é¢˜ã€‚</p> <p>ç™»é™†åå·¦ä¸Šæ–¹çš„LOGOï¼Œæ›¿æ¢çš„homeè·¯å¾„æ˜¯ï¼š
home\resources\themeroot\blue\themeres\control\desktop\logo.png</p> <p>è·¯å¾„ä¸­çš„blueä¸ºå½“å‰ä½¿ç”¨çš„ä¸»é¢˜ï¼Œç³»ç»Ÿé¢„ç½®äº†å››ç§ä¸»é¢˜blueã€grayã€greenã€red
å¦‚æœè¦ä¿®æ”¹ä½¿ç”¨çš„ä¸»é¢˜ï¼Œå¯ä»¥ä¿®æ”¹é…ç½®æ–‡ä»¶\ierp\sf\ themeconf.xml</p> <h3 id="_5-28-æ‰“å¼€èŠ‚ç‚¹æç¤º-è¯¥æ¨¡å—æœªè´­ä¹°-æˆ–è€…æç¤ºè¯¥äº§å“ç”¨æˆ·çš„æ•°å·²è¾¾åˆ°äº§å“æˆæƒæ•°-å®¢å¼€æ¨¡å—æˆæƒé—®é¢˜ã€‚">5.28 æ‰“å¼€èŠ‚ç‚¹æç¤ºâ€œè¯¥æ¨¡å—æœªè´­ä¹°ï¼â€æˆ–è€…æç¤ºè¯¥äº§å“ç”¨æˆ·çš„æ•°å·²è¾¾åˆ°äº§å“æˆæƒæ•°ï¼ å®¢å¼€æ¨¡å—æˆæƒé—®é¢˜ã€‚</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=6Pk5aXhnR3E&amp;fid=362980571089204&amp;width=1200&amp;height=800&amp;type=min" alt="1.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong>
ï¼ˆ1ï¼‰å¦‚æœæ˜¯æœ¬åœ°å¼€å‘ï¼Œç”¨å¼€å‘å·¥å…·èµ·çš„æœåŠ¡ï¼Œè¯´æ˜å¯åŠ¨å‚æ•°æœ‰é—®é¢˜ã€‚å¯åŠ¨å‚æ•°é‡Œé¢æœ‰<code>-Dnc.runMode=develop</code>è®¾ç½®ç¯å¢ƒå¯åŠ¨æ¨¡å¼ä¸ºå¼€å‘æ¨¡å¼ã€‚</p> <p>(2)å¦‚æœæ˜¯å®¢å¼€çš„æ¨¡å—ï¼Œæ¨¡å—ç¼–ç ã€åº”ç”¨ç¼–ç ç¬¬ä¸‰ä½åº”è¯¥ä¸ºå¤§å†™Hï¼Œé¿å…å ç”¨æˆæƒï¼ˆè¿™é‡Œè¯´çš„æ¨¡å—ç¼–ç å’Œåº”ç”¨ç¼–ç æ˜¯æŒ‡åº”ç”¨æ³¨å†Œçš„æ¨¡å—ç¼–ç å’Œåº”ç”¨ç¼–ç ï¼‰ã€‚
å‚è€ƒnc.mddb.cil.tool.CilTookitï¼ˆæœ‰äº›ç‰ˆæœ¬æ˜¯nc.impl.uap.busibean.cil.LicenseToolKitï¼‰æ ¡éªŒæ–¹æ³•ï¼Œåº”è¯¥ä¸æ­¢å¤§å†™Hã€‚</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isNonLicenseProduct</span><span class="token punctuation">(</span><span class="token class-name">String</span> code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> b <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>code <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> code<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> code<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">char</span> ch <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        b <span class="token operator">=</span> ch <span class="token operator">==</span> <span class="token string">'H'</span> <span class="token operator">||</span> ch <span class="token operator">==</span> <span class="token string">'L'</span> <span class="token operator">||</span> ch <span class="token operator">==</span> <span class="token string">'R'</span> <span class="token operator">||</span> ch <span class="token operator">==</span> <span class="token string">'J'</span> <span class="token operator">||</span> ch <span class="token operator">==</span> <span class="token string">'K'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>(3) å¦‚æœæ˜¯æµ‹è¯•ç¯å¢ƒæˆ–è€…æ­£å¼ç¯å¢ƒä¸ŠæŠ¥é”™ï¼Œæ£€æŸ¥sysconfigé‡Œé¢çš„æˆæƒå¯¼å…¥ï¼Œå¯ä»¥æŠŠbin\licenseåˆ é™¤æ‰é‡æ–°å¯¼å…¥ã€‚ï¼ˆç”¨æˆ·æˆæƒå ç”¨æ•°æ®ä¼šä¿å­˜è‡³æ•°æ®åº“è¡¨LIC_USEROCCUPYï¼Œæˆæƒæ•°é‡æ¥è‡ªlicenseæ–‡ä»¶ï¼Œå¦‚æœå¤šä¸ªhomeå…±ç”¨ä¸€ä¸ªæ•°æ®åº“æ—¶ä¼šå¯¼è‡´æˆæƒæ•°é‡ä¸è¶³ï¼Œæµ‹è¯•ç¯å¢ƒçš„è¯å¯ä»¥å°è¯•é›†å›¢ç®¡ç†å‘˜ç™»é™†åˆ°ã€æˆæƒä½¿ç”¨ç›‘æ§ã€‘èŠ‚ç‚¹æ¸…ç†ï¼‰</p> <h3 id="_5-29-ç™»é™†é¡µé¢æç¤º-nchome-is-null-pls-set-nchome-value">5.29 ç™»é™†é¡µé¢æç¤ºâ€œncHome is null,pls set ncHome value.â€</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=Lswxl6rRU&amp;fid=362980571089205&amp;width=1200&amp;height=800&amp;type=min" alt="2.png">
è§£å†³æ–¹æ³•ï¼šæ£€æŸ¥å¯åŠ¨å‚æ•°ï¼Œå¯åŠ¨å‚æ•°é‡Œé¢æœ‰ä¸€æ¡-Dnc.server.location=${FIELD_NC_HOME} ç”¨æ¥æŒ‡å®šhomeçš„è·¯å¾„ã€‚åŒæ—¶éœ€è¦è®¾ç½®FIELD_NC_HOMEå‚æ•°ã€‚
å¯åŠ¨å‚æ•°ï¼š</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">-Dnc.exclude.modules</span><span class="token punctuation">=</span><span class="token attr-value">${FIELD_EX_MODULES} </span>
<span class="token attr-name">-Dnc.runMode</span><span class="token punctuation">=</span><span class="token attr-value">develop</span>
<span class="token attr-name">-Dnc.server.location</span><span class="token punctuation">=</span><span class="token attr-value">${FIELD_NC_HOME} </span>
<span class="token attr-name">-DEJBConfigDir</span><span class="token punctuation">=</span><span class="token attr-value">${FIELD_NC_HOME}/ejbXMLs </span>
<span class="token attr-name">-DExtServiceConfigDir</span><span class="token punctuation">=</span><span class="token attr-value">${FIELD_NC_HOME}/ejbXMLs </span>
<span class="token attr-name">-Duap.disable.codescan</span><span class="token punctuation">=</span><span class="token attr-value">false </span>
<span class="token attr-name">-Djavax.xml.parsers.DocumentBuilderFactory</span><span class="token punctuation">=</span><span class="token attr-value">org.apache.xerces.jaxp.DocumentBuilderFactoryImpl</span>
<span class="token attr-name">-Djavax.xml.parsers.SAXParserFactory</span><span class="token punctuation">=</span><span class="token attr-value">org.apache.xerces.jaxp.SAXParserFactoryImpl -Xms128M -Xmx512M </span>
<span class="token attr-name">-XX</span><span class="token punctuation">:</span><span class="token attr-value">NewSize=96M </span>
<span class="token attr-name">-XX</span><span class="token punctuation">:</span><span class="token attr-value">MaxPermSize=256M </span>
<span class="token attr-name">-Dorg.owasp.esapi.resources</span><span class="token punctuation">=</span><span class="token attr-value">${FIELD_NC_HOME}/ierp/bin/esapi</span>
<span class="token attr-name">-Duap.hotwebs</span><span class="token punctuation">=</span><span class="token attr-value">nccloud,fs</span>
<span class="token attr-name">-Dfile.encoding</span><span class="token punctuation">=</span><span class="token attr-value">UTF-8</span>
<span class="token attr-name">-Duser.timezone</span><span class="token punctuation">=</span><span class="token attr-value">GMT+8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=6n60DUzMQq8&amp;fid=362980571089206&amp;width=1200&amp;height=800&amp;type=min" alt="3.png"></p> <h3 id="_5-30-ç™»é™†æ—¶å¦‚ä½•æ‰“å¼€æˆ–è€…å–æ¶ˆç™»é™†çš„æ ¡éªŒç ">5.30 ç™»é™†æ—¶å¦‚ä½•æ‰“å¼€æˆ–è€…å–æ¶ˆç™»é™†çš„æ ¡éªŒç </h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=GrYHBLCPTBo&amp;fid=362980571089207&amp;width=1200&amp;height=800&amp;type=min" alt="4.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> ä½¿ç”¨ç³»ç»Ÿç®¡ç†å‘˜ç™»å½•ï¼Œåœ¨ç³»ç»Ÿå‚æ•°è®¾ç½®-å…¨å±€ä¸­ï¼Œè¿›è¡ŒéªŒè¯ç å’Œæ‰‹æœºæ‰¾å›å¯†ç çš„è®¾ç½®ï¼Œé»˜è®¤ä¸ºå¦ï¼Œè§ä¸‹å›¾ã€‚(æ›´å¤šç›¸å…³å‚æ•°é…ç½®å¯ä»¥å‚è€ƒåº”ç”¨æ–¹æ¡ˆæ‰‹å†Œ-å…¬å…±å·¥ä½œå¹³å°ï¼Œå…³äºéªŒè¯ç æ˜¯æ€ä¹ˆç”Ÿæˆçš„ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥åˆ°nccloud.web.riart.login.action.LoginRandActionè·Ÿä¸€ä¸‹ä»£ç )
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=yes6KosTdk&amp;fid=362980571089208&amp;width=1200&amp;height=800&amp;type=min" alt="5.png"></p> <h3 id="_5-31-ç™»é™†æ—¶éªŒè¯ç å‡ºä¸æ¥-ç™»å½•æŠ¥é”™-cn-hutool-captcha-linecaptcha-æˆ–è€…-cn-hutool-captcha-linecaptcha">5.31 ç™»é™†æ—¶éªŒè¯ç å‡ºä¸æ¥ï¼Œç™»å½•æŠ¥é”™ cn/hutool/captcha/LineCaptcha æˆ–è€… cn.hutool.captcha.LineCaptcha</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=rySbPYGRTew&amp;fid=362980571090842&amp;width=1200&amp;height=800&amp;type=min" alt="ä¸‹è½½.jpg"> <strong>è§£å†³æ–¹æ³•ï¼š</strong></p> <p>å‚è€ƒæ–‡æ¡£ï¼š[https://nccdev.yonyou.com/article/detail/473](javascript:void(0))</p> <p>ï¼ˆæœ¬åœ°å¼€å‘æƒ…å†µä¸‹å»ºè®®å…³é—­éªŒè¯ç ï¼š<code>update pub_sysinit set value='N' where initcode='randomimg'</code> ï¼‰</p> <h3 id="_5-32-æ ¹æ®åç§°ç©ºé—´å’Œå®ä½“åç§°æ— æ³•æŸ¥è¯¢åˆ°ç›¸åº”çš„ç»„ä»¶-éœ€è¦æ£€æŸ¥æ¨¡å‹æŸ¥çœ‹æ˜¯å¦æ­¤ç±»å‹å·²è¢«åˆ é™¤-åç§°ç©ºé—´-baseapp-å®ä½“åç§°-workbench">5.32 æ ¹æ®åç§°ç©ºé—´å’Œå®ä½“åç§°æ— æ³•æŸ¥è¯¢åˆ°ç›¸åº”çš„ç»„ä»¶!éœ€è¦æ£€æŸ¥æ¨¡å‹æŸ¥çœ‹æ˜¯å¦æ­¤ç±»å‹å·²è¢«åˆ é™¤!åç§°ç©ºé—´:baseapp, å®ä½“åç§°:workbench</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=rWGmnvH3QXE&amp;fid=362980571089209&amp;width=1200&amp;height=800&amp;type=min" alt="6.png"></p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> è¿™ä¸ªæŠ¥é”™æ˜¯è¯´æ‰¾ä¸åˆ°å¯¹åº”çš„å…ƒæ•°æ®ï¼ŒæŠ¥é”™æ‰€è¯´çš„ã€åç§°ç©ºé—´ã€‘å¯¹åº”md_componentè¡¨çš„namespaceï¼Œå¯¹åº”å…ƒæ•°æ®è§†å›¾ä¸Šç‚¹ç©ºç™½åœ°æ–¹å±æ€§ä¸­çš„åç§°ç©ºé—´ã€‚ã€å®ä½“åç§°ã€‘å¯¹åº”md_classé‡Œé¢çš„nameï¼Œå¯¹åº”å…ƒæ•°æ®ä¸Šç‚¹å‡»æŸä¸€ä¸ªå®ä½“çš„åç§°ã€‚æ ¹æ®è¿™ä¸ªå¯ä»¥å»æ•°æ®åº“é‡Œé¢æŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰è¿™ä¸ªå…ƒæ•°æ®ï¼Œå¦‚æœæœ‰åˆ™éœ€è¦é‡å¯åå°æœåŠ¡ã€‚æŸ¥è¯¢sqlï¼š
<code>SELECT * FROM md_component WHERE namespace = 'baseapp' AND id IN ( SELECT DISTINCT componentID FROM md_class WHERE name = 'workbench' ) AND industry = '0'</code>
ï¼ˆ1ï¼‰å¦‚æœæ˜¯ç™»é™†åæ‰“å¼€é¦–é¡µå°±æŠ¥é”™ï¼Œä¸€èˆ¬æ˜¯homeçš„ç‰ˆæœ¬å’Œæ•°æ®åº“çš„ç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„ï¼Œåº”è¯¥ä½¿ç”¨ç‰ˆæœ¬åŒ¹é…çš„æ•°æ®åº“ã€‚ï¼ˆå¯èƒ½å‡ºç°æ–°çš„ç–‘é—®å°±æ˜¯å¦‚ä½•ç¡®è®¤homeç‰ˆæœ¬å’Œæ•°æ®åº“çš„ç‰ˆæœ¬ï¼Ÿä¸€èˆ¬äº§å“å®‰è£…çš„æ—¶å€™æ¯ä¸ªé¢†åŸŸéƒ½æœ‰è‡ªå·±çš„ç‰ˆæœ¬å·ï¼ŒåŒ…æ‹¬å¹³å°ä¹Ÿæ˜¯ã€‚ä¾‹å¦‚æˆªå›¾çš„æ˜¯baseappæ¨¡å—çš„ï¼Œåœ¨home\ncscript\ria\baseapp\ setup.iniæ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶åå¯ä»¥æ‰¾åˆ°ç›¸åº”é…ç½®è¯´æ˜ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#ç¼–ç 
code=100001
#åç§°
name=baseapp
#ç‰ˆæœ¬å·
version=NC Cloud 2021.1120210913155858
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æ ¹æ®versionå°±å¯ä»¥ç¡®å®šç‰ˆæœ¬æ˜¯NC Cloud 2021.11ç‰ˆæœ¬çš„ã€‚åŒæ—¶ä¹Ÿæ‹¿åˆ°äº§å“å·å³ç¼–ç 100001ï¼Œä»æ•°æ®åº“é‡Œé¢æ‰§è¡Œ<code>select note,productcode,version from sm_product_version where productcode='100001'</code>å°±å¯ä»¥çŸ¥é“æ•°æ®åº“çš„ç‰ˆæœ¬ã€‚ï¼‰</p> <p>ï¼ˆ2ï¼‰å¦‚æœæ˜¯è‡ªå·±çš„èŠ‚ç‚¹æ‰“å¼€æŠ¥é”™ï¼Œè¯´æ˜å…ƒæ•°æ®ä¸å­˜åœ¨æˆ–è€…å…ƒæ•°æ®å·²ç»ä¿®æ”¹ï¼Œæ£€æŸ¥æ•°æ®åº“é‡Œé¢æ˜¯å¦æ­£ç¡®ï¼Œæ£€æŸ¥å¯¹çš„VOæ–¹æ³•getMetaData()ç­‰ç­‰ã€‚å¯ä»¥æŒ‰ä¸‹é¢sqlè¯­å¥æ’æŸ¥æ˜¯å¦å‘å¸ƒè¿›å…¥åº“é‡Œé¢ï¼š<code>SELECT * FROM md_component WHERE namespace = 'æŠ¥é”™æç¤ºçš„åç§°ç©ºé—´' AND id IN ( SELECT DISTINCT componentID FROM md_class WHERE name = 'æŠ¥é”™æç¤ºçš„å®ä½“ç¼–ç ' ) AND industry = '0'</code></p> <p>ï¼ˆ3ï¼‰å¦‚æœæ˜¯åŒ»ç–—è¡Œä¸šç‰ˆæœ¬çš„homeï¼Œä¿®æ”¹ä¸€ä¸‹homeé‡Œé¢çš„é…ç½®æ–‡ä»¶home/ierp/bin/industry_config.xmlï¼ŒbelongNCIndustryCodeæ”¹æˆ48å¹¶é‡å¯åå°æœåŠ¡ï¼Œ<strong>å¦‚æœä¸æ˜¯åŒ»ç–—è¡Œä¸šhomeä¸è¦ä¿®æ”¹</strong></p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=5rYDt76vRvg&amp;fid=362980571102631&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_5-33-ç™»é™†æŠ¥é”™-no-token-seed-æˆ–è€…-invalid-secrity-token-null">5.33 ç™»é™†æŠ¥é”™ï¼Œno token seed æˆ–è€… invalid secrity token(null)</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=ig79GNNWTgQ&amp;fid=362980571089210&amp;width=1200&amp;height=800&amp;type=min" alt="7.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> ä»¤ç‰Œç§å­æ²¡æœ‰é…ç½®æˆ–è¢«äººä¸ºä¿®æ”¹ã€‚åˆ°home\bin\sysconfig.batå·¦ä¾§é€‰â€œç³»ç»Ÿé…ç½®â€ã€‚å³ä¾§ç‚¹â€œå®‰å…¨â€ã€‚è¯»å–ä¿å­˜æˆ–é‡ç½®ä¸€ä¸‹ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=5gHHMF1TKY&amp;fid=362980571089211&amp;width=1200&amp;height=800&amp;type=min" alt="8.png"></p> <h3 id="_5-34-å‰ç«¯æŠ¥é”™æ•°æ®ä¸èƒ½è§£æ-è§£å‹æˆ–è§£å¯†">5.34 å‰ç«¯æŠ¥é”™æ•°æ®ä¸èƒ½è§£æï¼ˆè§£å‹æˆ–è§£å¯†ï¼‰</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=b3G7o9LJRg4&amp;fid=362980571089212&amp;width=1200&amp;height=800&amp;type=min" alt="9.png">
è¯·æ±‚å‚æ•°è§£å‹ç¼©å‡ºé”™ï¼Œå…³æ‰é¡µé¢æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œé‡æ–°æ‰“å¼€ç™»é™†ã€‚æˆ–è€…å…³é—­æµé‡å‹ç¼©home\hotwebs\nccloud\WEB-INF\config\miscellaneous.xmlå…¨éƒ¨æ”¹ä¸ºfalseï¼ŒJDKè®¾ç½®ä¸ºhomeé‡Œé¢çš„ufjdkï¼Œé‡å¯æœåŠ¡ã€‚</p> <h3 id="_5-35-å¼€å‘å·¥å…·æ²¡æœ‰å¯åŠ¨å®¢æˆ·ç«¯å…¥å£-æ€ä¹ˆå¯åŠ¨é‡é‡ç«¯ç•Œé¢">5.35 å¼€å‘å·¥å…·æ²¡æœ‰å¯åŠ¨å®¢æˆ·ç«¯å…¥å£ï¼Œæ€ä¹ˆå¯åŠ¨é‡é‡ç«¯ç•Œé¢ï¼Ÿ</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong>
å‚è€ƒä¸‹é¢æˆªå›¾çš„æ–¹æ³•åŠæ­¥éª¤ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>é¡¹ç›®ï¼šé€‰æ‹©è‡ªå·±çš„ncæˆ–nccé¡¹ç›®ã€‚
å¯åŠ¨ç±»ï¼š
nc.starter.test.JStarter
å¯åŠ¨å‚æ•°ï¼š
-Dnc.exclude.modules=${FIELD_EX_MODULES}
-Dnc.runMode=develop
-Dnc.server.location=${FIELD_NC_HOME}
-DEJBConfigDir=${FIELD_NC_HOME}/ejbXMLs -DExtServiceConfigDir=${FIELD_NC_HOME}/ejbXMLs
-Xmx768m -XX:MaxPermSize=256m
å¦‚æœvariablesé…ç½®äº†FIELD_CLIENT_IPå’ŒFIELD_CLIENT_PORT,ç•Œé¢ä¾ç„¶å‡ºç°can't connect to server,please wait. ä¸Šé¢çš„å¯åŠ¨å‚æ•°é‡Œé¢åŠ å…¥æœåŠ¡ç«¯å£å·ã€‚
-Dnc.jstart.port=8080
 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=iyKmylJKQPY&amp;fid=362980571089317&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <img src="https://nccdev.yonyou.com/shareThumbnail?shareId=LOSKyRy3SH0&amp;fid=362980571089318&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_5-36-é…ç½®æ•°æ®æºæµ‹è¯•æŠ¥é”™-java-sql-sqlrecoverableexception-ioé”™è¯¯-undefined-error">5.36 é…ç½®æ•°æ®æºæµ‹è¯•æŠ¥é”™ï¼šjava.sql.SQLRecoverableException: IOé”™è¯¯: Undefined Error!</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> é—®é¢˜åŸå› æ˜¯windowsè´¦æˆ·åæ˜¯ä¸­æ–‡å¯¼è‡´ï¼ŒæŒ‰ç…§ä¸‹é¢æ­¥éª¤è§£å†³ï¼š
åœ¨â€œè¿è¡Œï¼ˆwin+Rï¼‰â€é‡Œé¢è¾“å…¥â€œcontrol userpasswords2â€ï¼Œå¼¹å‡ºçª—å£ï¼Œé€‰ä¸­ç”¨æˆ·åï¼Œç‚¹å‡»å±æ€§å¹¶ä¿®æ”¹ä¸‹å…¨åä½¿ç”¨è‹±æ–‡ã€‚<strong>ä¿®æ”¹åé‡å¯è®¡ç®—æœºç”Ÿæ•ˆ</strong>ã€‚</p> <p>ä¿®æ”¹å®Œæˆåå¯ä»¥åˆ°ä»»åŠ¡ç®¡ç†å™¨-&gt;ç”¨æˆ·æ£€æŸ¥æ˜¯å¦ä¿®æ”¹ç”Ÿæ•ˆã€‚</p> <h3 id="_5-37-åç«¯å¯åŠ¨æ—¶æŠ¥é”™-init-datasource-error-design-can-not-get-connection-please-check-the-dbset">5.37 åç«¯å¯åŠ¨æ—¶æŠ¥é”™ï¼šInit datasource error [design] can not get connection,please check the DBSet</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> æ£€æŸ¥æ•°æ®æºæ˜¯å¦æµ‹è¯•é€šè¿‡ã€‚å¦‚æœæµ‹è¯•é€šè¿‡éœ€è¦æ£€æŸ¥æ•°æ®åº“é©±åŠ¨ç‰ˆæœ¬æ˜¯å¦åŒ¹é…ï¼Œå¯ä»¥å…ˆæŠŠhome\nclogs\server\æ–‡ä»¶å¤¹åº•ä¸‹çš„æ—¥å¿—æ¸…ç©ºï¼Œå¯åŠ¨æœåŠ¡è¾“å‡ºæ•°æ®æºåˆå§‹åŒ–æŠ¥é”™ååˆ°home\nclogs\server\serverstart-log.logæ£€æŸ¥æŠ¥é”™åŸå› ã€‚å¦‚æœæ˜¯åè®®ä¸åŒ¹é…ä¸€èˆ¬æ˜¯æ•°æ®åº“é©±åŠ¨ç‰ˆæœ¬å¯¼è‡´ï¼Œä¾‹å¦‚æ•°æ®åº“æ˜¯Oracle19cå¯ä»¥åˆ°home\driver\oracle_19c\ojdbc6.jarï¼ŒæŠŠå¯¹åº”jaråŒ…æ›¿æ¢home\lib\ojdbc6.jarï¼Œå…¶ä»–æƒ…å†µç±»ä¼¼ã€‚homeæœåŠ¡å¯åŠ¨æ—¶ä½¿ç”¨çš„æ˜¯home\libæ–‡ä»¶å¤¹ä¸‹é¢å¯¹åº”ç‰ˆæœ¬é©±åŠ¨åŒ…ã€‚</p> <h3 id="_5-38-æŠ¥é”™æç¤º-get-connection-error-design-u-50-f-0-50-1-p0">5.38 æŠ¥é”™æç¤ºï¼šget connection error!!###design:::u:50:::f:0::::50::::1:::p0</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=DebQy5AzTGI&amp;fid=362980571100471&amp;width=1200&amp;height=800&amp;type=min" alt="1673341272683.jpg"></p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> æ•°æ®åº“è¿æ¥æ± è·å–è¿æ¥çš„æ—¶å€™æŠ¥é”™ã€‚æŠ¥é”™ä½ç½®ï¼š<code>uap.mw.ds.UAPDataSource</code> æ–¹æ³•ï¼šgetConnectionè·å–ä¸åˆ°å¯ç”¨è¿æ¥æ—¶ä¼šæŠ›å‡ºé”™è¯¯</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getErrorMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;###&quot;</span> <span class="token operator">+</span> <span class="token function">getDataSourceName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;:::u:&quot;</span> <span class="token operator">+</span> <span class="token function">getInUsedConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;:::f:&quot;</span> <span class="token operator">+</span> <span class="token function">getFreeConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;::::&quot;</span> <span class="token operator">+</span> <span class="token function">getMaxConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;::::&quot;</span> <span class="token operator">+</span> <span class="token function">getMinConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;:::p&quot;</span> <span class="token operator">+</span> <span class="token function">getPoolConnPermit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æŠ¥é”™ä¿¡æ¯çš„é”™è¯¯å«ä¹‰ï¼š<code>###{æ•°æ®æºç¼–ç }:::u:{è¢«å ç”¨çš„è¿æ¥æ•°}:::f:{ç©ºé—²è¿æ¥æ•°}::::{æœ€å¤§è¿æ¥æ•°}::::{æœ€å°è¿æ¥æ•°}:::p{å¯ç”¨è¿æ¥æ•°}</code></p> <p>æ‰€ä»¥å¦‚æœç©ºé—²è¿æ¥æ•°æ˜¯0çš„æƒ…å†µä¸‹ï¼Œä¸€èˆ¬æ˜¯æ•°æ®åº“è¿æ¥æ± çš„è¿æ¥è¢«ç”¨å°½äº†ã€‚æ­¤æ—¶åªéœ€è¦åˆ°sysconfigé…ç½®å·¥å…·æŠŠæœ€å¤§è¿æ¥æ•°è°ƒå¤§ä¸€ç‚¹é‡å¯æœåŠ¡å³å¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=e8fRmFjRIQ&amp;fid=362980571100475&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_5-39-æŠ¥é”™æç¤ºno-column-info-for-xx-xxxx-at-datasource-design">5.39 æŠ¥é”™æç¤ºno column info for: xx_xxxx at datasource: design</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> æŠ¥é”™æç¤ºçš„xx_xxxxæ˜¯ä¸€ä¸ªè¡¨åå­—ï¼Œè¯´æ˜è¿™ä¸ªè¡¨ä¸å­˜åœ¨ã€‚å¦‚æœæ˜¯å®¢å¼€çš„è¡¨åè‡ªå·±åˆ›å»ºä¸€ä¸‹ã€‚å¦‚æœæ˜¯æ ‡å‡†äº§å“çš„è¯´æ˜äº§å“å®‰è£…ä¸æ­£ç¡®ï¼Œæœ€ç®€å•çš„è§£å†³æ–¹æ³•æ˜¯æ¢æ•°æ®åº“ã€‚</p> <h3 id="_5-40-èµ·æœåŠ¡æŠ¥é”™-æ§åˆ¶å°æç¤ºorg-slf4j-loggerfactory-in-failed-state-æˆ–è€…æç¤º-nccloud-framework-core-filter-cachefilter-destroy-cachefilter-java-33">5.40 èµ·æœåŠ¡æŠ¥é”™ï¼Œæ§åˆ¶å°æç¤ºorg.slf4j.LoggerFactory in failed state. æˆ–è€…æç¤º nccloud.framework.core.filter.CacheFilter.destroy(CacheFilter.java:33)</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=eg5b9c3LRRg&amp;fid=362980571104596&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=1UYIpwy0QDQ&amp;fid=362980571104598&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> <strong>å¦‚æœæ˜¯æœ¬åœ°å¼€å‘ç¯å¢ƒ</strong> ç¬¬ä¸€æ­¥åœ¨home/external/libä¸­æ·»åŠ jaråŒ…ï¼šlog4j-1.2.17.jar(æ­¤jaråŒ…ä»2105æˆ–2105ä»¥å‰çš„homeä¸­æ‰¾å°±å¯ä»¥)
ç¬¬äºŒæ­¥åœ¨home/ierp/bin/esapi/ESAPI.propertiesä¸­æ·»åŠ è¯­å¥ï¼š<code>ESAPI.Logger=org.owasp.esapi.reference.Log4JLogFactory</code> ç„¶åæ›´æ–°ç±»è·¯å¾„é‡å¯æœåŠ¡ã€‚</p> <p>å¦‚æœä¸æ˜¯æœ¬åœ°çš„å¼€å‘ç¯å¢ƒä¸€èˆ¬æ˜¯jarå†²çªå¯¼è‡´ï¼Œåˆ é™¤å†²çªjaråŒ…å³å¯ã€‚</p> <h2 id="_6-å•ç‚¹ç™»é™†">6 å•ç‚¹ç™»é™†</h2> <h3 id="_6-1-å•ç‚¹ç™»é™†åç™½å±æˆ–ä»éœ€è¦å¯†ç ç™»é™†">6.1 å•ç‚¹ç™»é™†åç™½å±æˆ–ä»éœ€è¦å¯†ç ç™»é™†</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> å¯ä»¥æ ¹æ®ä»¥ä¸‹æƒ…å†µæ£€æŸ¥ï¼š</p> <p>(1)å¦‚æœæ˜¯2005ã€2105ç‰ˆæœ¬çš„ï¼Œéœ€è¦æ‰“å•ç‚¹ç™»é™†ç™½å±å…å¯†ç è¾“å…¥çš„è¡¥ä¸ã€‚</p> <p>(2)å¦‚æœæ‰“äº†è¡¥ä¸ï¼Œå•ç‚¹ç™»é™†è·¯å¾„é‡Œé¢ä¸è¦ç”¨localhostï¼Œåº”è¯¥ç”¨127.0.0.1ï¼Œæœ‰äº›å°ä¼™ä¼´æŠŠè¡¥ä¸æ‰“åˆ°homeé‡Œé¢äº†ï¼Œæ³¨æ„æœ¬åœ°å¼€å‘æ—¶hotwebs\nccloud\WEB-INF\classesè¿™é‡Œåº”è¯¥æ˜¯ç©ºçš„ï¼Œå»ºè®®å¯ä»¥æŠŠç±»æ”¾åˆ°è‡ªå·±å·¥ç¨‹é‡Œé¢ã€‚</p> <p>(3)æ£€æŸ¥ä¸€ä¸‹ç”¨æˆ·çŠ¶æ€ï¼šçœ‹ç”¨æˆ·èƒ½å¦é€šè¿‡ç™»é™†ç•Œé¢æ­£å¸¸ç™»é™†ï¼Œè‹¥ç”¨æˆ·çŠ¶æ€ä¸æ­£å¸¸å¯èƒ½å‡ºé—®é¢˜ã€‚</p> <p>(4)å¦‚æœæ˜¯å¤šè´¦å¥—çš„è¯æŠŠbusicentercodeå³è´¦å¥—ç¼–ç ä¼ é€’è¿‡å»ã€‚</p> <h3 id="_6-2-å•ç‚¹ç™»é™†æç¤ºæ‰¾ä¸åˆ°é¡µé¢-æŠ±æ­‰-æ‚¨è¯·æ±‚çš„é¡µé¢å‡ºé”™å•¦">6.2 å•ç‚¹ç™»é™†æç¤ºæ‰¾ä¸åˆ°é¡µé¢ï¼šæŠ±æ­‰ï¼Œæ‚¨è¯·æ±‚çš„é¡µé¢å‡ºé”™å•¦ï¼</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=XxZFk3pQ3Q&amp;fid=362980571089109&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> æ‹¼æ¥çš„urlé”™è¯¯ï¼Œæ£€æŸ¥å¦‚æœæ˜¯ [http://ip:port/uap/](javascript:void(0))... åœ°å€åº”è¯¥ä¸º[http://ip:port/nccloud/resources/uap/](javascript:void(0))...</p> <h3 id="_6-3-nccå•ç‚¹ç™»å½•æ—¶æœåŠ¡è¿”å›401">6.3 NCCå•ç‚¹ç™»å½•æ—¶æœåŠ¡è¿”å›401</h3> <p>æŠ¥é”™ä¿¡æ¯ï¼š
java.io.IOException: Server returned HTTP response code: 401 for URL: [http://192.168.48.133:9903/service/genThirdPartyAccessToken](javascript:void(0))
at sun.net.[www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1894)](javascript:void(0))
at sun.net.[www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1492)](javascript:void(0))</p> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong>
åŸå› æ˜¯home\ierp\sf\nccssoConfig.xmlæ–‡ä»¶ä¸­æœªé…ç½®ç™½åå•ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨listParamé‡Œé¢é…ç½®å…è®¸è®¿é—®çš„å®¢æˆ·ç«¯ipï¼Œæ³¨æ„æ˜¯å®¢æˆ·ç«¯ipï¼Œä¸æ˜¯ç¬¬ä¸‰æ–¹æœåŠ¡å™¨ipã€‚å¯ä»¥ä½¿ç”¨<em>å·è¿›è¡ŒåŒ¹é…ï¼Œä¾‹å¦‚192.168.</em>.*</p> <p>å¦‚æœå·²ç»é…ç½®äº†ç™½åå•ä¾ç„¶æŠ¥é”™ï¼Œå°è¯•åˆ é™¤é…ç½®æ–‡ä»¶çš„listParamæˆ–è€…æŠŠipåœ°å€é…ç½®æˆ*.<em>.</em>.* å³ä¸æ ¡éªŒipåœ°å€ã€‚å°è¯•åˆ é™¤sm_oauth_securityå¯¹åº”è¡¨çš„client_securityã€‚</p> <p>å¿…è¦æ—¶å¯ä»¥åˆ°ncc.sso.bs.DefaultNCCSSOAuthenticatoré‡Œé¢è·Ÿä¸€ä¸‹ä»£ç ã€‚
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=G6CtZTXsRuY&amp;fid=362980571089110&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <h3 id="_6-4-å•ç‚¹ç™»é™†æç¤º-æœªæ‰¾åˆ°ç¬¬ä¸‰æ–¹ç³»ç»Ÿ">6.4 å•ç‚¹ç™»é™†æç¤ºâ€œæœªæ‰¾åˆ°ç¬¬ä¸‰æ–¹ç³»ç»Ÿâ€</h3> <p><strong>è§£å†³æ–¹æ³•ï¼š</strong> è¿™ä¸ªé—®é¢˜åœ¨äºtokençš„å¤šæ¬¡ä½¿ç”¨æˆ–tokené”™è¯¯ã€‚å•ç‚¹ç™»é™†çš„tokenåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œç”¨è¿‡åå°±å¤±æ•ˆäº†ï¼Œè¿™ç‚¹éœ€è¦æ³¨æ„ã€‚</p> <p>æ‰“å¼€ç±»ThirdPartyLoginVerfiyActionï¼Œå¯ä»¥æ‰¾åˆ°å¦‚ä¸‹ä»£ç ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">INCCSSOService</span> nccSSOService <span class="token operator">=</span> <span class="token class-name">ServiceLocator</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token class-name">INCCSSOService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">NCCSSORegInfo</span> regInfo <span class="token operator">=</span> nccSSOService<span class="token punctuation">.</span><span class="token function">fetchSSORegInfo</span><span class="token punctuation">(</span>access_token<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>regInfo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">IUserLoginHandler<span class="token punctuation">.</span>RSL_Code</span><span class="token punctuation">,</span> <span class="token class-name">IUserLoginHandler</span><span class="token punctuation">.</span>TOKEN_WRONG<span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">IUserLoginHandler</span><span class="token punctuation">.</span>RSL_MSG<span class="token punctuation">,</span> <span class="token string">&quot;æœªæ‰¾åˆ°ç¬¬ä¸‰æ–¹ç³»ç»Ÿ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å…³äºæŸ¥æ‰¾tokençš„ä»£ç ï¼Œå¦‚æœæ‰¾åˆ°æºå¤´å¯ä»¥çœ‹åˆ°ï¼Œtokenä¿¡æ¯ä¼šå­˜åœ¨mapä¸­ï¼Œè·å–åå°±removeæ‰äº†ï¼š</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">NCCSSORegInfo</span> <span class="token function">fetchSSORegInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> access_token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> regInfoMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>access_token<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_6-5-nccå•ç‚¹ç™»å½•ç”¨æ‹¼å¥½çš„urlåœ°å€æç¤º-è®¿é—®xxxxd-çš„è¯·æ±‚é­åˆ°æ‹’ç»-æ‚¨æœªè·æˆæƒ-æ— æ³•æŸ¥çœ‹æ­¤ç½‘é¡µã€‚-http-error-403">6.5 NCCå•ç‚¹ç™»å½•ç”¨æ‹¼å¥½çš„urlåœ°å€æç¤ºâ€œè®¿é—®xxxxd çš„è¯·æ±‚é­åˆ°æ‹’ç»â€ æ‚¨æœªè·æˆæƒï¼Œæ— æ³•æŸ¥çœ‹æ­¤ç½‘é¡µã€‚ HTTP ERROR 403</h3> <p><img src="https://nccdev.yonyou.com/shareThumbnail?shareId=hxgChL9QvQ&amp;fid=362980571089111&amp;width=1200&amp;height=800&amp;type=min" alt="aba8e5fdfba140653d80cb352a70f8b.png"> <strong>è§£å†³æ–¹æ³•ï¼š</strong> é—®é¢˜åŸå› æ˜¯è·¨åŸŸæ‹¦æˆªäº†ã€‚å¦‚æœæ‰“å¼€home\hotwebs\nccloud\WEB-INF\web.xmlå¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šçš„filteré…ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯å½“æœ‰ä¸€æ¬¡å‘åå°çš„NCCçš„æœåŠ¡è¯·æ±‚æ—¶ï¼Œä¼šæŒ‰ç…§web.xmlé‡Œé¢é…ç½®çš„filteré¡ºåºä¾æ¬¡è¿›è¡Œè¿‡æ»¤ï¼Œåªæœ‰ç»è¿‡æ»¤ç­›é€‰ç¬¦åˆNCCå®‰å…¨è¦æ±‚çš„æ‰èƒ½è¿›å…¥ç³»ç»Ÿï¼Œè°ƒç”¨å„ä¸ªä¸šåŠ¡é¢†åŸŸçš„actionä»£ç ã€‚åŒ…æ‹¬æˆ‘ä»¬æ–‡æ¡£å‰é¢æåˆ°çš„AppActionAuthorizeFilterä¹Ÿæ˜¯åœ¨è¿™é‡Œé¢é…ç½®çš„ã€‚</p> <p>åœ¨filterä¸­æœ‰ä¸€ä¸ªnccloud.framework.core.filter.CorsFilteræ˜¯è·¨åŸŸè¯·æ±‚å¤„ç†çš„ã€‚ç±»é‡Œé¢å¯ä»¥çœ‹åˆ°å®ƒé€šè¿‡<code>String referer = request.getHeader(&quot;referer&quot;);</code> åˆ¤æ–­æœåŠ¡è¯·æ±‚æ–¹ã€‚ä»ç±»é‡Œé¢æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰¾åˆ°å¯¹åº”çš„ <strong>é…ç½®æ–‡ä»¶ä¸ºhome\hotwebs\nccloud\WEB-INF\corsfilter.properties</strong> ï¼ŒæŠŠé…ç½®æ–‡ä»¶é‡Œçš„refereræŒ‰é€—å·åˆ†å‰²æˆæ•°ç»„ï¼Œåªè¦è¯·æ±‚çš„è·¯å¾„éƒ¨åˆ†åŒ…å«é…ç½®æ–‡ä»¶é‡Œçš„è·¯å¾„å³å¯ã€‚<strong>å½“ç„¶å¦‚æœç”¨äº†åŸŸååº”è¯¥é…ç½®åŸŸåè€Œä¸æ˜¯ipï¼Œå¤šä¸ªä¹‹é—´ç”¨è‹±æ–‡é€—å·åˆ†å‰²</strong>ã€‚å‚è€ƒä¸‹é¢æˆªå›¾ï¼š
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=Dhcx3nI9QFE&amp;fid=362980571090519&amp;width=1200&amp;height=800&amp;type=min" alt="image.png"></p> <p>é…ç½®ç¤ºä¾‹å¦‚ä¸‹ï¼š</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">....//çœç•¥éƒ¨åˆ†ï¼Œå¦‚æœæ˜¯80ç«¯å£ä¸€å®šä¸è¦</span><span class="token punctuation">:</span><span class="token attr-value">port</span>
<span class="token attr-name">referer</span><span class="token punctuation">=</span><span class="token attr-value">http://IPåœ°å€1:port,https://IPåœ°å€2:port,http://åŸŸå1,https://åŸŸå2:port</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_6-6-å•ç‚¹ç™»é™†tokençš„å¤±æ•ˆæ—¶é—´æ˜¯å¤šå°‘-èƒ½å¦é…ç½®">6.6 å•ç‚¹ç™»é™†tokençš„å¤±æ•ˆæ—¶é—´æ˜¯å¤šå°‘ï¼Ÿèƒ½å¦é…ç½®ï¼Ÿ</h3> <p>NCCè½»é‡ç«¯åœ¨home\ierp\sf\nccssoConfig.xmlé‡Œé¢é…ç½®regTimeoutå³å¯ï¼Œé‡é‡ç«¯å•ç‚¹tokenå¤±æ•ˆæ—¶é—´åœ¨home\ierp\sf\ssoConfig.xmlçš„regTimeoutã€‚ é…ç½®æ–‡ä»¶åˆå§‹åŒ–çš„ç±»ï¼šncc.sso.bs.NCCSSOConfigParser
<img src="https://nccdev.yonyou.com/shareThumbnail?shareId=JnZdg6v8Tas&amp;fid=362980571089213&amp;width=1200&amp;height=800&amp;type=min" alt="1.png"></p> <h3 id="_6-7-å¦‚ä½•é€šè¿‡å•ç‚¹ç™»é™†æ‰“å¼€æŸä¸€ä¸ªèŠ‚ç‚¹">6.7 å¦‚ä½•é€šè¿‡å•ç‚¹ç™»é™†æ‰“å¼€æŸä¸€ä¸ªèŠ‚ç‚¹ï¼Ÿ</h3> <p><strong>å‚è€ƒæ–‡æ¡£</strong> [https://nccdev.yonyou.com/article/detail/207](javascript:void(0))</p> <h3 id="_6-8-å•ç‚¹ç™»é™†åˆ°å®¡æ‰¹è¯¦æƒ…å-ç‚¹è¿”å›æŒ‰é’®ä¸èµ·ä½œç”¨-æ— æ³•è¿”å›åˆ°åˆ—è¡¨">6.8 å•ç‚¹ç™»é™†åˆ°å®¡æ‰¹è¯¦æƒ…åï¼Œç‚¹è¿”å›æŒ‰é’®ä¸èµ·ä½œç”¨ï¼Œæ— æ³•è¿”å›åˆ°åˆ—è¡¨</h3> <p>æ‰‹åŠ¨æ‰“å¼€èŠ‚ç‚¹çœ‹çœ‹æ˜¯å¦æ­£å¸¸ï¼Œå¦‚æœæ‰‹åŠ¨æ‰“å¼€æ­£å¸¸ä½†æ˜¯å•ç‚¹ç™»é™†è¿›å»ä¸æ­£å¸¸è¯´æ˜å•ç‚¹ç™»é™†æ—¶æ‹¼æ¥urlé”™è¯¯ï¼Œæ£€æŸ¥è·¯å¾„ã€‚</p> <h3 id="_6-9-è¿ç»­å•ç‚¹ç™»å½•-ç¬¬äºŒæ¬¡å•ç‚¹ç™»å½•æç¤º-ç”¨æˆ·æ²¡æœ‰ç™»å½•-å³å°†è·³è½¬åˆ°ç™»å½•é¡µé¢">6.9 è¿ç»­å•ç‚¹ç™»å½•ï¼Œç¬¬äºŒæ¬¡å•ç‚¹ç™»å½•æç¤ºâ€œç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œå³å°†è·³è½¬åˆ°ç™»å½•é¡µé¢â€</h3> <p><strong>å‚è€ƒæ–‡æ¡£</strong>ï¼š [https://nccdev.yonyou.com/article/detail/974](javascript:void(0))</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zbsilent/studio/edit/master/docs/works/NCCå¼‚å¸¸é—®é¢˜è®°å½•.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/15/2024, 11:18:43 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/works/IDEAä¸å®Œå…¨ä½¿ç”¨æŒ‡åŒ—.html" class="prev">
        /works/IDEAä¸å®Œå…¨ä½¿ç”¨æŒ‡åŒ—.html
      </a></span> <span class="next"><a href="/java/jdk8.html">
        JAVAåŸºç¡€ç¯‡
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f2d19692.js" defer></script><script src="/assets/js/2.f296f515.js" defer></script><script src="/assets/js/50.b96fa85e.js" defer></script>
  </body>
</html>
