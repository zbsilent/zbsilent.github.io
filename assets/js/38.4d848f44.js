(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{423:function(s,t,a){"use strict";a.r(t);var n=a(54),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"springcloud基础2"}},[s._v("SPRINGCLOUD基础2")]),s._v(" "),a("p",[a("em",[s._v("For the memory of forgetting")]),s._v("$Summer Aurora$")]),s._v(" "),a("h2",{attrs:{id:"_1、技术选型"}},[s._v("1、技术选型")]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://start.spring.io/actuator/info",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://start.spring.io/actuator/info"),a("OutboundLink")],1)])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"spring-cloud"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"Hoxton.SR11"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Spring Boot >=2.2.0.RELEASE and <2.3.12.BUILD-SNAPSHOT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"Hoxton.BUILD-SNAPSHOT"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Spring Boot >=2.3.12.BUILD-SNAPSHOT and <2.4.0.M1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"2020.0.0-M3"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Spring Boot >=2.4.0.M1 and <=2.4.0.M1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"2020.0.0-M4"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Spring Boot >=2.4.0.M2 and <=2.4.0-M3"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"2020.0.0"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Spring Boot >=2.4.0.M4 and <=2.4.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"2020.0.3"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Spring Boot >=2.4.1 and <2.5.1-SNAPSHOT"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"2020.0.4-SNAPSHOT"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Spring Boot >=2.5.1-SNAPSHOT"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"spring-cloud-alibaba"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"2.2.1.RELEASE"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Spring Boot >=2.2.0.RELEASE and <2.3.0.M1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("hr"),s._v(" "),a("p",[a("em",[s._v("Configuration")]),s._v(": 推荐使用Cloud Version: 2020.0.3 ,Boot Version 2.4.6")]),s._v(" "),a("h2",{attrs:{id:"_2、停更、升级、替换"}},[s._v("2、停更、升级、替换")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zbsilent/imag/main/image-20210608235908726.png",alt:"image-20210608235908726"}})]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"_3、项目结构"}},[s._v("3、项目结构")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Aurora\n--Cloud-provider-payment\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[a("code",[s._v("<dependencyManagement/>")]),s._v("指定元素中的POM父类版本中才拥有、子项目的版本号跟父类保持一致"),a("a",{attrs:{href:"%E5%A6%82%E4%BD%95%E8%B7%B3%E8%BF%87MAVEN%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"}},[s._v("^1")])])]),s._v(" "),a("p",[a("em",[s._v("Configuration:")]),a("strong",[s._v("File Types")]),s._v(" "),a("code",[s._v("Editor->File Types-> Ignore files and folders")])]),s._v(" "),a("p",[s._v("​\t\t\t\t\t\t"),a("strong",[s._v("builder")]),a("code",[s._v("Complier->Annotation Processors")])]),s._v(" "),a("h2",{attrs:{id:"_4、业务代码编写"}},[s._v("4、业务代码编写")]),s._v(" "),a("h3",{attrs:{id:"_4-1-创建数据库"}},[s._v("4.1 创建数据库")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"http://82.156.26.299:8083/GameServer/index",target:"_blank",rel:"noopener noreferrer"}},[s._v("2"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"_4-2-标准结果返回-3"}},[s._v("4.2 标准结果返回[^3]")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Data")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@AllArgsConstructor")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@NoArgsConstructor")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CommonResult")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("T")]),s._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CommonResult")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Integer")]),s._v(" code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("blockquote",[a("p",[s._v("范型传进去什么是什么")])]),s._v(" "),a("h3",{attrs:{id:"_4-3-dao层-4"}},[s._v("4.3 Dao层"),a("a",{attrs:{href:"_MyBatis%E6%B3%A8%E8%A7%A3%E8%A1%A5%E6%BC%8F_"}},[s._v("^4")])]),s._v(" "),a("h3",{attrs:{id:"_4-3-service层-5"}},[s._v("4.3 Service层[^5]")]),s._v(" "),a("h3",{attrs:{id:"_4-4-controller层"}},[s._v("4.4 Controller层")]),s._v(" "),a("h3",{attrs:{id:"_4-5-eureka"}},[s._v("4.5 Eureka")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("@EnableEurekaServer 开启服务注册中心")])]),s._v(" "),a("li",[a("p",[s._v("@EnableEurekaClient 注册")])]),s._v(" "),a("li",[a("blockquote",[a("p",[s._v("eureka:\ninstance:\nhostname: localhost\nclient:\nregister-with-eureka: false # 不向自己注册\nfetch-registry: false # 维护服务实例，不需要检索服务\nservice-url:\ndefaultZone: http://${eureka.instance.hostname}😒{server.port}/eureka/")])])]),s._v(" "),a("li",[a("blockquote",[a("p",[s._v("eureka:\ninstance:\nprefer-ip-address: true #使用服务的IP地址注册\nclient:\nservice-url:\ndefaultZone: http://localhost:7001/eureka/\nregister-with-eureka: true\nfetch-registry: true #单节点无所谓 集群必须配置rebbon使用负载均衡")])])]),s._v(" "),a("li",[a("p",[a("a",[s._v("集群")])]),s._v(" "),a("ul",[a("li",[a("p",[a("a",[s._v("互相注册，相互守望")])])]),s._v(" "),a("li",[a("p",[s._v("修改HOST文件"),a("a",{attrs:{href:"host%E6%96%87%E4%BB%B6%E8%AE%BE%E7%BD%AElocalhost%E6%98%A0%E5%B0%84"}},[s._v("^6")])])]),s._v(" "),a("li",[a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("server"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7002")]),s._v("\neureka"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n  instance"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    hostname"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" eureka7002"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com\n  client"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n    register"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("eureka"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" # 不向自己注册\n    fetch"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("registry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v(" # 维护服务实例，不需要检索服务\n    service"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("\n      defaultZone"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" http"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("eureka7001"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7001")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("eureka"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])])])])])]),s._v(" "),a("h2",{attrs:{id:"_5、-cp-ap"}},[s._v("5、 CP/AP")]),s._v(" "),a("blockquote",[a("p",[s._v("一致性（Consistency）、可用性（Availability）、分区容错性（Partition tolerance）")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("AP(Eureka) 高可用")])]),s._v(" "),a("li",[a("p",[s._v("CP(Zookeeper/Consul) 数据一致")])])]),s._v(" "),a("h2",{attrs:{id:"_6、-ribbon"}},[s._v("6、 Ribbon")]),s._v(" "),a("blockquote",[a("p",[s._v("自动基于某准规则连接服务 实现负载均衡和服务器调用的小工具")]),s._v(" "),a("p",[s._v("负载均衡+RestTimplete实现调用")]),s._v(" "),a("p",[s._v("软负载均衡的客户端组件")])]),s._v(" "),a("h2",{attrs:{id:"_7、-hystrix"}},[s._v("7、 Hystrix")]),s._v(" "),a("blockquote",[a("p",[s._v("服务降级 程序异常，超时，服务熔断出发服务降级，线程池/信号量满 fallboack")]),s._v(" "),a("p",[s._v("服务熔断 保险丝")]),s._v(" "),a("p",[s._v("服务限流 保证服务器不被拥挤")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**注解到类上*/")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@HystrixCommand")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n      fallbackMethod "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"errorHandle"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      commandProperties "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@HystrixProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"execution.isolation.thread.timeoutInMilliseconds"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1500"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@HystrixProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"execution.timeout.enabled"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"true"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[s._v("熔断 检测正常后，恢复链路调用")])]),s._v(" "),a("p",[s._v("Config设置")]),s._v(" "),a("ul",[a("li",[s._v("新建仓库")])]),s._v(" "),a("h1",{attrs:{id:"nacos"}},[s._v("Nacos")]),s._v(" "),a("hr"),s._v(" "),a("p",[a("em",[a("strong",[s._v("Reference:")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/zbsilent/imag/main/image-20210609004313196.png",alt:"image-20210609004313196"}})]),s._v(" "),a("p",[s._v("[^3]:"),a("a",{attrs:{href:"https://www.cnblogs.com/lukelook/p/12800812.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Java Doc注释详解"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("[^5]: "),a("em",[a("strong",[s._v("Configuration of  Transactional:")])])]),s._v(" "),a("blockquote",[a("p",[s._v("@EnableTransactionManagement")]),s._v(" "),a("hr"),s._v(" "),a("p",[a("strong",[s._v("Required")]),s._v(" "),a("em",[s._v("需要 如果存在一个事务，则支持当前事务。如果没有事务则开启")])]),s._v(" "),a("p",[a("strong",[s._v("Supports")]),s._v(" "),a("em",[s._v("支持 如果存在一个事务，支持当前事务。如果没有事务，则非事务的执行")])]),s._v(" "),a("p",[a("strong",[s._v("Mandatory")]),s._v(" "),a("em",[s._v("必要的 如果已经存在一个事务，支持当前事务。如果没有一个活动的事务，则抛出异常。")])]),s._v(" "),a("p",[s._v("**required_new ** "),a("em",[s._v("总是开启一个新的事务。如果一个事务已经存在，则将这个存在的事务挂起。")])]),s._v(" "),a("p",[a("strong",[s._v("Not_support")]),s._v(" "),a("em",[s._v("总是非事务地执行，并挂起任何存在的事务。")])]),s._v(" "),a("p",[a("strong",[s._v("Never")]),s._v(" "),a("em",[s._v("绝不 总是非事务地执行，如果存在一个活动事务，则抛出异常")])]),s._v(" "),a("p",[a("strong",[s._v("Nested")]),s._v(" "),a("em",[s._v("嵌套的 如果有就嵌套、没有就开启事务")])])]),s._v(" "),a("blockquote",[a("p",[s._v('@Results({\n@Result(property="grade",column="gid",one=@One(select="cn.easytop.lesson03.resultMap.anno.GradeMapper.queryGrade"))\n/*\n*根据@Select("select * from student where sid=#{0}")结果  把gid自动映射到数据库中的列名gid（属性名和列名一致自动映射）\n*把gid传入到one=@One(select="cn.easytop.lesson03.resultMap.anno.GradeMapper.queryGrade")')]),s._v(" "),a("ul",[a("li",[a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v(' 此方法中查询出结果映射到Student中的grade属性  property="grade"\n   \t *\n   \t */\n')])])]),s._v('})\n@Select("select * from student where sid=#{0}")\npublic Student queryStudent(String sid)')])]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v('//查询班级带出学生\n@Results({\n//属性名映射到数据库的列名中\n@Result(property="gname1",column="gname"),\n/*')]),s._v(" "),a("ul",[a("li",[s._v('根据@Select("select * from grade where gid=#{0}")查询出来的gid与数据库中学生列表名映射（一致自动映射）\n'),a("ul",[a("li",[s._v('把gid传递到 "cn.easytop.lesson03.resultMap.anno.StudentMapper.queryAllStudent" 此方法中\n'),a("ul",[a("li",[s._v("查询出来的结果与Grade中的 studentList映射   并指定类型 javaType=List.class\n"),a("ul",[a("li",[s._v('*/\n@Result(property="studentList",javaType=List.class,column="gid",many=@Many\n(select="cn.easytop.lesson03.resultMap.anno.StudentMapper.queryAllStudent"))\n}\n)\n@Select("select * from grade where gid=#{0}")\npublic Grade queryAllGrade(String gid);')])])])])])])])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("##\n# Host Database\n#\n# localhost is used to configure the loopback interface\n# when the system is booting.  Do not change this entry.\n##\n127.0.0.1\tlocalhost\n127.0.0.1\teureka7001\n127.0.0.1\teureka7002\n127.0.0.1\teureka7003\n255.255.255.255\tbroadcasthost\n::1             localhost\n# Added by Docker Desktop\n# To allow the same kube context to work on the host and the container:\n127.0.0.1 kubernetes.docker.internal\n# End of section\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);