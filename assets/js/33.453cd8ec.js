(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{424:function(e,t,s){"use strict";s.r(t);var r=s(54),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"高可用分布式集群篇"}},[e._v("高可用分布式集群篇")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://kubernetes.io/zh/docs/home/",target:"_blank",rel:"noopener noreferrer"}},[e._v("kubernetes"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("_reference:_Kubernetes 是一个可移植的、可扩展的开源平台，用于管理容器化的工作负载和服务，可促进声明式配置和自动化。 Kubernetes 拥有一个庞大且快速增长的生态系统。Kubernetes 的服务、支持和工具广泛可用。")]),e._v(" "),s("p",[s("strong",[e._v("Kubernetes")]),e._v(" 这个名字源于希腊语，意为“舵手”或“飞行员”。k8s 这个缩写是因为 k 和 s 之间有八个字符的关系。 Google 在 2014 年开源了 Kubernetes 项目。Kubernetes 建立在 "),s("a",{attrs:{href:"https://research.google/pubs/pub43438",target:"_blank",rel:"noopener noreferrer"}},[e._v("Google 在大规模运行生产工作负载方面拥有十几年的经验"),s("OutboundLink")],1),e._v(" 的基础上，结合了社区中最好的想法和实践。")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://kubernetes.io/zh/docs/tutorials/kubernetes-basics/",target:"_blank",rel:"noopener noreferrer"}},[e._v("kubernetes基础知识"),s("OutboundLink")],1)]),e._v(" "),s("h3",{attrs:{id:"install"}},[e._v("Install")]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("brew "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("install")]),e._v(" kubectl \n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("blockquote",[s("p",[e._v("安装路径 /usr/local/bin/kubectl")])]),e._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("kubectl version --client\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h3",{attrs:{id:"架构"}},[e._v("架构")]),e._v(" "),s("h4",{attrs:{id:"mater节点"}},[e._v("mater节点")]),e._v(" "),s("h5",{attrs:{id:"apiserver"}},[e._v("apiserver")]),e._v(" "),s("ol",[s("li",[e._v("暴露K8s的api接口，是外界进行资源操作的唯一入口")])]),e._v(" "),s("h5",{attrs:{id:"etcd"}},[e._v("etcd")]),e._v(" "),s("ol",[s("li",[e._v("高一致性，高可用的键值数据库，可以保存kubernetes的所有集团和后台数据")])]),e._v(" "),s("h5",{attrs:{id:"scheduler"}},[e._v("scheduler")]),e._v(" "),s("ol",[s("li",[e._v("主节点上的组件，监视哪些新创建的未指定运行的节点")])]),e._v(" "),s("h5",{attrs:{id:"controller-manager"}},[e._v("controller-manager")]),e._v(" "),s("ol",[s("li",[e._v("调度不同控制器")])]),e._v(" "),s("p",[e._v("container 容器，可以说docker启动的一个容器")]),e._v(" "),s("p",[e._v("kubelet 工作组 代理")]),e._v(" "),s("p",[e._v("pod 是k8s中的最小部署单元")]),e._v(" "),s("p",[e._v("volume pod容器中可以访问的目录")]),e._v(" "),s("p",[e._v("controllers 更高层次的对象，部署和管理pod")]),e._v(" "),s("p",[e._v("deployment 部署操作")]),e._v(" "),s("p",[e._v("service 定义一个pod的访问策略 组合一些pod  部署到节点")]),e._v(" "),s("p",[e._v("Lable 标签，用于对象的资源的查询，筛选")]),e._v(" "),s("p",[e._v("namespace 命民空间，逻辑隔离 每个资源都属于一个namespace，同一个namespace里的lable不允许重复")]),e._v(" "),s("h5",{attrs:{id:"创建节点"}},[e._v("创建节点")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/zbsilent/imag/main/img/2022/image-20220322112732447.png",alt:"image-20220322112732447"}})]),e._v(" "),s("h5",{attrs:{id:"部署流程"}},[e._v("部署流程")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/zbsilent/imag/main/img/2022/image-20220322113336799.png",alt:"image-20220322113336799"}})]),e._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/zbsilent/imag/main/img/2022/image-20220322113405806.png",alt:"image-20220322113405806"}})]),e._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/zbsilent/imag/main/img/2022/image-20220322112931980.png",alt:"image-20220322112931980"}})]),e._v(" "),s("h2",{attrs:{id:"操作"}},[e._v("操作")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://raw.githubusercontent.com/zbsilent/imag/main/img/2022/image-20220322113955964.png",alt:"image-20220322113955964"}})]),e._v(" "),s("blockquote",[s("p",[e._v("docker build -t dfc30428e163 /Users/zbsilent/Developer/2022PRO/docker")])]),e._v(" "),s("blockquote",[s("p",[e._v('docker run -itd --privileged -e "container=docker" --name centos7   -v /sys/fs/cgroup:/sys/fs/cgroup:ro -p 22:22 centos7 /usr/sbin/init')])]),e._v(" "),s("p",[s("em",[e._v("docker run -d -p 22:22 --name mycentod --privileged=true centos /usr/sbin/init")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('docker run --privileged -ti -e "container=docker" --name centos77 -v /sys/fs/cgroup:/sys/fs/cgroup -p 22:22 centos7 /usr/sbin/init\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("docker run -i -t -p "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("8080")]),e._v(":80 ubuntu\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("1  apt-get install net-tools inetutils-ping openssh-server samba samba-common git vim curl")]),e._v(" "),s("p",[e._v("yum install -y openssl openssh-server net-tools inetutils-ping openssh-server samba samba-common git vim curl")]),e._v(" "),s("p",[e._v("/etc/init.d/ssh restart")]),e._v(" "),s("p",[e._v('remote-dev-server.sh run "/home/developer"')])])}),[],!1,null,null,null);t.default=n.exports}}]);